# æ¯æ—¥æ›´æ–°æŠ¥å‘Šï¼ˆ2026-02-16ï¼‰

## vllm-project/vllm

| æäº¤æ—¶é—´ | ä½œè€… | æäº¤ä¿¡æ¯ |
|----------|------|----------|
| 2026-02-16 23:58:24 | Almog Tavor | [Bugfix] Treat generation_config max_tokens as default not ceiling (#34063) |
| 2026-02-16 23:34:29 | Lucas Kabela | [CI] Enable mypy coverage for individual excluded files (#34292) |
| 2026-02-16 23:33:55 | Christian Pinto | (bugfix): Fixed encode in LLM entrypoint for IOProcessr plugin prompts (#34618) |
| 2026-02-16 23:33:42 | Andreas Karatzas | [ROCm][CI] Fix plugins test group; updating terratorch and dependencies (#34589) |
| 2026-02-16 23:33:19 | Yiqi Xue | [Bugfix] Fix ARC touch KeyError for non-ready T1 blocks in kv offload (#34576) |
| 2026-02-16 23:33:09 | danisereb | Fix call to moe_mk in modelopt MoE modules (required for LoRA) (#34575) |
| 2026-02-16 23:32:51 | Isotr0py | [Models] Fuse Qwen3.5 GDN's qkvz_proj and ba_proj (#34492) |
| 2026-02-16 23:14:43 | Amr Mahdi | [CI] Disable precompiled wheel path in CI image builds (#34606) |
| 2026-02-16 21:24:35 | Harry Mellor | Bump `lm-eval` version for Transformers v5 compatibility (#33994) |
| 2026-02-16 20:57:39 | emricksini-h | [CI][Tracing] Fix race condition by adding server readiness check (#34364)<br>Attempt to resolve #34284: "Metrics Tracing (2GPU)" fails with a<br>segmentation fault. |
| 2026-02-16 19:08:44 | Ekagra Ranjan | [Scheduler][ASR] Fix CrossAttn blocks per-request for Variable length encoder inputs (#31058) |
| 2026-02-16 18:52:02 | Andreas Karatzas | [CI][Metrics] Stabilize tests with polling and subprocess guards (#34566)<br>test_abort_metrics_reset is flaky due to hardware-dependent<br>fixed sleeps: replace fixed sleeps with polling.<br>test_metrics_exist_run_batch passes even when the engine crashes<br>on startup (false positive): add subprocess lifecycle guards. |
| 2026-02-16 17:32:30 | Samu Tamminen | [Bugfix] Fix Dynamo unexpected keyword argument  (#34320) |
| 2026-02-16 17:06:05 | Roger Wang | Revert "[Misc] fix qwen3.5 config" (#34610) |
| 2026-02-16 16:25:38 | JJJYmmm | [Misc] fix qwen3.5 config (#34604) |
| 2026-02-16 15:46:33 | Cyrus Leung | [Renderer] Move InputPreprocessor into Renderer (1.5/2) (#34598) |
| 2026-02-16 14:15:47 | Amr Mahdi | [CI] Write bake config to temp directory instead of repo root (#34569) |
| 2026-02-16 12:10:50 | bnellnm | [Bugfix] Add method to swap quant_method on FusedMoE to fix LoRA issues (#34453) |
| 2026-02-16 12:09:18 | Lucas Wilkinson | [BugFix] Fix Python 3.13 FlashMLA import error (#34548) |
| 2026-02-16 12:09:00 | Parth Bansal | [Doc] Add Mistral-7b-v0.3 model to the batch invariance validated model (#34584) |
| 2026-02-16 12:06:48 | Andreas Karatzas | [CI][Frontend] Return 422 instead of 500 for invalid Anthropic tool_choice (#34590) |
| 2026-02-16 10:17:04 | Isotr0py | [CI/Build] Enable tests for recent day-0 new models (#34585) |

### ğŸ“Š ç»Ÿè®¡æ‘˜è¦
> æœ¬æ—¥å…± 22 ä¸ªæäº¤ | ğŸ”´é«˜ 0 | ğŸŸ¡ä¸­ 8 | ğŸŸ¢ä½ 14
## ğŸ“‹ ç›®å½•

- [vllm-project/vllm](#vllm-project-vllm)
  - [ğŸ“Š ç»Ÿè®¡æ‘˜è¦](#-ç»Ÿè®¡æ‘˜è¦)
  - [ğŸŸ¡ ä¸­é‡è¦åº¦å˜æ›´ (8)](#-ğŸŸ¡-ä¸­é‡è¦åº¦å˜æ›´-8)
    - [[Bugfix] Treat generation_config max_tokens as default no...](#72d5951)
    - [[CI] Enable mypy coverage for individual excluded files (...](#a3205be)
    - [(bugfix): Fixed encode in LLM entrypoint for IOProcessr p...](#6930bec)
    - [[Models] Fuse Qwen3.5 GDN's qkvz_proj and ba_proj (#34492)](#3bb4e43)
    - [[Scheduler][ASR] Fix CrossAttn blocks per-request for Var...](#cd81cdb)
    - [[CI][Metrics] Stabilize tests with polling and subprocess...](#1e82857)
    - [[Renderer] Move InputPreprocessor into Renderer (1.5/2) (...](#ec17bdd)
    - [[CI/Build] Enable tests for recent day-0 new models (#34585)](#91ac5d9)
  - [ğŸŸ¢ ä½é‡è¦åº¦å˜æ›´ (14)](#-ğŸŸ¢-ä½é‡è¦åº¦å˜æ›´-14)
    - [[ROCm][CI] Fix plugins test group; updating terratorch an...](#03a8770)
    - [[Bugfix] Fix ARC touch KeyError for non-ready T1 blocks i...](#bc56a1d)
    - [Fix call to moe_mk in modelopt MoE modules (required for ...](#ec7d9e6)
    - [[CI] Disable precompiled wheel path in CI image builds (#...](#08f8c19)
    - [Bump `lm-eval` version for Transformers v5 compatibility ...](#a21cedf)
    - [[CI][Tracing] Fix race condition by adding server readine...](#3ef74cd)
    - [[Bugfix] Fix Dynamo unexpected keyword argument  (#34320)](#a5ccc85)
    - [Revert "[Misc] fix qwen3.5 config" (#34610)](#b5475d0)
    - [[Misc] fix qwen3.5 config (#34604)](#9521002)
    - [[CI] Write bake config to temp directory instead of repo ...](#bb59c90)
    - [[Bugfix] Add method to swap quant_method on FusedMoE to f...](#5bff999)
    - [[BugFix] Fix Python 3.13 FlashMLA import error (#34548)](#bb85929)
    - [[Doc] Add Mistral-7b-v0.3 model to the batch invariance v...](#5653021)
    - [[CI][Frontend] Return 422 instead of 500 for invalid Anth...](#974d829)
#### ğŸŸ¡ ä¸­é‡è¦åº¦å˜æ›´ (8)

### [Bugfix] Treat generation_config max_tokens as default not ceiling (#34063)
**SHA**: `72d5951` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/72d5951d02f2e76228b162fcb63068877850b724)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šBugfixï¼ˆä¿®æ­£ `generation_config` ä¸­ `max_tokens` çš„è¯­ä¹‰ï¼‰  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
- å°†æ¨¡å‹ä½œè€…åœ¨ `generation_config.json` ä¸­å£°æ˜çš„ `max_tokens` ä»â€œä¸Šé™â€æ”¹ä¸ºâ€œé»˜è®¤å€¼â€ã€‚  
- æ–°å¢ `override_generation_config`ï¼ˆå¦‚ `max_new_tokens`ï¼‰ä½œä¸ºçœŸæ­£çš„ä¸Šé™ã€‚  
- `get_max_tokens` ç°åœ¨æ¥å— `override_max_tokens`ï¼Œåœ¨è®¡ç®—æœ€ç»ˆ `max_tokens` æ—¶æŠŠæ¨¡å‹é»˜è®¤ã€ç”¨æˆ·è¦†ç›–åŠå¹³å°ä¸Šé™ç»Ÿä¸€è€ƒè™‘ã€‚  
- ç›¸åº”çš„ OpenAIâ€‘style endpointï¼ˆchat/completion/responses/engineï¼‰å‡åŠ å…¥ `override_max_tokens` å‚æ•°ï¼Œä»¥ä¿æŒè¡Œä¸ºä¸€è‡´ã€‚  
- ä¸ºæ­¤è¡¥å……äº†å¤§é‡å•å…ƒæµ‹è¯•ï¼Œè¦†ç›–é»˜è®¤ã€è¯·æ±‚è¶…é™ã€æ˜¾å¼è¦†ç›–ç­‰åœºæ™¯ã€‚

**ğŸ¯ å½±å“èŒƒå›´**  
- `vllm/entrypoints/openai/*/serving.py`ï¼ˆchatã€completionã€responsesã€engineï¼‰  
- `vllm/entrypoints/utils.py`ï¼ˆ`get_max_tokens`ï¼‰  
- ç›¸å…³æµ‹è¯•æ–‡ä»¶ `tests/entrypoints/openai/test_serving_chat.py`ã€`tests/entrypoints/test_utils.py`  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
1. **å‘åå…¼å®¹**ï¼šæ—§ç‰ˆæ¨¡å‹çš„ `generation_config` ä»å¯èƒ½æŠŠ `max_tokens` è®¾ä¸ºç¡¬ä¸Šé™ï¼Œè°ƒç”¨æ–¹è‹¥ä¾èµ–è¯¥è¡Œä¸ºï¼Œéœ€è¦åœ¨æ¨¡å‹é…ç½®é‡Œä½¿ç”¨ `override_generation_config` æ˜ç¡®å£°æ˜ä¸Šé™ã€‚  
2. **æ–‡æ¡£åŒæ­¥**ï¼šæ›´æ–°éƒ¨ç½²æ–‡æ¡£ä¸ CLI å‚æ•°è¯´æ˜ï¼Œæ˜ç¡® `--override-generation-config` çš„ä½œç”¨æ˜¯â€œä¸Šé™â€ï¼Œè€Œæ™®é€š `generation_config.max_tokens` åªä½œé»˜è®¤ã€‚  
3. **æ€§èƒ½æ£€æŸ¥**ï¼š`get_max_tokens` ç°åœ¨ä¼šåœ¨æ¯ä¸€æ¬¡ç”Ÿæˆæ—¶å¤šæ¯”è¾ƒä¸€æ¬¡ `override_max_tokens`ï¼Œå¼€é”€æå°ï¼Œä½†å»ºè®®åœ¨é«˜å¹¶å‘ç¯å¢ƒä¸‹è·‘ä¸€æ¬¡åŸºå‡†ï¼Œç¡®è®¤æ— å›å½’ã€‚  
4. **å¼‚å¸¸è·¯å¾„**ï¼šç¡®è®¤åœ¨ `override_generation_config` ä¸ºç©ºæˆ–ç¼ºå¤± `max_new_tokens` æ—¶ï¼Œä»£ç ä»èƒ½å®‰å…¨å›é€€åˆ° `default_sampling_params["max_tokens"]`ï¼Œé˜²æ­¢ `None` ä¼ æ’­å¯¼è‡´ `min()` æŠ›å¼‚å¸¸ã€‚  

æ•´ä½“æ¥çœ‹ï¼Œæ”¹åŠ¨èšç„¦å•ä¸€é€»è¾‘ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œæµ‹è¯•è¦†ç›–å……åˆ†ï¼Œå»ºè®®åˆå¹¶ã€‚

---

### [CI] Enable mypy coverage for individual excluded files (#34292)
**SHA**: `a3205be` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/a3205beffb6b3d2923fd9ad8e1ef8b4fd5f7ed29)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º / ç±»å‹å®‰å…¨æå‡ï¼ˆä¸º CI å¼•å…¥æ›´ä¸¥æ ¼çš„ mypy æ£€æŸ¥ï¼‰  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
1. `tools/pre_commit/mypy.py` åˆ é™¤äº†æ•°ä¸ªæ–‡ä»¶çš„æ’é™¤ï¼Œä½¿ CI å¯¹å®ƒä»¬æ‰§è¡Œ mypy æ£€æŸ¥ã€‚  
2. å¤§é‡é…ç½®ç±»(`CacheConfigã€ParallelConfigã€SchedulerConfigã€EngineArgs` ç­‰)çš„å­—æ®µç±»å‹ä»å®½æ¾çš„ `bool`/`str` ç­‰æ”¹ä¸ºæ›´ç²¾ç¡®çš„è”åˆç±»å‹æˆ– `| None`ï¼Œå¹¶åŠ å…¥ç»†ç²’åº¦çš„ `# type: ignore` æ³¨é‡Šã€‚  
3. `vllm/logger.py`ã€`vllm/outputs.py`ã€`vllm/v1/cudagraph_dispatcher.py` æ·»åŠ äº†ç±»å‹æ³¨è§£å’Œè¿è¡Œæ—¶ `assert`ï¼Œæå‡é™æ€æ£€æŸ¥çš„è¦†ç›–ç‡ã€‚  
4. `vllm/config/utils.py` ä¸­ `get_field` çš„è¿”å›ç±»å‹ä» `Field` æ”¹ä¸º `Any`ï¼Œé¿å… mypy å¯¹å†…éƒ¨å®ç°ç»†èŠ‚çš„è¯¯æŠ¥ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- **é…ç½®å­ç³»ç»Ÿ**ï¼š`vllm/config/*`ï¼ˆç¼“å­˜ã€å¹¶è¡Œã€è°ƒåº¦ã€é€šç”¨å·¥å…·ï¼‰ä»¥åŠ `EngineArgs` çš„é»˜è®¤å€¼ä¸ç±»å‹å£°æ˜ã€‚  
- **è¿è¡Œæ—¶æ ¸å¿ƒ**ï¼š`vllm/engine/arg_utils.py`ã€`vllm/v1/cudagraph_dispatcher.py`ã€`vllm/logger.py`ã€`vllm/outputs.py`ã€‚  
- **CI å·¥å…·é“¾**ï¼š`tools/pre_commit/mypy.py` ç°åœ¨ä¼šæ£€æŸ¥ä¹‹å‰è¢«æ’é™¤çš„æ–‡ä»¶ã€‚  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
1. **æœ¬åœ°å…ˆè·‘ mypy**ï¼šåœ¨æäº¤å‰æœ¬åœ°æ‰§è¡Œ `pre-commit run mypy -a`ï¼Œç¡®ä¿æ–°å¢çš„æ–‡ä»¶ä¸äº§ç”Ÿç±»å‹é”™è¯¯ã€‚  
2. **è¿è¡Œæ—¶æ–­è¨€**ï¼šæ–°åŠ å…¥çš„ `assert` å‡è®¾æŸäº›é…ç½®å¿…ç„¶å·²è¢«å¡«å……ï¼ˆå¦‚ `enable_prefix_caching`ã€`max_model_len`ã€`cudagraph_capture_sizes`ï¼‰ï¼Œåœ¨ä½¿ç”¨æ—§ç‰ˆå‘½ä»¤è¡Œæˆ– API æ—¶è¦æ£€æŸ¥è¿™äº›å­—æ®µæ˜¯å¦ä»å¯èƒ½ä¸º `None`ï¼Œå¦åˆ™ä¼šåœ¨ç”Ÿäº§ç¯å¢ƒæŠ›å‡º AssertionErrorã€‚  
3. **å‘åå…¼å®¹**ï¼šå­—æ®µç±»å‹ä» `bool` æ”¹ä¸º `bool | None`ã€`str` æ”¹ä¸º `str | None`ï¼Œä½†é»˜è®¤ä»ä¸ºéç©ºå€¼ï¼Œè°ƒç”¨æ–¹è‹¥è‡ªè¡Œå®ä¾‹åŒ–é…ç½®ç±»è€Œæœªæ˜¾å¼æä¾›è¿™äº›å­—æ®µï¼Œä»ä¼šå¾—åˆ°æ—§è¡Œä¸ºã€‚è¯·åœ¨æ–‡æ¡£æˆ–ç¤ºä¾‹ä¸­è¯´æ˜æ–°ç±»å‹çš„å«ä¹‰ã€‚  
4. **ä¾èµ–æ›´æ–°**ï¼š`engine/arg_utils.py` å¼•å…¥äº† `MaxLoRARanks`ï¼Œç¡®è®¤ `vllm/config/lora.py` å·²å¯¼å‡ºè¯¥åˆ«åï¼Œé¿å…å¯¼å…¥é”™è¯¯ã€‚  
5. **æµ‹è¯•è¦†ç›–**ï¼šæ–°å¢çš„æ–­è¨€ä¸ç±»å‹æ£€æŸ¥å¯èƒ½å¯¼è‡´éƒ¨åˆ†æ—§å•å…ƒæµ‹è¯•å›  `None` å‚æ•°å¤±è´¥ï¼Œå»ºè®®åœ¨ CI ä¸­åŠ å…¥é’ˆå¯¹ `EngineArgs` å®Œæ•´åˆå§‹åŒ–çš„æµ‹è¯•ç”¨ä¾‹ã€‚  

æ€»ä½“è€Œè¨€ï¼Œæ­¤æ¬¡ PR é€šè¿‡æ›´ä¸¥å¯†çš„ç±»å‹æ³¨è§£æå‡äº†ä»£ç å¯ç»´æŠ¤æ€§ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å¯ç”¨å‰è¯·éªŒè¯æ‰€æœ‰é…ç½®è·¯å¾„å‡èƒ½æä¾›é `None` çš„å¿…éœ€å­—æ®µï¼Œé˜²æ­¢æ–­è¨€è§¦å‘å¯¼è‡´æœåŠ¡ä¸å¯ç”¨ã€‚

---

### (bugfix): Fixed encode in LLM entrypoint for IOProcessr plugin prompts (#34618)
**SHA**: `6930bec` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/6930becd453ab81dce074505521a41a397d0c727)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šBug ä¿®å¤  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  
**ğŸ“‹ å˜æ›´æ‘˜è¦**ï¼šåœ¨ LLM å…¥å£ `encode` ä¸­å¯¹ IOProcessor æ’ä»¶çš„è¾“å…¥åšäº†ç»“æ„åŒ–æ ¡éªŒï¼Œè¦æ±‚å¤–å±‚å¿…é¡»æ˜¯ `{ "data": <å®é™…æ•°æ®> }`ï¼Œå¹¶åœ¨ç¼ºå¤± `data` å­—æ®µæ—¶æŠ›å‡ºæ˜ç¡®çš„ `ValueError`ã€‚ç›¸åº”åœ°ï¼Œç¤ºä¾‹è„šæœ¬å’Œæ’ä»¶å•å…ƒæµ‹è¯•ä¹Ÿæ”¹ä¸ºå…ˆæ„é€  `img_data` å†åŒ…è£…ä¸º `prompt` ä¼ å…¥ã€‚

**ğŸ¯ å½±å“èŒƒå›´**ï¼š  
- `vllm/entrypoints/llm.py`ï¼ˆæ ¸å¿ƒ encode å®ç°ï¼‰  
- `examples/pooling/plugin/prithvi_geospatial_mae_io_processor.py`ï¼ˆä½¿ç”¨ç¤ºä¾‹ï¼‰  
- `tests/plugins_tests/test_io_processor_plugins.py`ï¼ˆæµ‹è¯•ç”¨ä¾‹ï¼‰  

**ğŸ’¡ å…³æ³¨å»ºè®®**ï¼š  
1. **è°ƒç”¨æ–¹å‡çº§**ï¼šæ‰€æœ‰ç›´æ¥æŠŠ `{data:..., ...}` ä¼ ç»™ `LLM.encode` çš„ä»£ç éœ€æ”¹ä¸º `{ "data": {...} }` çš„åŒ…è£…ï¼Œå¦åˆ™ä¼šåœ¨è¿è¡Œæ—¶è§¦å‘æ–°åŠ å…¥çš„ `ValueError`ã€‚  
2. **æ–‡æ¡£åŒæ­¥**ï¼šæ›´æ–°æ’ä»¶ä½¿ç”¨æ–‡æ¡£ã€API è¯´æ˜ä»¥åŠ READMEï¼Œæ˜ç¡® â€œdata å¿…é¡»æ”¾åœ¨å¤–å±‚ `data` é”®â€ çš„çº¦å®šã€‚  
3. **å…¼å®¹æ€§**ï¼šå¦‚é¡¹ç›®éœ€å…¼å®¹æ—§æ ¼å¼ï¼Œå¯è€ƒè™‘åœ¨ `encode` å‰åŠ å…¥ä¸´æ—¶é€‚é…å±‚æˆ–ç»™å‡º `DeprecationWarning`ï¼Œé¿å…ç”¨æˆ·å‡çº§åç«‹å³æŠ¥é”™ã€‚  
4. **æµ‹è¯•è¦†ç›–**ï¼šæ–°å¢å¯¹ç¼ºå¤± `data` å­—æ®µçš„å¼‚å¸¸è·¯å¾„æµ‹è¯•ï¼Œç¡®ä¿é”™è¯¯ä¿¡æ¯ä¿æŒå¯è¯»ä¸”ä¸æ³„éœ²å†…éƒ¨å®ç°ã€‚  
5. **å¼‚å¸¸å¤„ç†**ï¼šåœ¨ä¸Šå±‚è°ƒç”¨ï¼ˆå¦‚ `vllm_runner.get_llm().encode`ï¼‰åŠ å…¥æ•è· `ValueError` çš„é€»è¾‘ï¼Œä»¥æä¾›æ›´å‹å¥½çš„é”™è¯¯åé¦ˆã€‚  

æ€»ä½“æ¥è¯´ï¼Œæ­¤æ¬¡æ”¹åŠ¨æå‡äº†æ’ä»¶è¾“å…¥æ ¡éªŒçš„ä¸¥è°¨æ€§ï¼Œé˜²æ­¢å› ç»“æ„é”™è¯¯å¯¼è‡´çš„éšè”½é”™è¯¯ï¼Œä½†åŒæ—¶éœ€è¦ç¡®ä¿æ‰€æœ‰ä½¿ç”¨ IOProcessor æ’ä»¶çš„ä»£ç åŒæ­¥è¿ç§»åˆ°æ–°çš„åŒ…è£…æ ¼å¼ã€‚

---

### [Models] Fuse Qwen3.5 GDN's qkvz_proj and ba_proj (#34492)
**SHA**: `3bb4e43` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/3bb4e4311c6da31257e6c8e5b1027ef516e025c8)

**å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º / å°å¹…é‡æ„ï¼ˆä¸º Qwenâ€‘3.5â€‘GDN å¼•å…¥ QKVZ ä¸ BA ä¸¤è·¯èåˆï¼‰  
**é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**æ ¸å¿ƒæ”¹åŠ¨**  
1. **linear.py**  
   - `weight_loader` ä¸ `weight_loader_v2` çš„ `loaded_shard_id` å‚æ•°æ”¾å®½ä¸º `tuple[int,â€¦] | int | None`ï¼Œå¹¶åœ¨ `weight_loader` ä¸­å¯¹å¤šç´¢å¼•æƒ…å½¢æŠ›å‡º `NotImplementedError`ï¼Œæç¤ºæ”¹ç”¨ `weight_loader_v2`ã€‚  
   - `_load_fused_module_from_checkpoint` ç°åœ¨æ¥æ”¶ `output_sizes`ï¼Œä»¥æ”¯æŒä¸åŒ shard çš„å®½åº¦æ˜ å°„ã€‚  
   - `weight_loader_v2` è¿½åŠ å¯¹ `tuple` shardâ€‘id çš„å¤„ç†ï¼Œè®¡ç®—å¯¹åº”çš„ `output_sizes`ï¼ˆåŒ…æ‹¬ BlockQuantScale åœºæ™¯çš„ blockâ€‘size è°ƒæ•´ï¼‰ã€‚  

2. **qwen3_5.py / qwen3_next.py**  
   - å¤§å¹…åˆ å‡æ—§çš„ `ColumnParallelLinear`ã€`RowParallelLinear` ç­‰ç»„ä»¶çš„æ˜¾å¼å£°æ˜ï¼Œç»Ÿä¸€ä½¿ç”¨ **èåˆçš„ `MergedColumnParallelLinear`** æ¥å®ç° `in_proj_qkvz`ï¼ˆä¸€æ¬¡æ€§è¾“å‡º Qã€Kã€Vã€Zï¼‰å’Œ `in_proj_ba`ï¼ˆä¸€æ¬¡æ€§è¾“å‡º Bã€Aï¼‰ã€‚  
   - ä¸ºä¸¤è€…æ–°å¢ `create_qkvz_proj` / `create_qkvz_proj` æ–¹æ³•ï¼Œä»¥ä¾¿åœ¨å­ç±»ä¸­çµæ´»æ„é€ ä¸åŒçš„è¾“å‡ºå°ºå¯¸ã€‚  
   - `forward` ä¸­ç›¸åº”æ‹†åˆ† `mixed_qkvz`ã€`mixed_ba`ï¼Œå»æ‰åŸæœ‰çš„ `fix_query_key_value_ordering` å®ç°ã€‚  
   - `load_fused_expert_weights` ä¸­çš„æ˜ å°„è¡¨åŠ å…¥äº†æ–°çš„ fused å‚æ•°å (`in_proj_qkvz`, `in_proj_ba`) ä¸å¯¹åº”çš„ shardâ€‘idã€‚  

**å½±å“èŒƒå›´**  
- `vllm/model_executor/layers/linear.py`ï¼ˆæƒé‡åŠ è½½ä¸åˆ†ç‰‡è§£æï¼‰  
- `vllm/model_executor/models/qwen3_5.py`ã€`vllm/model_executor/models/qwen3_next.py`ï¼ˆæ¨¡å‹ç»“æ„ã€å‰å‘é€»è¾‘ã€æƒé‡åŠ è½½ï¼‰  

**æ½œåœ¨é£é™©**  
- å…¶ä»–æ¨¡å‹å¦‚æœä»ä¾èµ–æ—§ç‰ˆ `weight_loader` çš„å•ä¸€ `int` shardâ€‘idï¼Œè°ƒç”¨æ—¶ä¼šè§¦å‘ `NotImplementedError`ã€‚  
- `output_sizes` è®¡ç®—é€»è¾‘åŠ å…¥äº† `adjust_block_scale_shard`ï¼Œè‹¥ blockâ€‘size ä¸å®é™… checkpoint ä¸åŒ¹é…ï¼Œå¯èƒ½å¯¼è‡´æƒé‡é”™ä½ã€‚  

**å»ºè®®**  
- å¯¹æ‰€æœ‰è‡ªå®šä¹‰æƒé‡åŠ è½½è·¯å¾„å®¡æŸ¥ï¼Œç¡®ä¿åœ¨éœ€è¦å¤š shardâ€‘id æ—¶æ”¹ä¸º `weight_loader_v2`ã€‚  
- è¿è¡Œå®Œæ•´çš„æ¨¡å‹å•å…ƒ/é›†æˆæµ‹è¯•ï¼Œç‰¹åˆ«æ˜¯ Qwenâ€‘3.5â€‘GDN ä¸ Qwenâ€‘3â€‘Next çš„æƒé‡æ¢å¤è·¯å¾„ã€‚  
- è‹¥é¡¹ç›®ä¸­ä»ä½¿ç”¨ `ColumnParallelLinear`/`RowParallelLinear` æ‰‹åŠ¨åˆ‡åˆ†ï¼Œè¯·è¿ç§»åˆ° `MergedColumnParallelLinear`ï¼Œä»¥ä¿æŒä¸æ–°æƒé‡åŠ è½½é€»è¾‘ä¸€è‡´ã€‚  

**å¯¹ç”¨æˆ·**  
å‡çº§å Qwenâ€‘3.5â€‘GDN ç³»åˆ—æ¨¡å‹åŠ è½½æ›´å¿«ã€æ˜¾å­˜å ç”¨æ›´ä½ï¼›é™¤éè‡ªè¡Œå®ç°æƒé‡åŠ è½½ï¼Œå¦åˆ™æ— éœ€é¢å¤–æ“ä½œã€‚

---

### [Scheduler][ASR] Fix CrossAttn blocks per-request for Variable length encoder inputs (#31058)
**SHA**: `cd81cdb` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/cd81cdb399e5ead89ac10eb3f8eff1fa85b427a1)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º/Bug ä¿®å¤  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
1. `Scheduler.__init__` ä¸­åŸå…ˆä¸º Encoderâ€‘Decoder æ¨¡å‹é¢„åˆ†é…çš„ **æœ€å¤§è·¨æ³¨æ„åŠ›å—æ•°** è¢«ç§»é™¤ã€‚  
2. `schedule` é‡Œæ”¹ä¸ºåœ¨æ¯ä¸ªè¯·æ±‚å®é™…æ‹¥æœ‰ **encoder è¾“å…¥** ä¸”å¯¹åº”çš„ encoderâ€tokens å·²å‡†å¤‡å¥½æ—¶ï¼ŒåŠ¨æ€è®¡ç®— `num_encoder_tokens = Î£ request.get_num_encoder_embeds(i)`ï¼Œä»…æŒ‰çœŸå®é•¿åº¦åˆ†é…è·¨æ³¨æ„åŠ› KV å—ã€‚  
3. ä¸ºæ­¤æ–°å¢ 4 æ¡å•å…ƒæµ‹è¯•ï¼ŒéªŒè¯ï¼š  
   - ä¸åŒ encoder é•¿åº¦å¾—åˆ°ä¸åŒå—æ•°ï¼ˆå˜é‡é•¿åˆ†é…ï¼‰ã€‚  
   - ä¸ä¼šå‡ºç° **è¿‡åº¦** æˆ– **ä¸è¶³** åˆ†é…ã€‚  
   - å®Œå…¨æ²¡æœ‰ encoder è¾“å…¥çš„è¯·æ±‚åˆ†é… 0 å—ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- `vllm/v1/core/sched/scheduler.py`ï¼ˆè°ƒåº¦å™¨åˆå§‹åŒ–ä¸è°ƒåº¦è·¯å¾„ï¼‰  
- KVâ€‘Cache ç®¡ç†å±‚ï¼ˆ`CrossAttentionManager`ï¼‰é—´æ¥å—å½±å“ã€‚  
- æµ‹è¯•å¥—ä»¶ `tests/v1/core/test_scheduler.py`ï¼ˆæ–°å¢çº¦ 300 è¡Œï¼‰ã€‚  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
1. **å…¼å®¹æ€§æ£€æŸ¥**ï¼šç¡®è®¤é Encoderâ€‘Decoder æ¨¡å‹ï¼ˆå¦‚çº¯è§£ç å™¨ï¼‰ä»ä¿æŒåŸæœ‰è¡Œä¸ºï¼Œé¿å…è¯¯è§¦ `request.has_encoder_inputs`ã€‚  
2. **æ€§èƒ½éªŒè¯**ï¼šåœ¨å¤§æ‰¹é‡é•¿éŸ³é¢‘è¾“å…¥ï¼ˆå¦‚ Whisperï¼‰ä¸Šè·‘ä¸€æ¬¡å…¨æµç¨‹åŸºå‡†ï¼Œç¡®ä¿å—æ•°åŠ¨æ€åˆ†é…å¸¦æ¥çš„æ˜¾å­˜èŠ‚çœä¸è°ƒåº¦å»¶è¿Ÿæ— è´Ÿé¢å›å½’ã€‚  
3. **æ–‡æ¡£æ›´æ–°**ï¼šåœ¨ `Scheduler`ã€`EncoderDecoderCacheManager`ã€`CrossAttentionSpec` çš„è¯´æ˜ä¸­åŠ å…¥â€œè·¨æ³¨æ„åŠ›å—æŒ‰è¯·æ±‚å®é™… encoder é•¿åº¦åˆ†é…â€çš„æè¿°ã€‚  
4. **å¼‚å¸¸è·¯å¾„**ï¼š`request.get_num_encoder_embeds(i)` åœ¨æŸäº›æ¨¡æ€ï¼ˆå¦‚æœªå®ç°çš„å¤šæ¨¡æ€ï¼‰å¯èƒ½æŠ›å¼‚å¸¸ï¼Œå»ºè®®åœ¨è°ƒåº¦å‰åŠ å®¹é”™æˆ–æ–­è¨€ã€‚  
5. **CI æ‰©å±•**ï¼šå°†æ–°å¢åŠ çš„æµ‹è¯•åŠ å…¥è·¨å¹³å° CIï¼Œç¡®ä¿åœ¨ä¸åŒç¡¬ä»¶/torch ç‰ˆæœ¬ä¸‹å‡é€šè¿‡ã€‚  

æ€»ä½“æ¥çœ‹ï¼Œæ­¤æ”¹åŠ¨ä¿®æ­£äº† Whisper ç­‰æ¨¡å‹åœ¨å˜é•¿ encoder è¾“å…¥åœºæ™¯ä¸‹çš„æ˜¾å­˜æµªè´¹é—®é¢˜ï¼Œæå‡äº†èµ„æºåˆ©ç”¨ç‡ï¼Œåªè¦åšå¥½å…¼å®¹æ€§å’Œæ€§èƒ½å›å½’éªŒè¯å³å¯å®‰å…¨ä¸Šçº¿ã€‚

---

### [CI][Metrics] Stabilize tests with polling and subprocess guards (#34566)
**SHA**: `1e82857` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/1e828573b4a788971220c17a41350c2068b4c810)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šå…¶ä»–ï¼ˆæµ‹è¯•å¯é æ€§æå‡ï¼‰  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
1. å°† `test_abort_metrics_reset` ä¸­çš„å›ºå®š `sleep` æ›¿æ¢ä¸ºåŸºäºè½®è¯¢çš„ `_poll_until`ï¼Œç¡®ä¿åœ¨ä¸åŒç¡¬ä»¶ä¸Šéƒ½èƒ½å¯é æ£€æµ‹åˆ°è¯·æ±‚è¿è¡Œä¸æŒ‡æ ‡å½’é›¶ã€‚  
2. ä¸º `test_metrics_exist_run_batch` å¼•å…¥ `get_open_port()` åŠ¨æ€åˆ†é…ç«¯å£ï¼Œé¿å…ç«¯å£å†²çªã€‚  
3. å¢åŠ å¯¹å­è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸçš„å®ˆå«ï¼šå¯åŠ¨åè½®è¯¢æ£€æµ‹æœåŠ¡å¯è¾¾æ€§ã€åœ¨è¶…æ—¶æˆ–å­è¿›ç¨‹å¼‚å¸¸é€€å‡ºæ—¶æå‰ `pytest.fail`ï¼Œå¹¶åœ¨ `finally` ä¸­ç¡®ä¿å­è¿›ç¨‹è¢«ç»ˆæ­¢/å¼ºæ€ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- `tests/entrypoints/instrumentator/test_metrics.py`ï¼ˆå”¯ä¸€å—å½±å“æ–‡ä»¶ï¼‰ã€‚  
- é€šè¿‡ `vllm.utils.network_utils.get_open_port` å¼•å…¥äº†æ–°çš„å…¬å…±å·¥å…·å‡½æ•°ã€‚  

**ğŸ’¡ å…³æ³¨å»ºè®®**  

1. **`_poll_until` å®ç°**  
   - å½“å‰ `predicate` ç›´æ¥è°ƒç”¨å¯èƒ½æŠ›å¼‚å¸¸ï¼ˆå¦‚ç½‘ç»œè¯·æ±‚ï¼‰ï¼Œå»ºè®®åœ¨è½®è¯¢å†…éƒ¨æ•è·å¼‚å¸¸å¹¶è¿”å› `False`ï¼Œé˜²æ­¢å› ä¸€æ¬¡å¤±è´¥å¯¼è‡´æ•´ä¸ªæµ‹è¯•å¤±æ•ˆã€‚  
   - ä¸º `predicate` æ·»åŠ è¿”å›ç±»å‹æ³¨è§£ `Callable[[], bool]`ï¼Œæå‡å¯è¯»æ€§ã€‚  

2. **å­è¿›ç¨‹ç®¡ç†**  
   - `proc.wait(timeout=15)` å¯èƒ½åœ¨ Windows ä¸Šå› å­è¿›ç¨‹å·²è¢« `terminate` è€ŒæŠ› `TimeoutExpired`ï¼Œå·²åœ¨ `except` ä¸­å¤„ç†ï¼Œä½†å»ºè®®åœ¨ `finally` å—é‡Œç»Ÿä¸€è°ƒç”¨ `proc.kill()` åšä¸€æ¬¡ä¿é™©ã€‚  
   - è‹¥æµ‹è¯•å¼‚å¸¸æå‰é€€å‡ºï¼Œç¡®ä¿ `proc` ä¸ä¼šæ®‹ç•™ï¼ˆä½¿ç”¨ `atexit` æˆ– `contextlib.ExitStack` è¿›ä¸€æ­¥å°è£…ï¼‰ã€‚  

3. **ç«¯å£åˆ†é…**  
   - `get_open_port()` åœ¨æç«¯å¹¶å‘æƒ…å†µä¸‹ä»æœ‰ç«äº‰é£é™©ï¼Œå»ºè®®åœ¨è·å–ç«¯å£åç«‹å³ç»‘å®šä¸€æ¬¡ï¼ˆå³ä½¿æ˜¯ä¸´æ—¶ socketï¼‰ï¼Œé˜²æ­¢å…¶ä»–è¿›ç¨‹æŠ¢å ã€‚  

4. **ä»£ç é£æ ¼**  
   - `_poll_until` çš„ `interval` é»˜è®¤ 0.5â€¯sï¼Œéƒ¨åˆ†è°ƒç”¨ä½¿ç”¨ 0.1â€¯sï¼Œå»ºè®®ç»Ÿä¸€ä¸ºå¸¸é‡å¹¶åœ¨æ–‡æ¡£ä¸­è¯´æ˜ã€‚  
   - åœ¨ `test_abort_metrics_reset` ä¸­ `tasks.cancel()` åç›´æ¥ `await asyncio.gather(*tasks, return_exceptions=True)`ï¼Œå¯è€ƒè™‘åœ¨å–æ¶ˆå‰ç»Ÿä¸€è®°å½•ä»»åŠ¡ IDï¼Œä¾¿äºè°ƒè¯•ã€‚  

5. **å›å½’é£é™©**  
   - è¿™äº›æ”¹åŠ¨ä»…å½±å“æµ‹è¯•å±‚ï¼Œä¸ä¼šå½±å“åº“çš„è¿è¡Œæ—¶è¡Œä¸ºã€‚ä½†å¼•å…¥çš„å…¬å…±å‡½æ•° `get_open_port` è‹¥è¢«å…¶ä»–æ¨¡å—è¯¯ç”¨ï¼Œéœ€æ£€æŸ¥å…¶å¼‚å¸¸è·¯å¾„ï¼ˆå¦‚ç«¯å£è·å–å¤±è´¥ï¼‰ã€‚  

**ç»“è®º**  
æœ¬æ¬¡æ”¹åŠ¨æ˜¾è‘—æå‡äº†ä¸¤é¡¹æŒ‡æ ‡ç›¸å…³æµ‹è¯•çš„ç¨³å®šæ€§ï¼Œé€»è¾‘æ¸…æ™°ã€å¼‚å¸¸å¤„ç†æ›´å®Œå–„ã€‚å»ºè®®åœ¨åˆå¹¶å‰åŠ å…¥ä¸Šè¿°ç»†èŠ‚çš„è½»é‡ä¿®æ­£ï¼Œä»¥é˜²æ½œåœ¨çš„éšè— flaky æˆ–èµ„æºæ³„æ¼é—®é¢˜ã€‚

---

### [Renderer] Move InputPreprocessor into Renderer (1.5/2) (#34598)
**SHA**: `ec17bdd` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/ec17bdd8940798a5e74dc83ed489aacfbc32736d)

**å˜æ›´æ¦‚è§ˆ**  
æœ¬æ¬¡æäº¤æŠŠåŸæœ¬æ•£è½åœ¨ `InputPreprocessor` çš„ç¼–ç /è§£ç å‰å¤„ç†é€»è¾‘è¿ç§»åˆ° `Renderer`ï¼Œå¹¶åœ¨è¾“å…¥ç»“æ„ä¸­åŠ å…¥å¯é€‰ `prompt` å­—æ®µï¼Œä»¥ä¾¿åœ¨åç»­çš„ç¼“å­˜ã€æ—¥å¿—ç­‰ç¯èŠ‚ä¿ç•™åŸå§‹æ–‡æœ¬ã€‚æ ¸å¿ƒå®ç°åŒ…æ‹¬ï¼š

1. **è¾“å…¥ç»“æ„æ‰©å±•**ï¼š`TokenInputsã€EmbedsInputsã€MultiModalInputs` ç»Ÿä¸€æ”¯æŒ `prompt`ï¼ˆ`NotRequired[str]`ï¼‰ï¼Œå¹¶åœ¨æ„é€ å‡½æ•° (`token_inputsã€embeds_inputsã€mm_inputsã€mm_enc_dec_inputs`) ä¸­æä¾›å¯é€‰å‚æ•°å†™å…¥ã€‚  
2. **Encoderâ€‘Decoder è¾“å…¥ç»Ÿä¸€**ï¼šæ–°å¢ `build_enc_dec_inputs`ï¼Œå†…éƒ¨ä½¿ç”¨ `_validate_*`ã€`_prepare_decoder_input_ids_for_generation`ï¼Œå¹¶é€šè¿‡ `Renderer.get_dec_start_token_id` ç»Ÿä¸€è·å– `decoder_start_token_id`ã€‚  
3. **æ¸²æŸ“å™¨å±‚æŠ½å–**ï¼šåœ¨ `Renderer` ä¸­æ–°å¢ `get_dec_start_token_id`ï¼Œå–ä»£æ­¤å‰åœ¨ `InputPreprocessor` çš„å®ç°ã€‚  
4. **ä»£ç ç®€åŒ–**ï¼šå¤§é‡æ—§çš„ `_validate_*`ã€`_prepare_decoder_input_ids`ã€`_build_enc_dec_inputs` è¢«åˆ é™¤ï¼Œè½¬è€Œè°ƒç”¨å…¬å…±å‡½æ•°ï¼›`mm_inputs`/`mm_enc_dec_inputs` æ›¿ä»£æ‰‹å†™ `MultiModalInputs` æ„é€ ï¼›`MediaWithBytes.original_bytes` æ”¹ä¸º `field(repr=False)` éšè”½å¤§å—äºŒè¿›åˆ¶ã€‚  

**å½±å“èŒƒå›´**  
- `vllm/inputs/*`ï¼ˆæ•°æ®ç»“æ„ã€è§£æã€é¢„å¤„ç†ï¼‰  
- `vllm/renderers/base.py`ï¼ˆè§£ç å™¨ start token è®¿é—®ï¼‰  
- `vllm/multimodal/*`ï¼ˆè¾“å…¥æ„é€ ã€å¤„ç†å™¨ï¼‰  
- å¤šä¸ªæ¨¡å‹å®ç° (`llava.pyã€terratorch.pyã€transformers/multimodal.py`) ç°åœ¨ä½¿ç”¨ `mm_inputs`ã€‚  
- ç›¸å…³å•å…ƒæµ‹è¯• `tests/renderers/test_completions.py` éœ€æ›´æ–°ä»¥è¦†ç›– `prompt` å­—æ®µã€‚  

**å…³æ³¨å»ºè®®**  
1. **ç±»å‹æ£€æŸ¥**ï¼šæ–°å¢ `prompt` ä¸º `NotRequired`ï¼Œè¯·ç¡®ä¿ `mypy`ã€`pyright` å‡é€šè¿‡ï¼Œç‰¹åˆ«æ˜¯å¯¹ `ProcessorInputs` çš„åˆ†æ”¯åˆ¤æ–­ã€‚  
2. **å‘åå…¼å®¹**ï¼šå¤–éƒ¨è°ƒç”¨ä»å¯èƒ½ä¾èµ–æ—§çš„ `encoder`/`decoder` é”®ï¼Œ`split_enc_dec_inputs` å·²æ”¹ä¸ºè¯»å– `type=="enc_dec"`ï¼Œå»ºè®®åœ¨æ–‡æ¡£å’Œè¿ç§»æŒ‡å—ä¸­æ˜ç¡®è¯´æ˜ã€‚  
3. **ç¼“å­˜é”®ä¸€è‡´æ€§**ï¼š`cache_salt` ä»é€šè¿‡ `build_enc_dec_inputs` ä¼ é€’ï¼ŒéªŒè¯åœ¨ encoderâ€‘decoder åœºæ™¯ä¸‹ç¼“å­˜å‘½ä¸­è¡Œä¸ºæœªæ”¹å˜ã€‚  
4. **æµ‹è¯•è¦†ç›–**ï¼šè¡¥å……å¤šæ¨¡æ€ã€embeddingã€token ä¸‰ç§è·¯å¾„çš„ `prompt` ä¼ é€’æµ‹è¯•ï¼Œç¡®è®¤ `Renderer.get_dec_start_token_id` åœ¨æ—  `decoder_start_token_id` æ—¶æ­£ç¡®å›é€€ `<BOS>`ã€‚  
5. **æ–‡æ¡£æ›´æ–°**ï¼šæ›´æ–° `inputs/data.md`ã€`renderers/base.md`ï¼Œè¯´æ˜ `prompt` å­—æ®µçš„ä½œç”¨åŠ `mm_inputs`/`mm_enc_dec_inputs` çš„ä½¿ç”¨æ–¹å¼ã€‚  

æ€»ä½“æ¥çœ‹ï¼Œæ­¤æ¬¡é‡æ„æå‡äº†ä»£ç å¤ç”¨ã€å¯è¯»æ€§å’Œå¯¹åŸå§‹æç¤ºçš„ä¿ç•™ï¼Œä½†éœ€ç•™æ„ç±»å‹å…¼å®¹å’Œç¼“å­˜è¡Œä¸ºçš„å›å½’éªŒè¯ã€‚

---

### [CI/Build] Enable tests for recent day-0 new models (#34585)
**SHA**: `91ac5d9` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/91ac5d9bfda99745ece40f5258f17a4c0585db40)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º / è½»é‡é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
- ä¸ºæœ€æ–°çš„ dayâ€‘0 å¤šæ¨¡æ€æ¨¡å‹ï¼ˆ`lfm2_vl`ã€FunASRã€GLMâ€‘OCRã€Internâ€‘S1â€‘Proï¼‰åŠ å…¥æµ‹è¯•è¦†ç›–ï¼Œæ›´æ–° `_ADD_SPECIAL_TOKENS_OVERRIDES` ä¸æ¨¡å‹åœ¨çº¿å¯ç”¨æ ‡è®°ã€‚  
- `InternS1Pro` çš„æ¨¡å‹å®ç°æ”¹ä¸ºå¤ç”¨ `ctx.get_hf_processor`ï¼ˆç»Ÿä¸€è·å– Processorï¼‰ï¼Œå¹¶å°†åŸ `Qwen3VLMoeMixtureOfExperts` é‡å‘½åä¸º `InternS1ProMoeMixtureOfExperts`ï¼Œç›¸åº”ä¿®æ”¹ç»§æ‰¿é“¾ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- `tests/models/multimodal/processing/*`ã€`tests/models/registry.py`ï¼ˆæµ‹è¯•å±‚ï¼‰  
- `vllm/model_executor/models/interns1_pro.py`ï¼ˆæ¨¡å‹æ‰§è¡Œå±‚ï¼‰  
- ä¾èµ–çš„æ¨¡å‹æ³¨å†Œè¡¨ä¸ Processor è·å–é€»è¾‘  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
1. **CI ç¯å¢ƒ**ï¼šæ–°å¢æ¨¡å‹éœ€è¦ç½‘ç»œè®¿é—®å’Œè¶³å¤Ÿç£ç›˜ç©ºé—´ï¼Œç¡®ä¿ CI èƒ½è®¿é—® HuggingFaceã€‚  
2. **Transformer ç‰ˆæœ¬**ï¼šGLMâ€‘OCR éœ€è¦ `transformers>=5.1.0`ï¼Œè¯·åœ¨ CI/è¿è¡Œç¯å¢ƒä¸­å‡çº§ã€‚  
3. **Processor å¤ç”¨**ï¼š`ctx.get_hf_processor` ç°åœ¨è´Ÿè´£ `trust_remote_code` ç­‰å‚æ•°ï¼Œç¡®è®¤ä¸Šä¸‹æ–‡å¯¹è±¡å®ç°ä¿æŒå…¼å®¹ï¼Œé˜²æ­¢æ—§ä»£ç å› ç›´æ¥ `AutoProcessor.from_pretrained` è€Œäº§ç”Ÿé‡å¤ä¸‹è½½æˆ–ç¼“å­˜å†²çªã€‚  
4. **ç±»åå˜æ›´**ï¼š`InternS1ProMoeMixtureOfExperts` æ›¿ä»£äº† `Qwen3VLMoeMixtureOfExperts`ï¼Œè‹¥æœ‰å¤–éƒ¨æ’ä»¶æˆ–æ–‡æ¡£å¼•ç”¨æ—§åï¼Œéœ€è¦åŒæ­¥æ›´æ–°æˆ–ä¿æŒåˆ«åå…¼å®¹ã€‚  
5. **å·²çŸ¥é—®é¢˜**ï¼šå¯¹ `Fun-ASR-Nano-2512-vllm` æš‚æ—¶ `skip`ï¼Œåç»­éœ€å¯¹ `input_features` çš„ç¼“å­˜ä¸€è‡´æ€§åšä¿®å¤ï¼›å…¶ä»–æ¨¡å‹çš„ `skip` è¯´æ˜å·²åœ¨ä»£ç ä¸­æ ‡è®°ï¼Œå»ºè®®åç»­é€æ­¥è§£é™¤ã€‚  

æ€»ä½“æ¥çœ‹ï¼Œæœ¬æ¬¡æäº¤æ‰©å¤§äº†æ¨¡å‹è¦†ç›–é¢ï¼Œæå‡äº†ä»£ç ç»Ÿä¸€æ€§ï¼Œå¯¹ CI å¯é æ€§æœ‰è½»å¾®æå‡ï¼Œä½†éœ€æ³¨æ„ä¾èµ–ç‰ˆæœ¬ä¸ç½‘ç»œèµ„æºçš„åŒæ­¥å‡†å¤‡ã€‚

---

#### ğŸŸ¢ ä½é‡è¦åº¦å˜æ›´ (14)

### [ROCm][CI] Fix plugins test group; updating terratorch and dependencies (#34589)
**SHA**: `03a8770` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/03a8770a6d9ca4fcb7ff24fa5e6c75c25662919c)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šé…ç½®è°ƒæ•´  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ ROCm CI ç¯å¢ƒä¸­æ›´æ–° `requirements/rocm-test.txt`ï¼Œå°† terratorch æ¢æˆ 1.2.2 å¹¶æ–°å¢ `segmentation-models-pytorch`ã€`imagehash` ä»¥æ”¯æŒ Prithvi æµ‹è¯•ï¼›ä»£ç ä¸­æŠŠ `torch.tensor` æ›¿æ¢ä¸º `torch.as_tensor` ä»¥æå‡å…¼å®¹æ€§ã€‚

---

### [Bugfix] Fix ARC touch KeyError for non-ready T1 blocks in kv offload (#34576)
**SHA**: `bc56a1d` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/bc56a1d56e98a747de7a6c0610673cecc681d808)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šä¿®å¤ ARC åœ¨é”®ä¸å­˜åœ¨æˆ–æœªå°±ç»ªçš„ T1 å—ä¸Šè§¦å‘ `KeyError` çš„é—®é¢˜ï¼Œæ”¹ä¸ºåœ¨ T1 ä¸­ä¿æŒè¯¥å—å¹¶æ›´æ–°ä¸ºæœ€è¿‘ä½¿ç”¨ã€‚

---

### Fix call to moe_mk in modelopt MoE modules (required for LoRA) (#34575)
**SHA**: `ec7d9e6` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/ec7d9e67459dd8ca6e2e3e77a40993291cab152c)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šå°† `moe_mk` è°ƒç”¨å‚æ•°æ”¹ä¸ºå…³é”®å­—å½¢å¼ï¼ˆ`hidden_states`, `w1`, `w2` ç­‰ï¼‰ï¼Œä¿®å¤ LoRA å…¼å®¹æ€§ã€‚

---

### [CI] Disable precompiled wheel path in CI image builds (#34606)
**SHA**: `08f8c19` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/08f8c198ae211f0374fed0f0627a9119c457509f)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šé…ç½®è°ƒæ•´  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ CI é•œåƒæ„å»ºè„šæœ¬ `.buildkite/image_build/image_build.sh` ä¸­ï¼Œå°† `VLLM_USE_PRECOMPILED` å›ºå®šä¸º `0` å¹¶æ¸…ç©º `VLLM_MERGE_BASE_COMMIT`ï¼Œä»è€Œç¦ç”¨é¢„ç¼–è¯‘ wheel è·¯å¾„çš„ä½¿ç”¨ã€‚

---

### Bump `lm-eval` version for Transformers v5 compatibility (#33994)
**SHA**: `a21cedf` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/a21cedf4ff1facaee601a635e3c092fe02742290)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæ–‡æ¡£æ›´æ–°/é…ç½®è°ƒæ•´  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šå°†æ‰€æœ‰æ¶‰åŠ `lm-eval` çš„è„šæœ¬ã€CI é…ç½®ã€æ–‡æ¡£å’Œä¾èµ–æ–‡ä»¶ä¸­çš„ç‰ˆæœ¬ä» `0.4.9.2` æ›´æ–°è‡³ `0.4.11`ï¼Œä»¥å…¼å®¹ Transformers v5ã€‚

---

### [CI][Tracing] Fix race condition by adding server readiness check (#34364)
**SHA**: `3ef74cd` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/3ef74cde5d253333e993ea26931956962b6f70db)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `tests/tracing/conftest.py` ä¸­æ–°å¢ `_wait_for_server_ready` è¾…åŠ©å‡½æ•°ï¼Œå¹¶åœ¨ `trace_service` fixture å¯åŠ¨åç­‰å¾… gRPC æœåŠ¡å™¨å°±ç»ªï¼Œä»¥é˜²æ­¢ç«äº‰æ¡ä»¶å¯¼è‡´çš„å´©æºƒã€‚

---

### [Bugfix] Fix Dynamo unexpected keyword argument  (#34320)
**SHA**: `a5ccc85` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/a5ccc85c8c98115981a39b010b36f255e6446e77)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šå…¶ä»–  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šå°† `input_quant_fp8` ä¸­çš„ `**kwargs` æ›¿æ¢ä¸ºæ˜¾å¼å‚æ•° `use_triton: bool = False`ï¼Œç»Ÿä¸€ CUDAã€HIPã€Native å®ç°ï¼Œæ¶ˆé™¤ Dynamo è°ƒç”¨æ—¶çš„æ„å¤–å…³é”®å­—å‚æ•°é”™è¯¯ã€‚

---

### Revert "[Misc] fix qwen3.5 config" (#34610)
**SHA**: `b5475d0` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/b5475d0534421df9eb93a67f046462cdaed43d1d)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šå°† `qwen3_5` ä¸ `qwen3_5_moe` é…ç½®ä¸­ `ignore_keys_at_rope_validation` çš„å€¼ä»é›†åˆ `{}` æ”¹ä¸ºåˆ—è¡¨ `[]`ï¼Œæ¢å¤åŸæ¥çš„æ•°æ®ç»“æ„ï¼Œä»¥åŒ¹é…åç»­ä»£ç æœŸæœ›ã€‚

---

### [Misc] fix qwen3.5 config (#34604)
**SHA**: `9521002` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/9521002f0acef67fa8d5ec61ad6bbdde64cde819)

**å˜æ›´ç±»å‹**ï¼šé…ç½®è°ƒæ•´  
**é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**æ‘˜è¦**ï¼šå°† Qwen3.5 ä¸ Qwen3.5â€‘MoE é…ç½®ä¸­çš„ `ignore_keys_at_rope_validation` ä»åˆ—è¡¨æ”¹ä¸ºé›†åˆï¼Œæå‡é”®æ£€æŸ¥çš„å»é‡å’ŒæŸ¥æ‰¾æ•ˆç‡ã€‚

---

### [CI] Write bake config to temp directory instead of repo root (#34569)
**SHA**: `bb59c90` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/bb59c902480ddb054e7f3f0762b386e0d4e269bd)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šé…ç½®è°ƒæ•´  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `image_build.sh` ä¸­å°† bake é…ç½®æ–‡ä»¶å†™å…¥ä¸´æ—¶ç›®å½•è€Œéä»“åº“æ ¹ç›®å½•ï¼Œé˜²æ­¢å…¶è¢«å¤åˆ¶è¿› Docker é•œåƒå¹¶å¯¼è‡´ä¸‹æ¸¸æ­¥éª¤é‡å¤ä¸Šä¼ ã€‚

---

### [Bugfix] Add method to swap quant_method on FusedMoE to fix LoRA issues (#34453)
**SHA**: `5bff999` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/5bff999d12dd061c102381b0c9c5d364c5953ea2)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„ / Bugfix  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `FusedMoE` å±‚æ–°å¢ `_replace_quant_method` æ–¹æ³•ï¼Œç”¨äºåœ¨ LoRA åœºæ™¯ä¸‹å®‰å…¨æ›¿æ¢ `quant_method`ï¼ˆåŒ…æ‹¬é‡æ–°åˆå§‹åŒ– runnerï¼‰ï¼Œå¹¶åœ¨ `vllm/lora/layers/fused_moe.py` ä¸­æ”¹ç”¨è¯¥æ–¹æ³•ï¼Œè§£å†³äº† LoRA ç›¸å…³çš„é‡åŒ–é”™è¯¯ã€‚

---

### [BugFix] Fix Python 3.13 FlashMLA import error (#34548)
**SHA**: `bb85929` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/bb85929aa6f3790a4fc4eae2b6504c1e0d8e4ffc)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šé…ç½®è°ƒæ•´  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `cmake/external_projects/flashmla.cmake` ä¸­å°† FlashMLA çš„ Git tag ä» `c2afa9câ€¦` æ›´æ–°ä¸º `692917bâ€¦`ï¼Œè§£å†³ Pythonâ€¯3.13 ç¯å¢ƒä¸‹çš„ FlashMLA å¯¼å…¥é”™è¯¯ã€‚

---

### [Doc] Add Mistral-7b-v0.3 model to the batch invariance validated model (#34584)
**SHA**: `5653021` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/56530210944675b6adde20dae1ba6d224f68baf2)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæ–‡æ¡£æ›´æ–°  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `docs/features/batch_invariance.md` ä¸­æ–°å¢ Mistralâ€‘7Bâ€‘v0.3ï¼Œè¡¨æ˜è¯¥æ¨¡å‹å·²é€šè¿‡æ‰¹æ¬¡ä¸å˜æ€§éªŒè¯ã€‚

---

### [CI][Frontend] Return 422 instead of 500 for invalid Anthropic tool_choice (#34590)
**SHA**: `974d829` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/974d829b0532a27d55ac625271a4149225dec5ba)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `AnthropicToolChoice` ä¸­æ–°å¢ `model_validator`ï¼Œå½“ `type` ä¸º `"tool"` æ—¶å¼ºåˆ¶è¦æ±‚ `name`ï¼Œå¦åˆ™æŠ›å‡º 422 é”™è¯¯ï¼›ç›¸åº”æµ‹è¯•ä¸­ä¸º `/v1/messages` æ¥å£æ·»åŠ é•¿è¶…æ—¶æ—¶é—´ã€‚

---


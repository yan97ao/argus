# æ¯æ—¥æ›´æ–°æŠ¥å‘Šï¼ˆ2026-02-19ï¼‰

## vllm-project/vllm

| æäº¤æ—¶é—´ | ä½œè€… | æäº¤ä¿¡æ¯ |
|----------|------|----------|
| 2026-02-19 23:56:14 | Robert Shaw | [Model Bash][DeepSeekR1] Remove Shared Expert Clone (#34344) |
| 2026-02-19 23:55:41 | Eldar KurtiÄ‡ | [Llama4,Quantization] Simplify and generalize logic for Q/K permutations in quantized self-attn layers  (#34471) |
| 2026-02-19 20:13:37 | Linda | [Bugfix] Qwen3.5 kv-scale weight remapping (#34719) |
| 2026-02-19 19:16:58 | Cyrus Leung | [CI/Build] Try to make beam search test less flaky (#34885) |
| 2026-02-19 18:24:30 | Cyrus Leung | [Bugfix] Fix edge case in UUID data parsing (#34884) |
| 2026-02-19 16:25:26 | Andreas Karatzas | [ROCm][Test] Fix beam search determinism failures from batch-size-dependent FP divergence and removed wrong marker (#34878) |
| 2026-02-19 15:53:08 | Andreas Karatzas | [ROCm][CI] Removing all blocking labels from MI355 until stable infra (#34879) |
| 2026-02-19 15:21:47 | Tal Nir | [Voxtral Realtime] Fix engine crash on empty multimodal embeddings (#34862) |
| 2026-02-19 15:20:30 | Wei Zhao | [Bug] Fix DeepSeek V3 weight loading caused by incorrect prefix (#34876) |
| 2026-02-19 15:18:23 | Alex Brooks | [Bugfix] Add Quant Config to Llava Next Projector (#34847) |
| 2026-02-19 15:17:41 | Manrique Vargas | fix(docs): fix typos in comments and docstrings (#34836) |
| 2026-02-19 15:16:41 | Jaeyeon Kim(ê¹€ì¬ì—°) | [Frontend] Fix reasoning_tokens for text-based parsers in Responses API (#33513) |
| 2026-02-19 10:15:27 | Kevin H. Luu | Deprecate test-pipeline.yaml (#34864) |
| 2026-02-19 09:07:37 | Woosuk Kwon | [Model Runner V2] Use FP32 for Gumbel Noise (#34854) |
| 2026-02-19 07:52:50 | Woosuk Kwon | [Model Runner V2] Remove unnecessary copies in PW CUDA graph capture (#34849) |
| 2026-02-19 07:10:19 | rasmith | [CI][AMD][BugFix] Use torch.testing.assert_close instead of assert torch.allclose in test_rocm_skinny_gemms.py (#34181) |
| 2026-02-19 07:03:17 | zhrrr | [Model Runner V2] support piecewise & mixed cudagraph (#32771) |
| 2026-02-19 06:37:14 | Yongye Zhu | [MoE Refactor] Convert mxfp4 marlin into modular kernel format  (#34588) |
| 2026-02-19 06:31:59 | Flora Feng | Fix empty tool_call_id in Anthropic messages API tool result conversion (#34745) |
| 2026-02-19 06:20:10 | Aaron Hao | [BUG] Fixing Weight Sync unit test (#34841) |
| 2026-02-19 05:48:11 | Kyle Sayers | [Docs] Clean up speculators docs (#34065) |
| 2026-02-19 05:22:31 | Cyrus Leung | [Bugfix] Fix lora tests (#34834) |
| 2026-02-19 05:03:24 | Wenlong Wang | [Bugfix][MoE Kernel] Fix incorrect routing selection for models without expert groups (e.g., MiniMax-M2.1) (#34673) |
| 2026-02-19 04:00:40 | rasmith | [CI][AMD][BugFix] Skip tests in test_unquantized_backend_selection that should not run on ROCm (#34655) |
| 2026-02-19 03:04:53 | Woosuk Kwon | [Model Runner V2] Minor simplification for DCP (#34786) |
| 2026-02-19 02:54:54 | Jaden Mathias | [Bugfix] Remove assert causing hipErrorStreamCaptureUnsupported (#34455) |
| 2026-02-19 02:26:24 | Teng Ma | [Misc] Add mooncake-transfer-engine to kv_connectors requirements (#34826) |
| 2026-02-19 01:46:53 | Isotr0py | [Bugfix] Redo Qwen3.5/Qwen3-Next GDN projector fusion (#34697) |
| 2026-02-19 01:39:22 | Michael Goin | [Bugfix] Fix NVFP4 TRTLLM MoE non-gated support; add gsm8k for Nemotron-3-Nano FP8+NVFP4 (#34725) |
| 2026-02-19 00:45:10 | Ilya Markov | [CI][Bugfix] Fix multinode test script (#34820) |
| 2026-02-19 00:32:44 | Robert Shaw | [CI] temporarily disable multi-node tests (#34825) |

### ğŸ“Š ç»Ÿè®¡æ‘˜è¦
> æœ¬æ—¥å…± 31 ä¸ªæäº¤ | ğŸ”´é«˜ 1 | ğŸŸ¡ä¸­ 13 | ğŸŸ¢ä½ 17
## ğŸ“‹ ç›®å½•

- [vllm-project/vllm](#vllm-project-vllm)
  - [ğŸ“Š ç»Ÿè®¡æ‘˜è¦](#-ç»Ÿè®¡æ‘˜è¦)
  - [ğŸ”´ é«˜é‡è¦åº¦å˜æ›´ (1)](#-ğŸ”´-é«˜é‡è¦åº¦å˜æ›´-1)
    - [fix(docs): fix typos in comments and docstrings (#34836)](#ad5aa6b)
  - [ğŸŸ¡ ä¸­é‡è¦åº¦å˜æ›´ (13)](#-ğŸŸ¡-ä¸­é‡è¦åº¦å˜æ›´-13)
    - [[Llama4,Quantization] Simplify and generalize logic for Q...](#ee1d25f)
    - [[ROCm][Test] Fix beam search determinism failures from ba...](#f6220f9)
    - [[ROCm][CI] Removing all blocking labels from MI355 until ...](#2df2bb2)
    - [[Voxtral Realtime] Fix engine crash on empty multimodal e...](#f75b61a)
    - [[Frontend] Fix reasoning_tokens for text-based parsers in...](#9681068)
    - [Deprecate test-pipeline.yaml (#34864)](#b6101d3)
    - [[Model Runner V2] support piecewise & mixed cudagraph (#3...](#11d3976)
    - [[MoE Refactor] Convert mxfp4 marlin into modular kernel f...](#40da962)
    - [[Docs] Clean up speculators docs (#34065)](#64ac139)
    - [[Bugfix] Fix lora tests (#34834)](#61cf087)
    - [[Bugfix][MoE Kernel] Fix incorrect routing selection for ...](#847a57c)
    - [[Model Runner V2] Minor simplification for DCP (#34786)](#95be2a7)
    - [[Bugfix] Redo Qwen3.5/Qwen3-Next GDN projector fusion (#3...](#c0bd8b1)
  - [ğŸŸ¢ ä½é‡è¦åº¦å˜æ›´ (17)](#-ğŸŸ¢-ä½é‡è¦åº¦å˜æ›´-17)
    - [[Model Bash][DeepSeekR1] Remove Shared Expert Clone (#34344)](#4685a63)
    - [[Bugfix] Qwen3.5 kv-scale weight remapping (#34719)](#6fff24f)
    - [[CI/Build] Try to make beam search test less flaky (#34885)](#23210a9)
    - [[Bugfix] Fix edge case in UUID data parsing (#34884)](#1391378)
    - [[Bug] Fix DeepSeek V3 weight loading caused by incorrect ...](#7f51e93)
    - [[Bugfix] Add Quant Config to Llava Next Projector (#34847)](#4611af1)
    - [[Model Runner V2] Use FP32 for Gumbel Noise (#34854)](#5fcb0cd)
    - [[Model Runner V2] Remove unnecessary copies in PW CUDA gr...](#c878b43)
    - [[CI][AMD][BugFix] Use torch.testing.assert_close instead ...](#2b84ac6)
    - [Fix empty tool_call_id in Anthropic messages API tool res...](#8d9babd)
    - [[BUG] Fixing Weight Sync unit test (#34841)](#e99ba95)
    - [[CI][AMD][BugFix] Skip tests in test_unquantized_backend_...](#fcd6ac9)
    - [[Bugfix] Remove assert causing hipErrorStreamCaptureUnsup...](#0e60c92)
    - [[Misc] Add mooncake-transfer-engine to kv_connectors requ...](#d7ff222)
    - [[Bugfix] Fix NVFP4 TRTLLM MoE non-gated support; add gsm8...](#caeb887)
    - [[CI][Bugfix] Fix multinode test script (#34820)](#6b3166a)
    - [[CI] temporarily disable multi-node tests (#34825)](#25e2e13)
#### ğŸ”´ é«˜é‡è¦åº¦å˜æ›´ (1)

### fix(docs): fix typos in comments and docstrings (#34836)
**SHA**: `ad5aa6b` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/ad5aa6bd9f4394cf48d794ac09bfff911170b557)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæ–‡æ¡£ä¿®æ­£ / è½»é‡çº§ Bug ä¿®å¤  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ ä½  
**ğŸ“‹ å˜æ›´æ‘˜è¦**ï¼šæœ¬æ¬¡æäº¤å¯¹è‹¥å¹²æ ¸å¿ƒæ¨¡å—çš„æ³¨é‡Šå’Œ docstring ä¸­çš„æ‹¼å†™é”™è¯¯ã€ç”¨è¯ä¸å‡†ä»¥åŠæ ‡ç‚¹é”™è¯¯è¿›è¡Œä¿®æ­£ï¼Œæå‡äº†ä»£ç å¯è¯»æ€§ä¸ç”Ÿæˆæ–‡æ¡£çš„å‡†ç¡®æ€§ã€‚æ— ä»»ä½•ä¸šåŠ¡é€»è¾‘æˆ–è¿è¡Œæ—¶è¡Œä¸ºçš„æ”¹åŠ¨ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**ï¼š  
- `vllm/compilation/backends.py`ï¼ˆç¼–è¯‘åç«¯ï¼‰  
- `vllm/model_executor/layers/fused_moe/oracle/fp8.py`ï¼ˆFP8 é‡åŒ–é…ç½®ï¼‰  
- `vllm/model_executor/layers/fused_moe/runner/default_moe_runner.py`ï¼ˆé»˜è®¤ MoE è¿è¡Œå™¨ï¼‰  
- `vllm/model_executor/models/gpt_oss.py`ï¼ˆGPTâ€‘OSS MoE æƒé‡è§£æï¼‰  
- `vllm/utils/torch_utils.py`ï¼ˆCUDA æµå·¥å…·ï¼‰  

**ğŸ” æŠ€æœ¯æ´å¯Ÿ**ï¼š  
- **æ¶æ„å½±å“**ï¼šæ— ã€‚æ›´æ”¹ä»…é™äºæ–‡æ¡£å±‚é¢ï¼Œä¸æ¶‰åŠç±»ã€å‡½æ•°ç­¾åæˆ–è°ƒç”¨å›¾ã€‚  
- **æ€§èƒ½å½±å“**ï¼šæ— ã€‚æ³¨é‡Š/å­—ç¬¦ä¸²åœ¨è¿è¡Œæ—¶ä»…ä½œä¸ºå¸¸é‡å­˜å‚¨ï¼Œå¯¹æ‰§è¡Œè·¯å¾„ã€å†…å­˜å ç”¨æˆ–ç®—å­è°ƒåº¦æ²¡æœ‰ä»»ä½•å½±å“ã€‚  
- **å®‰å…¨è€ƒè™‘**ï¼šæ— ã€‚æœªä¿®æ”¹ä¸šåŠ¡é€»è¾‘ã€æƒé™æ ¡éªŒæˆ–è¾“å…¥è¾“å‡ºå¤„ç†ï¼Œäº¦æœªå¼•å…¥æ–°çš„ä¾èµ–æˆ–å¤–éƒ¨è°ƒç”¨ã€‚  

**âš ï¸ æ½œåœ¨é£é™©**ï¼š  
- **è¯¯åˆ ä»£ç **ï¼šåœ¨ç¼–è¾‘æ³¨é‡Šæ—¶è‹¥è¯¯åˆ äº†å®é™…ä»£ç è¡Œæˆ–ç¼©è¿›ï¼Œä¼šå¯¼è‡´è¯­æ³•é”™è¯¯æˆ–è¿è¡Œæ—¶å¼‚å¸¸ã€‚å½“å‰ diff åªæ¶‰åŠå•è¡Œæ–‡å­—æ›¿æ¢ï¼Œé£é™©æä½ã€‚  
- **æ–‡æ¡£ç”Ÿæˆ**ï¼šè‹¥é¡¹ç›®ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·ï¼ˆå¦‚ Sphinxï¼‰ç”Ÿæˆ API æ–‡æ¡£ï¼Œæ‹¼å†™é”™è¯¯çš„æ›´æ­£å¯èƒ½å¯¼è‡´å·²å‘å¸ƒæ–‡æ¡£çš„ URL/é”šç‚¹å˜åŒ–ï¼Œéœ€ç¡®è®¤å¯¹åº”é“¾æ¥ä»æœ‰æ•ˆã€‚  

**ğŸ’¡ å…³æ³¨å»ºè®®**ï¼š  
1. **CI æ£€æŸ¥**ï¼šç¡®ä¿æäº¤å CI ä¸­çš„æ–‡æ¡£æ„å»ºä»é€šè¿‡ï¼Œé˜²æ­¢å› æ‹¼å†™æ›´æ­£å¯¼è‡´çš„é“¾æ¥å¤±æ•ˆã€‚  
2. **å›å½’æµ‹è¯•**ï¼šè™½ç„¶æœ¬æ¬¡æ”¹åŠ¨ä¸å½±å“åŠŸèƒ½ï¼Œä½†å»ºè®®è¿è¡Œå®Œæ•´å•å…ƒ/é›†æˆæµ‹è¯•ï¼Œä»¥éªŒè¯æ²¡æœ‰æ„å¤–çš„è¯­æ³•æˆ–å¯¼å…¥é”™è¯¯ã€‚  
3. **ä»£ç å®¡é˜…**ï¼šåç»­ PR è‹¥æ¶‰åŠæ–‡æ¡£ä¿®æ”¹ï¼Œå»ºè®®ä½¿ç”¨æ‹¼å†™æ£€æŸ¥å·¥å…·ï¼ˆå¦‚ `codespell`ã€`cspell`ï¼‰è‡ªåŠ¨æ•è·æ­¤ç±»é”™è¯¯ï¼Œé™ä½äººä¸ºç–æ¼ã€‚  
4. **æ›´æ–°å‘å¸ƒè¯´æ˜**ï¼šè‹¥é¡¹ç›®å‘å¸ƒå‘è¡Œè¯´æ˜ï¼Œç®€è¦åœ¨ â€œæ–‡æ¡£æ”¹è¿›â€ æˆ– â€œå°å¹…ä¿®å¤â€ ä¸­æ ‡è®°æ­¤æäº¤ï¼Œä»¥ä¾¿ç”¨æˆ·äº†è§£æ–‡æ¡£å·²æ›´æ­£ã€‚  

---  
æœ¬æ¬¡ä¿®æ”¹å±äºä½é£é™©çš„å¯ç»´æŠ¤æ€§æå‡ï¼Œå»ºè®®å¿«é€Ÿåˆå¹¶ä»¥æé«˜ä»£ç åº“çš„å¯è¯»æ€§å’Œæ–‡æ¡£è´¨é‡ã€‚

---

#### ğŸŸ¡ ä¸­é‡è¦åº¦å˜æ›´ (13)

### [Llama4,Quantization] Simplify and generalize logic for Q/K permutations in quantized self-attn layers  (#34471)
**SHA**: `ee1d25f` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/ee1d25f199ee76079e761b34e865e13b40ffdbe6)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º / é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
åœ¨ `vllm/model_executor/models/llama4.py` ä¸­å¯¹é‡åŒ–è‡ªæ³¨æ„åŠ›å±‚çš„ Q/K æƒé‡æ—‹è½¬ï¼ˆrotaryï¼‰é¢„å¤„ç†é€»è¾‘è¿›è¡Œäº†ä¸€æ¬¡å¤§å¹…ç®€åŒ–ä¸é€šç”¨åŒ–ã€‚åŸå®ç°é’ˆå¯¹ä¸åŒé‡åŒ–æ ¼å¼ï¼ˆNVâ€‘FP4ã€Compressedâ€‘Tensors çš„ int8/float8ï¼‰åˆ†åˆ«å†™äº†åˆ†æ”¯ï¼Œå¹¶æ‰‹åŠ¨æ¨å¯¼ `attn_in/attn_out`ï¼›æ–°å®ç°ç»Ÿä¸€ä¸ºï¼š

1. é€šè¿‡ `modules` åˆ¤æ–­æ˜¯å¦ä¸º Q/K æŠ•å°„æˆ–å¯¹åº”çš„ `weight/weight_scale`ï¼›  
2. å¯¹ 1â€‘ç»´æ ‡é‡å°ºåº¦åšä¸€æ¬¡ `unsqueeze` å…¼å®¹ï¼›  
3. æŒ‰ `head_dim` ä¸ `head` æ•°ç›®ç›´æ¥ reshape â†’ transpose â†’ reshapeï¼Œå®Œæˆ 2â€‘å€é€šé“çš„äº¤é”™æ¢å¤ï¼›  
4. åªåœ¨éœ€è¦æ—¶ï¼ˆå¤šé€šé“ã€é perâ€‘tensorï¼‰è¿›è¡Œå°ºåº¦çš„ permuteï¼Œé¿å…å¯¹ perâ€‘block é‡åŒ–ï¼ˆå¦‚ DeepSeek 128Ã—128ï¼‰è¿›è¡Œä¸å¯èƒ½çš„å˜æ¢ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- `vllm/model_executor/models/llama4.py`ï¼ˆLlamaâ€‘4 æ¨¡å‹åŠ è½½åŠæƒé‡æ•´ç†ï¼‰  
- ä¾èµ– `permute_qk_weight_for_rotary` çš„é‡åŒ– selfâ€‘attention å®ç°ï¼ˆåŒ…æ‹¬ NVâ€‘FP4ã€Compressedâ€‘Tensorsã€GPTQ ç­‰å¤šç§é‡åŒ–æ–¹æ¡ˆï¼‰  

**ğŸ’¡ å…³æ³¨å»ºè®®**  

| å»ºè®® | è¯´æ˜ |
|------|------|
|**å…¼å®¹æ€§æµ‹è¯•**|ç¡®è®¤åœ¨å·²æœ‰çš„ checkpointï¼ˆmodeloptã€compressedâ€‘tensorsï¼‰ä¸ŠåŠ è½½å Q/K æ—‹è½¬ç»“æœä¸æ—§å®ç°ä¿æŒæ•°å€¼ä¸€è‡´ï¼Œå°¤å…¶æ˜¯ perâ€‘tensorã€perâ€‘groupã€perâ€‘channel é‡åŒ–ã€‚|
|**perâ€‘block é‡åŒ–æç¤º**|æ–‡æ¡£æˆ–æ—¥å¿—ä¸­æé†’ç”¨æˆ·ï¼šå¯¹ perâ€‘blockï¼ˆDeepSeekâ€‘styleï¼‰é‡åŒ–çš„ Q/K æŠ•å°„ä¸æ”¯æŒæ—‹è½¬ï¼Œå»ºè®®å…³é—­è¯¥æŠ•å°„çš„é‡åŒ–æˆ–ä½¿ç”¨éå—åŒ–æ–¹æ¡ˆã€‚|
|**å°ºåº¦ç»´åº¦æ£€æŸ¥**|å½“å‰å®ç°å¯¹ `weight_scale` åªåœ¨ `numel()>1` æ—¶åš permuteï¼Œç¡®ä¿ä¸ä¼šè¯¯å¤„ç† perâ€‘tensor æ ‡é‡å°ºåº¦ã€‚å»ºè®®åœ¨å•å…ƒæµ‹è¯•ä¸­åŠ å…¥æ­¤åˆ†æ”¯çš„éªŒè¯ã€‚|
|**ä»£ç å¯è¯»æ€§**|è™½ç„¶å·²åˆ é™¤å†—ä½™åˆ†æ”¯ï¼Œä½† `view(...).transpose(...).reshape(...)` çš„ç»´åº¦å«ä¹‰ä»ç„¶ä¸ç›´è§‚ï¼Œå¯åœ¨æ³¨é‡Šä¸­åŠ å…¥ `attn_in = head_dim * n_heads`ã€`attn_out = hidden_size` çš„è§£é‡Šï¼Œä¾¿äºåç»­ç»´æŠ¤ã€‚|
|**å›é€€è·¯å¾„**|è‹¥æœªæ¥å‡ºç°å…¶å®ƒè‡ªå®šä¹‰é‡åŒ–æ ¼å¼ï¼ˆå¦‚æ–°å‹ç¼©æ ¼å¼ï¼‰ï¼Œä¿æŒ `permute_qk_weight_for_rotary` ä¸ºå¯æ‰©å±•å…¥å£ï¼Œè€Œéç¡¬ç¼–ç  `f_out // n_heads // 2` çš„å‡è®¾ã€‚|

æ€»ä½“æ¥çœ‹ï¼Œæ­¤æ¬¡æ”¹åŠ¨æå‡äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ä¸é‡åŒ–æ ¼å¼çš„ç»Ÿä¸€æ”¯æŒï¼Œé£é™©ä¸»è¦åœ¨äºä¸åŒé‡åŒ– checkpoint çš„å…¼å®¹æ€§ï¼Œéœ€è¦é€šè¿‡å›å½’æµ‹è¯•ç¡®ä¿æ•°å€¼ä¸€è‡´æ€§ã€‚å¯¹ä½¿ç”¨è€…çš„å½±å“å±€é™äº Llamaâ€‘4 ä»¥åŠåŒç±»æ¨¡å‹çš„åŠ è½½é˜¶æ®µï¼Œä¸ä¼šå½±å“è¿è¡Œæ—¶æ¨ç†æ€§èƒ½ã€‚

---

### [ROCm][Test] Fix beam search determinism failures from batch-size-dependent FP divergence and removed wrong marker (#34878)
**SHA**: `f6220f9` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/f6220f98779463705e578562f307b2becea8b8b3)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šBug ä¿®å¤ / åŠŸèƒ½å¢å¼º  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
æœ¬æ¬¡æäº¤é’ˆå¯¹ ROCm ç¯å¢ƒä¸‹çš„ **beam search** å¤±å»ç¡®å®šæ€§çš„å¼‚å¸¸è¿›è¡Œä¿®å¤ã€‚ç”±äº ROCm ä¸Šæ³¨æ„åŠ›å’Œ GEMM æ ¸å¿ƒçš„æµ®ç‚¹å½’çº¦éç»“åˆæ€§ï¼Œç»“æœä¼šéš batch å¤§å°è€Œæ¼‚ç§»ã€‚é€šè¿‡åœ¨æµ‹è¯•ä¸­å¯¹ `vllm_runner` æ·»åŠ ä¸€ç»„å¼ºåˆ¶ deterministic çš„ engine å‚æ•°ï¼ˆå…³é—­å¼‚æ­¥è°ƒåº¦ã€å¼ºåˆ¶ eagerã€ç¦ç”¨å‰ç¼€ç¼“å­˜ã€å›ºå®š `max_num_seqs=1`ï¼‰ï¼Œå¹¶åœ¨ ROCm å¹³å°ä¸Šæ˜¾å¼å…³é—­ skinnyâ€‘gemm (`VLLM_ROCM_USE_SKINNY_GEMM=0`)ã€‚åŒæ—¶æ›´æ–° CI é…ç½®æ–‡ä»¶ï¼Œå»é™¤ `-m` æ ‡è®°çš„å†—ä½™å‚æ•°ã€‚

**ğŸ¯ å½±å“èŒƒå›´**  
- `vllm/platforms/current_platform.py`ï¼ˆå¹³å°æ£€æµ‹ï¼‰  
- `vllm/engine` å¯åŠ¨å‚æ•°ï¼ˆ`async_scheduling`, `enforce_eager`, `enable_prefix_caching`, `max_num_seqs`ï¼‰  
- æµ‹è¯•å¥—ä»¶ `tests/samplers/test_beam_search.py`ï¼ˆæ‰€æœ‰ beamâ€‘search ç›¸å…³æµ‹è¯•ï¼‰  
- Buildkite CI é…ç½® `.buildkite/*.yaml`ï¼ˆpytest è°ƒç”¨æ–¹å¼çš„å¾®è°ƒï¼‰  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
1. **æ€§èƒ½å½±å“**ï¼šä¸Šè¿° deterministic å‚æ•°ä¼šæ˜¾è‘—é™ä½ååé‡ï¼ˆå…³é—­å¼‚æ­¥è°ƒåº¦ã€å¼ºåˆ¶ eagerã€é™åˆ¶ batch å¤§å°ï¼‰ã€‚è¯·ç¡®ä¿ä»…åœ¨éœ€è¦ç¡®å®šæ€§éªŒè¯çš„ CI/å•å…ƒæµ‹è¯•ä¸­ä½¿ç”¨ï¼Œç”Ÿäº§éƒ¨ç½²ä»ä¿æŒé»˜è®¤é«˜æ€§èƒ½é…ç½®ã€‚  
2. **ç¯å¢ƒå˜é‡**ï¼š`VLLM_ROCM_USE_SKINNY_GEMM=0` åªåœ¨æµ‹è¯•é‡Œè®¾ç½®ï¼Œè‹¥åç»­æœ‰äººåœ¨éƒ¨ç½²æ—¶æ‰‹åŠ¨è®¾ç½®è¯¥å˜é‡ï¼Œå¯èƒ½å¯¼è‡´æ„å¤–çš„æ€§èƒ½å›é€€ã€‚å»ºè®®åœ¨æ–‡æ¡£ä¸­è¯´æ˜è¯¥å˜é‡çš„ä½œç”¨èŒƒå›´ã€‚  
3. **å¹³å°æ£€æµ‹**ï¼š`current_platform.is_rocm()` çš„åˆ¤æ–­å¿…é¡»åœ¨æ‰€æœ‰å…¥å£ç‚¹ä¿æŒä¸€è‡´ï¼Œé¿å…åœ¨å…¶ä»–å­æ¨¡å—è¯¯ç”¨ `EXTRA_ENGINE_KWARGS`ã€‚å¯è€ƒè™‘å°†å…¶å°è£…ä¸º `get_deterministic_kwargs()`ï¼Œç»Ÿä¸€è¿”å›ç©º dict æˆ–ä¸Šè¿°é…ç½®ã€‚  
4. **å›å½’é˜²æŠ¤**ï¼šæ–°å¢çš„ deterministic å‚æ•°åº”åœ¨ç°æœ‰çš„é ROCm æµ‹è¯•ä¸­ä¿æŒé€æ˜ï¼ˆè¿”å›ç©º dictï¼‰ï¼Œé˜²æ­¢å› ä»£ç è·¯å¾„åˆ†æ”¯å¯¼è‡´éšè—é”™è¯¯ã€‚å»ºè®®å¢åŠ ä¸€ä¸ªé’ˆå¯¹ `is_rocm=False` çš„å¿«é€Ÿå•å…ƒæµ‹è¯•ï¼Œç¡®ä¿ `EXTRA_ENGINE_KWARGS` ä¸º `{}`ã€‚  
5. **CI å˜æ›´**ï¼š`.buildkite` ä¸­çš„ `-m samplers` åˆ é™¤ä»…æ˜¯æ ¼å¼ä¿®æ­£ï¼Œå½±å“ä¸å¤§ã€‚ä½†è¯·ç¡®è®¤æ‰€æœ‰ CI æ­¥éª¤ä»èƒ½æ­£ç¡®è¿‡æ»¤æ ‡è®°ï¼Œä»¥å…é—æ¼å…¶ä»–ç±»åˆ«çš„æµ‹è¯•ã€‚  

æ€»ä½“æ¥è¯´ï¼Œæ­¤æ¬¡ä¿®æ”¹æ¢å¤äº† ROCm ä¸Š beamâ€‘search çš„å¯å¤ç°æ€§ï¼Œä»£ç æ”¹åŠ¨å±€é™åœ¨æµ‹è¯•å±‚é¢ï¼Œé£é™©å¯æ§ã€‚åç»­è‹¥è®¡åˆ’åœ¨ ROCm ç”Ÿäº§ç¯å¢ƒæä¾›ç¡®å®šæ€§é€‰é¡¹ï¼Œå»ºè®®å°†è¿™äº›å‚æ•°æŠ½è±¡ä¸ºç”¨æˆ·å¯é…ç½®çš„ `deterministic=True` æ ‡å¿—ã€‚

---

### [ROCm][CI] Removing all blocking labels from MI355 until stable infra (#34879)
**SHA**: `2df2bb2` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/2df2bb27b0fd624d8abd0fda3f8c337f1e8c60fc)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šå…¶ä»–ï¼ˆCI é…ç½®è°ƒæ•´ï¼‰  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  
**ğŸ“‹ å˜æ›´æ‘˜è¦**ï¼šåœ¨ `.buildkite/test-amd.yaml` ä¸­å°†å¤§é‡ `grade: Blocking`ï¼ˆé˜»æ–­ï¼‰æ ‡ç­¾å…¨éƒ¨åˆ å»ï¼Œå¹¶ç§»é™¤äº†ä»…ç”¨äº PR å¼€å‘é˜¶æ®µçš„ **Custom Models Test**ã€‚è¿™ä½¿å¾—åŸæœ¬ä¸€æ—¦å¤±è´¥å³é˜»æ­¢ PR åˆå¹¶çš„ AMD (MI355) æµ‹è¯•å…¨éƒ¨è½¬ä¸ºéé˜»æ–­ï¼ˆæˆ–å¯é€‰ï¼‰çŠ¶æ€ï¼Œæ¢å¤äº† CI çš„ â€œå®½å®¹â€ è¿è¡Œæ–¹å¼ï¼Œç›´è‡³åŸºç¡€è®¾æ–½ç¨³å®šã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- **CI/CD æµæ°´çº¿**ï¼šæ‰€æœ‰åŸºäº AMD GPUï¼ˆmi355 ç³»åˆ—ï¼‰çš„æµ‹è¯•æ­¥éª¤ï¼ŒåŒ…æ‹¬é‡åŒ–ã€æ¨¡å‹ã€æ ¸å‡½æ•°ã€åˆ†å¸ƒå¼ã€å¤šæ¨¡æ€ã€benchmarkã€EPLBã€V1ã€LMâ€‘Evalã€DeepSeekã€Qwen3 ç­‰ã€‚  
- **æ„å»ºé•œåƒ**ï¼š`mirror_hardwares` åˆ—è¡¨ä¿æŒä¸å˜ï¼Œä»…å»æ‰äº†é˜»æ–­ç­‰çº§ã€‚  
- **å¼€å‘è€…å·¥ä½œæµ**ï¼šPR åˆå¹¶ä¸å†å› è¿™äº› AMD æµ‹è¯•çš„å¤±è´¥è¢«å¼ºåˆ¶é˜»æ­¢ï¼Œå¯èƒ½å¯¼è‡´ä¸æ˜“å‘ç°çš„å›å½’ã€‚  

**ğŸ’¡ å…³æ³¨å»ºè®®**  

1. **ç›‘æ§æµ‹è¯•å¥åº·**  
   - å…³é—­é˜»æ–­åï¼Œåº”åœ¨ä»ªè¡¨ç›˜æˆ–é‚®ä»¶ä¸­æ˜¾å¼å…³æ³¨è¿™äº›æµ‹è¯•çš„å¤±æ•ˆç‡ï¼Œé˜²æ­¢é•¿æœŸå¿½è§†å¯¼è‡´ä»£ç è´¨é‡ä¸‹é™ã€‚  
   - è€ƒè™‘åœ¨ PR æ£€æŸ¥é¡µé¢å±•ç¤º â€œéé˜»æ–­å¤±è´¥æ•°â€ ç»Ÿè®¡ï¼Œä»¥æé†’ç»´æŠ¤è€…ã€‚  

2. **é€æ­¥æ¢å¤é˜»æ–­**  
   - å½“ MI355 åŸºç¡€è®¾æ–½ï¼ˆé©±åŠ¨ã€ROCm ç‰ˆæœ¬ã€ç¡¬ä»¶ï¼‰ç¨³å®šåï¼Œå¯é€æ­¥ä¸ºå…³é”®é“¾è·¯ï¼ˆå¦‚é‡åŒ–ã€åˆ†å¸ƒå¼ã€æ ¸å¿ƒ kernelsï¼‰é‡æ–°åŠ ä¸Š `grade: Blocking`ï¼Œé˜²æ­¢å› åŸºç¡€è®¾æ–½æ³¢åŠ¨å¸¦æ¥ä¸å¯æ¥å—çš„å›å½’ã€‚  

3. **æ–‡æ¡£åŒæ­¥**  
   - æ›´æ–°é¡¹ç›®çš„ CI è¯´æ˜ï¼ˆREADME / CONTRIBUTINGï¼‰ä»¥åŠå†…éƒ¨ Wikiï¼Œè¯´æ˜ç›®å‰ AMD æµ‹è¯•å·²è½¬ä¸ºéé˜»æ–­ï¼Œå¹¶æ³¨æ˜æ¢å¤é˜»æ–­çš„æ—¶é—´è¡¨æˆ–æ¡ä»¶ã€‚  

4. **CI èµ„æºåˆ©ç”¨**  
   - ç”±äºé˜»æ–­æ ‡ç­¾è¢«ç§»é™¤ï¼Œå¤±è´¥çš„æ­¥éª¤ä»ä¼šå ç”¨ CI èµ„æºã€‚è‹¥é¢‘ç¹å¤±è´¥ï¼Œå¯è€ƒè™‘å°†å…¶è®¾ä¸º `optional: true` æˆ–ä½¿ç”¨ `soft_fail`ï¼Œè¿›ä¸€æ­¥é™ä½èµ„æºæµªè´¹ã€‚  

5. **å›å½’æ£€æµ‹**  
   - åœ¨ä¸»è¦çš„ Linux / CUDA CI ä¸­ä¿ç•™ç›¸åŒæµ‹è¯•çš„é˜»æ–­çº§åˆ«ï¼Œç¡®ä¿æ ¸å¿ƒåŠŸèƒ½ä»åœ¨å…¶å®ƒå¹³å°ä¸Šå—åˆ°ä¸¥æ ¼ç›‘ç®¡ã€‚  

6. **è‡ªå®šä¹‰æ¨¡å‹æµ‹è¯•**  
   - å·²åˆ é™¤çš„ â€œCustom Models Testâ€ åœ¨ PR å¼€å‘æœŸé—´ä»å¯æ‰‹åŠ¨æ·»åŠ ã€‚å»ºè®®åœ¨è´¡çŒ®æŒ‡å—ä¸­æé†’å¼€å‘è€…ï¼š**ä¸è¦åœ¨åˆå¹¶å‰ç•™ä¸‹ä¸´æ—¶æµ‹è¯•æ­¥éª¤**ï¼Œå¹¶æä¾›å¿«é€Ÿçš„æœ¬åœ°è¿è¡Œè„šæœ¬ä»¥ä¾¿è°ƒè¯•ã€‚  

æ•´ä½“æ¥çœ‹ï¼Œæ­¤æ¬¡æ”¹åŠ¨ä¸»è¦æ˜¯å¯¹ AMD æµ‹è¯•çš„å®¹é”™æ€§è¿›è¡Œæ”¾å®½ï¼Œå±äºå¯¹ CI ç¨³å®šæ€§çš„ä¸´æ—¶è°ƒèŠ‚ã€‚åŠ¡å¿…é…åˆç›¸åº”çš„ç›‘æ§å’Œæ–‡æ¡£æ›´æ–°ï¼Œä»¥å…å› éé˜»æ–­å¤±æ•ˆå¯¼è‡´éšè—çš„å›å½’ã€‚

---

### [Voxtral Realtime] Fix engine crash on empty multimodal embeddings (#34862)
**SHA**: `f75b61a` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/f75b61a9e9dfc15d7821b35b1f88f9482805202a)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šBug ä¿®å¤  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­ï¼ˆä¿®å¤å¯¼è‡´æ•´ä¸ªå¼•æ“æŒ‚æ‰çš„è‡´å‘½å›æ»šï¼‰  
**ğŸ“‹ å˜æ›´æ‘˜è¦**ï¼š  
- åœ¨ `voxtral_realtime.py` ä¸­ï¼ŒåŸå…ˆå¯¹å®æ—¶æ¨¡å‹çš„å¤šæ¨¡æ€åµŒå…¥åšäº†å¼ºæ–­è¨€ï¼Œè‹¥è¾“å…¥ä¸ºç©ºä¼šæŠ› `AssertionError`ï¼Œå¯¼è‡´æœåŠ¡è¿›ç¨‹å´©æºƒã€‚  
- ç°åœ¨æ”¹ä¸ºåœ¨åµŒå…¥ç¼ºå¤±æ—¶è¿”å›å…¨é›¶å¼ é‡æˆ–ç©ºåˆ—è¡¨ï¼Œå¹¶è®°å½•è­¦å‘Šæ—¥å¿—ï¼Œç¡®ä¿å¼•æ“ç»§ç»­è¿è¡Œã€‚  
- æ–°å¢å¯¹åº”çš„å›å½’æµ‹è¯• `test_empty_commit_does_not_crash_engine`ï¼ŒéªŒè¯ç©ºæäº¤ä¸ä¼šè®©å¼•æ“å®•æœºï¼Œå¹¶ä¸”åç»­æ­£å¸¸è¯·æ±‚ä»èƒ½å¾—åˆ°å“åº”ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**ï¼š  
- `vllm/model_executor/models/voxtral_realtime.py`ï¼ˆå®æ—¶æ¨¡å‹åµŒå…¥è·¯å¾„ï¼‰  
- `tests/entrypoints/openai/test_realtime_validation.py`ï¼ˆæ–°å¢å›å½’æµ‹è¯•ï¼‰  

**ğŸ’¡ å…³æ³¨å»ºè®®**ï¼š  
1. **æ€§èƒ½å½±å“**ï¼šè¿”å›å…¨é›¶åµŒå…¥ä¼šè®© decoder åœ¨è¯¥æ­¥äº§ç”Ÿæ— æ„ä¹‰è¾“å‡ºï¼Œå»ºè®®åœ¨ä¸Šå±‚ä¸šåŠ¡æ•è·å¹¶è½¬åŒ–ä¸º â€œæ— éŸ³é¢‘â€ é”™è¯¯æˆ–ç©ºè½¬å½•ï¼Œè€Œä¸æ˜¯ç›´æ¥è¿”å›ã€‚  
2. **æ—¥å¿—ç›‘æ§**ï¼šæ–°å¢çš„ `logger.warning` é¢‘ç¹è§¦å‘æ—¶å¯èƒ½æ©ç›–çœŸæ­£çš„éŸ³é¢‘ç¼ºå¤±å¼‚å¸¸ï¼Œå»ºè®®åœ¨ç›‘æ§å¹³å°ä¸ºè¯¥æ—¥å¿—è®¾ç½®é˜ˆå€¼æŠ¥è­¦ã€‚  
3. **æ–‡æ¡£æ›´æ–°**ï¼šåœ¨å®æ—¶ API æ–‡æ¡£ä¸­è¯´æ˜ â€œç©ºéŸ³é¢‘æäº¤â€ çš„åˆæ³•è¡Œä¸ºåŠè¿”å›ç»“æœï¼Œé¿å…ç”¨æˆ·è¯¯è§£ã€‚  
4. **å…¼å®¹æ€§**ï¼šæ­¤æ”¹åŠ¨å¯¹éå®æ—¶æ¨¡å‹æ— å½±å“ï¼Œä½†è¯·ç¡®è®¤ `audio_config` ä¸­çš„ `block_pool_size` ä¸æ¨¡å‹å®é™…ç»´åº¦åŒ¹é…ï¼Œé˜²æ­¢ç»´åº¦ä¸åŒ¹é…å¯¼è‡´åç»­ `RuntimeError`ã€‚  

æ•´ä½“æ¥çœ‹ï¼Œæœ¬æ¬¡ä¿®æ”¹ç¨³å¦¥åœ°æŠŠè‡´å‘½æ–­è¨€æ”¹ä¸ºå®¹é”™è¿”å›ï¼Œæå‡äº†æœåŠ¡å¯ç”¨æ€§ï¼›åŒæ—¶é…å¥—çš„å›å½’æµ‹è¯•ç¡®ä¿ä¿®å¤ä¸å¼•å…¥æ–° regressionsã€‚åç»­å¯å…³æ³¨é›¶åµŒå…¥äº§ç”Ÿçš„æ— æ•ˆ token æ˜¯å¦éœ€è¦åœ¨è°ƒåº¦å±‚ç›´æ¥è¿‡æ»¤ã€‚

---

### [Frontend] Fix reasoning_tokens for text-based parsers in Responses API (#33513)
**SHA**: `9681068` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/9681068cf995af3cf651f1150fbabd8604537660)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼ºï¼ˆä¸ºæ–‡æœ¬å‹ reasoning è§£æå™¨è¡¥å…¨ `reasoning_tokens` ç»Ÿè®¡ï¼‰  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
1. åœ¨ `ResponseUsage` ä¸­è¡¥å…¨ `reasoning_tokens` çš„æ¥æºï¼š  
   - `SimpleContext/ParsableContext` é€šè¿‡ `_accumulated_token_ids` æ”¶é›†è¾“å‡º tokenï¼Œä½¿ç”¨å¯¹åº”çš„ `reasoning_parser` è®¡ç®— reasoning token æ•°ã€‚  
   - ä¸ºæŠ½è±¡ç±» `AbsReasoningParser` æ–°å¢ `count_reasoning_tokens` é»˜è®¤å®ç°ï¼Œ`ThinkingReasoningParser` å®ç°å®é™…è®¡æ•°ï¼ˆæ”¯æŒåµŒå¥—ï¼‰ã€‚  
2. ç›¸å…³å•å…ƒæµ‹è¯•è¡¥å…¨ï¼šæµå¼/éæµå¼ã€æ–‡æœ¬ reasoning æ¨¡å‹å‡åº”è¿”å› `reasoning_tokens > 0`ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- `vllm/entrypoints/openai/responses/context.py`ã€`serving.py`  
- `vllm/reasoning/abs_reasoning_parsers.py`ã€`basic_parsers.py`  
- æµ‹è¯•ç›®å½• `tests/entrypoints/openai/...`ã€`tests/reasoning/...`  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
- ç¡®è®¤ `SimpleContext._accumulated_token_ids` åœ¨æ¯æ¬¡è¯·æ±‚ç»“æŸåè¢«æ¸…ç©ºï¼Œé˜²æ­¢è·¨è¯·æ±‚æ®‹ç•™ã€‚  
- `responses_full_generator` ä¸­å¯¹ `self.parser.reasoning_parser_cls` çš„åˆ¤ç©ºé€»è¾‘åº”ä¿æŒä¸ HarmonyContext çš„å…¼å®¹ï¼Œé¿å…åœ¨æœªå¯ç”¨ parser æ—¶è¯¯è°ƒç”¨ã€‚  
- æ–°å¢ `count_reasoning_tokens` çš„é»˜è®¤è¿”å› 0ï¼Œç¡®ä¿ç°æœ‰éæ–‡æœ¬ parser ä¸å—å½±å“ï¼›è‹¥åç»­åŠ å…¥æ–°çš„ parserï¼Œè®°å¾—å®ç°è¯¥æ–¹æ³•ã€‚  
- è¯¥ç»Ÿè®¡ä»…åœ¨æ–‡æœ¬æ€è€ƒæ ‡è®°ï¼ˆå¦‚ `<think>...</think>`ï¼‰å­˜åœ¨æ—¶ç”Ÿæ•ˆï¼Œå»ºè®®åœ¨æ¨¡å‹é…ç½®æˆ–æ–‡æ¡£ä¸­æ˜ç¡®è¯¥å‰ç½®æ¡ä»¶ã€‚  
- ç”±äºé¢å¤–æ”¶é›† token ID ä¼šç•¥å¢å†…å­˜å ç”¨ï¼Œå»ºè®®åœ¨é«˜å¹¶å‘åœºæ™¯ç›‘æ§å†…å­˜å¢é•¿ã€‚  

æ•´ä½“æ”¹åŠ¨èšç„¦åœ¨ç»Ÿä¸€ `reasoning_tokens` ç»Ÿè®¡ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œæ–°å¢æµ‹è¯•è¦†ç›–å…³é”®è·¯å¾„ï¼Œå»ºè®®åœ¨ CI ä¸­ä¿æŒè¯¥æµ‹è¯•é€šè¿‡å³å¯ã€‚

---

### Deprecate test-pipeline.yaml (#34864)
**SHA**: `b6101d3` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/b6101d384db5709b4422ebd05fe84f0891ff63ce)

**å˜æ›´æ¦‚è¿°**  
æœ¬æ¬¡æäº¤æŠŠ `.buildkite/test-pipeline.yaml` å®Œå…¨åºŸå¼ƒï¼Œåªä¿ç•™ä¸€è¡Œå‘Šç¤ºï¼Œæ‰€æœ‰åŸæœ‰çš„ CI æ­¥éª¤ã€æµ‹è¯•é…ç½®å‡å·²è¿ç§»åˆ°æ–°çš„ç›®å½•ç»“æ„ï¼ˆ`test_areas`ã€`image_build`ã€`hardware_tests`ã€`ci_config.yaml`ï¼‰ã€‚æ–‡ä»¶ä» 1524 è¡Œå‰Šå‡è‡³ 8 è¡Œï¼Œæ ¸å¿ƒå†…å®¹è¢«æŠ½ç¦»ã€‚

**å½±å“èŒƒå›´**  
- **CI/CD**ï¼šåŸå…ˆä¾èµ– `test-pipeline.yaml` ç”Ÿæˆ Buildkite pipeline çš„è„šæœ¬ï¼ˆå¦‚ `test-template-aws.j2`ï¼‰å°†ä¸å†è¯»å–è¯¥æ–‡ä»¶ï¼Œæ”¹ä¸ºå¼•ç”¨æ–°ä½ç½®çš„é…ç½®æ–‡ä»¶ã€‚  
- **æ–‡æ¡£/ç»´æŠ¤**ï¼šå¼€å‘è€…æŸ¥çœ‹ CI é…ç½®æ—¶éœ€è½¬åˆ°æ–°çš„ç›®å½•ï¼Œå¦åˆ™ä¼šçœ‹åˆ°å·²åºŸå¼ƒæç¤ºã€‚  
- **å†å²å›æ»š**ï¼šè‹¥æ—§çš„ pipeline ä»æœ‰å¼•ç”¨ï¼Œå¯èƒ½å¯¼è‡´æ„å»ºå¤±è´¥æˆ–å‡ºç° â€œfile not foundâ€ é”™è¯¯ã€‚

**å…³æ³¨å»ºè®®**  
1. **æ£€æŸ¥æ‰€æœ‰ CI å…¥å£**ï¼ˆå¦‚ `.buildkite/scripts/*`ã€GitHub Actionsã€Makefileï¼‰ç¡®ä¿ä¸å†ç›´æ¥å¼•ç”¨ `test-pipeline.yaml`ã€‚  
2. **æ›´æ–° CI æ–‡æ¡£**ï¼Œåœ¨ README æˆ– CONTRIBUTING ä¸­æ ‡æ˜æ–°é…ç½®æ–‡ä»¶è·¯å¾„å’Œä½¿ç”¨æ–¹å¼ã€‚  
3. **ä¿ç•™å…¼å®¹å±‚**ï¼ˆå¯é€‰ï¼‰ï¼šåœ¨ `test-pipeline.yaml` ä¸­åŠ å…¥ä¸€ä¸ªå°çš„è½¬å‘è„šæœ¬ï¼Œæç¤ºä½¿ç”¨æ–°æ–‡ä»¶ï¼Œä»¥é˜²é—æ¼çš„æ—§å¼•ç”¨ã€‚  
4. **CI è¿è¡ŒéªŒè¯**ï¼šåœ¨ä¸»åˆ†æ”¯è¿è¡Œä¸€æ¬¡å®Œæ•´çš„ Buildkite pipelineï¼Œç¡®è®¤æ‰€æœ‰æ­¥éª¤å‡ç”±æ–°æ–‡ä»¶æ­£ç¡®åŠ è½½ï¼Œç¡®ä¿æ²¡æœ‰é—æ¼çš„æµ‹è¯•ã€‚  
5. **æ¸…ç†ä¾èµ–**ï¼šåˆ é™¤ `test-template-aws.j2` ä¸­å¯¹è¯¥æ–‡ä»¶çš„æ¸²æŸ“é€»è¾‘ï¼Œé˜²æ­¢å†—ä½™ä»£ç ã€‚

æ€»ä½“è€Œè¨€ï¼Œæ­¤æ¬¡åºŸå¼ƒä»…æ¶‰åŠ CI é…ç½®ï¼Œä¸ä¼šå½±å“ vLLM è¿è¡Œæ—¶ä»£ç æˆ–åŠŸèƒ½ã€‚åªè¦ç¡®è®¤è¿ç§»åçš„ pipeline å¯æ­£å¸¸ç”Ÿæˆå¹¶æ‰§è¡Œï¼Œé¡¹ç›®å³å¯å®‰å…¨åˆå¹¶ã€‚

---

### [Model Runner V2] support piecewise & mixed cudagraph (#32771)
**SHA**: `11d3976` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/11d3976b883a0a785023d279a48c85c3ad777106)

**å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼ºï¼ˆModel Runner V2â€‘support piecewise & mixed CUDAâ€‘graphï¼‰  

**é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**å˜æ›´æ‘˜è¦**  
1. ä¸º `CUDAGraphManager` æ·»åŠ äº†å¯¹ **piecewise ä¸ mixed** æ•è·æ¨¡å¼çš„æ”¯æŒï¼Œèƒ½å¤Ÿåœ¨åŒä¸€è¿›ç¨‹ä¸­åŒæ—¶æ•è·å…¨å›¾ï¼ˆFULLï¼‰ä¸åˆ†æ®µï¼ˆPIECEWISEï¼‰CUDAâ€‘graphã€‚  
2. å¼•å…¥ **uniformâ€‘decode** æœºåˆ¶ï¼šåœ¨ decode é˜¶æ®µåªéœ€æ•è·å›ºå®šæŸ¥è¯¢é•¿åº¦çš„å›¾ï¼Œä»¥å®ç°æ›´ç»†ç²’åº¦çš„å›¾å¤ç”¨ã€‚  
3. æ–°å¢ `BatchDescriptor`ã€`cdiv`ã€`cudagraph_runtime_mode` å‚æ•°ï¼Œåœ¨å‰å‘ä¸Šä¸‹æ–‡ä¸­æºå¸¦ batchâ€‘sizeã€LoRA æ ‡è®°ç­‰ä¿¡æ¯ï¼Œä½¿å¾— piecewise æ•è·å¯åœ¨ `torch.compile` ä¸­è‡ªåŠ¨å®Œæˆã€‚  
4. `get_cudagraph_sizes` ä¸ `get_cudagraph_size` ç°åœ¨è¿”å› **ä¸¤å¥—** å›¾å¤§å°æ˜ å°„ï¼ˆæ™®é€šâ€¯vsâ€¯uniformâ€‘decodeï¼‰ï¼Œå¹¶åœ¨ DP ç¯å¢ƒä¸‹åŒæ­¥ `cudagraph_runtime_mode`ã€‚  
5. `dp_utils`ã€`model_runner`ã€Eagleâ€‘specâ€‘decode ç­‰æ¨¡å—ç›¸åº”æ‰©å±•ä»¥ä¼ æ’­ `cudagraph_runtime_mode`ã€`uniform_decode` æ ‡è®°ä»¥åŠ `BatchDescriptor`ã€‚  

**å½±å“èŒƒå›´**  
- `vllm/v1/worker/gpu/cudagraph_utils.py`ï¼ˆæ ¸å¿ƒå›¾æ•è·é€»è¾‘ï¼‰  
- `vllm/v1/worker/gpu/dp_utils.py`ï¼ˆDP åŒæ­¥ä¸ paddingï¼‰  
- `vllm/v1/worker/gpu/model_runner.py`ï¼ˆè°ƒåº¦ã€æ‰§è¡Œè·¯å¾„ï¼‰  
- `vllm/v1/worker/gpu/spec_decode/eagle*.py`ï¼ˆEagle é‡‡æ ·è·¯å¾„ï¼‰  
- `vllm/forward_context.py`ï¼ˆå‰å‘ä¸Šä¸‹æ–‡ç»“æ„ï¼‰  

**å…³æ³¨å»ºè®®**  

| å¯¹å¼€å‘è€… | å¯¹ç”¨æˆ· |
|----------|--------|
| 1. å½»åº•å•å…ƒæµ‹è¯• `get_cudagraph_runtime_mode`ã€`get_cudagraph_and_dp_padding` çš„è¾¹ç•Œï¼ˆå¦‚ `max_query_len` ä¸ `uniform_decode_query_len` ä¸åŒ¹é…ã€DPâ€¯sizeÂ >1 æ—¶ä¸åŒ rank çš„ `cudagraph_mode` å·®å¼‚ï¼‰ã€‚<br>2. ç¡®è®¤ `BatchDescriptor` åœ¨ `torch.compile` ä¸­çš„åºåˆ—åŒ–è·¯å¾„ä¸äº§ç”Ÿé¢å¤–å¼€é”€ã€‚<br>3. æ£€æŸ¥ `cudagraph_sizes` ä¸ `uniform_decode_cudagraph_sizes` çš„æ˜ å°„æ˜¯å¦æ»¡è¶³ `max_num_reqs * uniform_decode_query_len` ä¸Šé™ï¼Œé˜²æ­¢æ•è·è¿‡å¤§çš„å›¾å¯¼è‡´ OOMã€‚<br>4. ä¿æŒå‘åå…¼å®¹ï¼šè‹¥æ—§é…ç½®ä»ä½¿ç”¨ `FULL_DECODE_ONLY`ï¼Œç¡®ä¿ `cudagraph_mode.decode_mode()` æ­£ç¡®å›é€€ã€‚ | 1. æ–°å¢ `--cudagraph-mode` å‚æ•°ï¼ˆæˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼‰æ—¶ï¼Œå»ºè®®å…ˆåœ¨å° batchï¼ˆå¦‚ 1â€‘4ï¼‰ä¸‹éªŒè¯æ˜¯å¦è§¦å‘ piecewise æ•è·ï¼Œä»¥å…æ„å¤–è¿›å…¥å…¨å›¾æ¨¡å¼é€ æˆæ˜¾å­˜æµªè´¹ã€‚<br>2. å¯¹ä½¿ç”¨ LoRA çš„æ¨ç†ï¼Œéœ€è¦åœ¨ `has_lora=True` æ—¶æ‰‹åŠ¨å¼€å¯ uniformâ€‘decodeï¼Œå¦åˆ™ä¼šé€€å› eager æ‰§è¡Œã€‚<br>3. å— `uniform_decode_query_len` å½±å“çš„ latency å˜åŒ–åº”åœ¨æ–‡æ¡£ä¸­è¯´æ˜ï¼Œå°¤å…¶åœ¨é«˜å¹¶å‘ decode åœºæ™¯ä¸‹çš„æ”¶ç›Šä¸Šé™ã€‚<br>4. è‹¥å‡çº§åˆ° V2ï¼Œå»ºè®®å…ˆåœ¨ dev ç¯å¢ƒè·‘ä¸€æ¬¡å®Œæ•´çš„ captureâ€‘graph æµç¨‹ï¼Œä»¥ç¡®è®¤æ‰€æœ‰éœ€è¦çš„ `cudagraph_capture_sizes` å·²åœ¨é…ç½®ä¸­åˆ—å‡ºã€‚ |

> **æ€»ä½“è¯„ä»·**ï¼šæœ¬æ¬¡æ”¹åŠ¨ä¸º vLLM å¼•å…¥äº†æ›´çµæ´»çš„ CUDAâ€‘graph æ•è·æ–¹æ¡ˆï¼Œèƒ½å¤Ÿåœ¨æ··åˆ prefillâ€‘decode åœºæ™¯ä¸‹æ˜¾è‘—æå‡ååï¼ŒåŒæ—¶ä¿æŒå¯¹åŸæœ‰å…¨å›¾æ¨¡å¼çš„å…¼å®¹ã€‚é£é™©ä¸»è¦åœ¨ DP åŒæ­¥å’Œ uniformâ€‘decode è¾¹ç•Œçš„æ­£ç¡®æ€§ï¼Œå»ºè®®åœ¨å¤šæœºå¤šå¡ç¯å¢ƒä¸‹åŠ å…¥å›å½’æµ‹è¯•å¹¶æ›´æ–°ä½¿ç”¨æ‰‹å†Œã€‚

---

### [MoE Refactor] Convert mxfp4 marlin into modular kernel format  (#34588)
**SHA**: `40da962` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/40da9625a106222f53e27761497fcf960b249a67)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼ºï¼ˆå°† MXFP4â€¯Marlinâ€¯å®ç°è¿ç§»åˆ°å¯ç»„åˆçš„ MoEâ€¯Kernel æ¡†æ¶ï¼‰  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  
**ğŸ“‹ å˜æ›´æ‘˜è¦**ï¼š  
1. åœ¨ `fused_marlin_moe.py` ä¸­æ–°å¢ `input_dtype` æˆå‘˜ï¼Œå¹¶é€šè¿‡ `get_marlin_input_dtype()` ç»Ÿä¸€è·å–ã€‚  
2. `mxfp4.py` ä¸­å»æ‰æ—§çš„ `marlin_input_dtype` å­—æ®µï¼Œæ”¹ä¸ºåœ¨ `process_weights_after_loading` æ—¶ä½¿ç”¨ `maybe_make_prepare_finalize` ç”Ÿæˆ `FusedMoEModularKernel` å®ä¾‹ `moe_mk`ã€‚  
3. `apply` é˜¶æ®µä¸å†ç›´æ¥è°ƒç”¨ `fused_marlin_moe`ï¼Œè€Œæ˜¯å°†è®¡ç®—å§”æ‰˜ç»™ `moe_mk`ï¼ˆå³æ¨¡å—åŒ– kernelï¼‰ï¼Œå¹¶ä¿ç•™åŸæœ‰çš„ `inplace`ã€`apply_router_weight_on_input` ç­‰å‚æ•°ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**ï¼š  
- `vllm/model_executor/layers/fused_moe/fused_marlin_moe.py`  
- `vllm/model_executor/layers/quantization/mxfp4.py`  
- `vllm/model_executor/layers/quantization/utils/marlin_utils.py`ï¼ˆæ–°å¢ `get_marlin_input_dtype`ï¼‰  
- `vllm/model_executor/layers/fused_moe/all2all_utils.py`ï¼ˆæ–°å¢ `maybe_make_prepare_finalize`ï¼‰  

**ğŸ’¡ å…³æ³¨å»ºè®®**  

1. **å…¼å®¹æ€§**ï¼š`marlin_input_dtype` å·²è¢«ç§»é™¤ï¼Œç¡®è®¤å¤–éƒ¨è°ƒç”¨ï¼ˆå¦‚è‡ªå®šä¹‰æ’ä»¶æˆ–è€ç‰ˆæœ¬è„šæœ¬ï¼‰ä¸ä¼šç›´æ¥è®¿é—®è¯¥å±æ€§ã€‚è‹¥æœ‰ï¼Œéœ€è¦åœ¨æ–‡æ¡£æˆ–å…¼å®¹å±‚ä¸­è¯´æ˜è¿ç§»è·¯å¾„ã€‚  
2. **åˆå§‹åŒ–é¡ºåº**ï¼š`moe_mk` ä¾èµ– `prepare_finalize`ï¼Œè€Œ `prepare_finalize` åˆéœ€è¦ `layer._maybe_init_expert_routing_tables()`ã€‚ç¡®ä¿åœ¨æƒé‡åŠ è½½å®Œæˆåå§‹ç»ˆæ‰§è¡Œ `process_weights_after_loading`ï¼Œé˜²æ­¢å‡ºç° `None` çš„ kernel å®ä¾‹ã€‚  
3. **æ€§èƒ½åŸºå‡†**ï¼šæ¨¡å—åŒ– kernel ä¸åŸå§‹ `fused_marlin_moe` åœ¨å†…å­˜å¸ƒå±€ã€å¤åˆ¶æ¬¡æ•°ä¸Šå¯èƒ½æœ‰æ‰€å·®å¼‚ï¼Œå»ºè®®åœ¨å¤šå¡ã€ä¸åŒ batchâ€‘size åœºæ™¯ä¸‹è·‘ä¸€æ¬¡åŸºå‡†ï¼ŒéªŒè¯ååå’Œæ˜¾å­˜å ç”¨æ— å›é€€ã€‚  
4. **é”™è¯¯ä¿¡æ¯**ï¼šå½“å‰åœ¨ `apply` ä¸­ä»…ä½¿ç”¨ `assert self.moe_mk is not None`ï¼Œè‹¥æ„é€ å¤±è´¥ä¼šæŠ›å‡º AssertionErrorã€‚è€ƒè™‘æ”¹ä¸ºæ›´å‹å¥½çš„å¼‚å¸¸ï¼ˆä¾‹å¦‚ `RuntimeError("FusedMoEModularKernel æœªæ­£ç¡®åˆå§‹åŒ–")`ï¼‰ï¼Œä¾¿äºç”¨æˆ·å®šä½é—®é¢˜ã€‚  
5. **å•å…ƒæµ‹è¯•**ï¼šæ–°å¢å¯¹ `mk.FusedMoEModularKernel` çš„è°ƒç”¨è·¯å¾„çš„è¦†ç›–ï¼Œç‰¹åˆ«æ˜¯ `input_dtype`ã€`inplace` ä¸ `apply_router_weight_on_input` å‚æ•°ç»„åˆçš„è¡Œä¸ºã€‚  
6. **æ–‡æ¡£æ›´æ–°**ï¼šåœ¨ Quantization ä¸ MoE çš„ä½¿ç”¨æŒ‡å—ä¸­åŠ å…¥â€œMXFP4â€¯Marlinâ€¯å·²è¿ç§»è‡³æ¨¡å—åŒ– kernelâ€ç« èŠ‚ï¼Œè¯´æ˜å¦‚ä½•é€šè¿‡ `maybe_make_prepare_finalize` å¼€å¯æ–°æ¥å£ã€‚  

æ€»ä½“æ¥çœ‹ï¼Œæ­¤æ¬¡æ”¹åŠ¨ä¸ºåç»­ç»Ÿä¸€ MoEâ€‘Kernelã€æå‡å¯ç»„åˆæ€§å¥ å®šåŸºç¡€ï¼Œåªè¦åšå¥½å…¼å®¹æ€§æ£€æŸ¥ã€åŸºå‡†éªŒè¯ä¸æ–‡æ¡£åŒæ­¥ï¼Œå³å¯å®‰å…¨ä¸Šçº¿ã€‚

---

### [Docs] Clean up speculators docs (#34065)
**SHA**: `64ac139` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/64ac1395e8d52e3e38910a62c7eb8524126730d8)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæ–‡æ¡£é‡æ„ & è½»é‡åŠŸèƒ½ä¿®æ­£  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ¦‚è¿°**  
1. å°†åŸæ¥çš„ *speculative decoding* æ–‡æ¡£æ•´ä½“è¿ç§»è‡³ `speculative_decoding/` ç›®å½•ï¼Œæ–°å¢å¤šç¯‡å­æ–‡æ¡£ï¼ˆdraft_modelã€eagleã€mlpã€n_gramã€suffixï¼‰ï¼Œå¹¶è¡¥å……è¯´æ˜å›¾ã€èµ„æºé“¾æ¥ä»¥åŠå·²çŸ¥å…¼å®¹æ€§ã€‚  
2. åœ¨ `mkdocs` é…ç½®ä¸­åŠ å…¥ **redirects**ï¼Œä¿è¯æ—§é“¾æ¥ä»å¯è®¿é—®ã€‚  
3. `vllm/config/speculative.py` å¢å¼º `SpeculativeConfig.__post_init__`ï¼š  
   - è‡ªåŠ¨æ¨æ–­ `method`ï¼ˆè‹¥æœªæŒ‡å®šåˆ™ä¾æ® `model` åˆ¤æ–­ä¸º `ngram` æˆ– `draft_model`ï¼‰ï¼Œå¹¶ç»Ÿä¸€å¤„ç† `ngram` åˆ«åã€‚  
   - å½“æä¾›äº† draft æ¨¡å‹ä¸”æ—¢æœªç»™ `speculative_token_tree` ä¹Ÿæœªç»™ `num_speculative_tokens` æ—¶æŠ›å‡º `ValueError`ï¼ˆåŸå…ˆæ˜¯ `NotImplementedError`ï¼‰ã€‚  
4. ç›¸åº”å•å…ƒæµ‹è¯•æ”¹ä¸ºæ•è· `ValueError`ã€‚  
5. æ–‡æ¡£ä¸­æ›´æ–°ç‰¹æ€§çŸ©é˜µçš„é“¾æ¥æŒ‡å‘æ–°è·¯å¾„ã€‚

**ğŸ” å½±å“èŒƒå›´**  
- **æ–‡æ¡£**ï¼š`docs/features/*`ã€`docs/assets/*`ã€`mkdocs.yaml`ã€`requirements/docs.txt`ã€‚æ‰€æœ‰ä½¿ç”¨æ—§è·¯å¾„çš„å¤–éƒ¨é“¾æ¥ä¼šé€šè¿‡é‡å®šå‘è‡ªåŠ¨è½¬å‘æ–°ä½ç½®ã€‚  
- **é…ç½®è§£æ**ï¼š`vllm/config/speculative.py` åœ¨åˆ›å»º `AsyncEngineArgs` æ—¶å¯¹ `speculative_config` çš„æ ¡éªŒæ›´ä¸¥æ ¼ï¼Œå¯èƒ½å¯¼è‡´ç”¨æˆ·åœ¨ç¼ºå¤± `num_speculative_tokens` æˆ– `speculative_token_tree` æ—¶ç›´æ¥æŠ¥ `ValueError`ã€‚  
- **æµ‹è¯•**ï¼š`tests/v1/test_oracle.py` å·²åŒæ­¥å¼‚å¸¸ç±»å‹ï¼Œç¡®ä¿ CI ä¸ä¼šå› æ—§å¼‚å¸¸è€Œå¤±è´¥ã€‚  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
- **ç”¨æˆ·**ï¼šæ£€æŸ¥å¯åŠ¨è„šæœ¬æˆ–ä»£ç ä¸­æ˜¯å¦ä»ä½¿ç”¨å·²åºŸå¼ƒçš„ `--speculative_model`ã€`--num_speculative_tokens` åˆ†ç¦»æ–¹å¼ï¼Œç»Ÿä¸€æ”¹ä¸º `--speculative_config` JSON å­—ç¬¦ä¸²ã€‚è‹¥ä»…æä¾› draft æ¨¡å‹ï¼Œè¯·ç¡®ä¿æ˜¾å¼è®¾ç½® `num_speculative_tokens`ï¼ˆæˆ– `speculative_token_tree`ï¼‰ï¼Œå¦åˆ™ä¼šæŠ¥ `ValueError`ã€‚  
- **å¼€å‘è€…**ï¼šåç»­è‹¥ç»§ç»­æ‰©å±• `method`ï¼Œè¯·åœ¨ `__post_init__` ä¸­ä¿æŒç»Ÿä¸€çš„è‡ªåŠ¨æ¨æ–­é€»è¾‘ï¼Œé¿å…å‡ºç°æœªè¦†ç›–çš„ç»„åˆå¯¼è‡´éšå¼é”™è¯¯ã€‚æ–‡æ¡£åŒæ­¥åï¼Œç¡®è®¤æ‰€æœ‰å¤–éƒ¨é“¾æ¥ï¼ˆREADMEã€ç¤ºä¾‹ notebook ç­‰ï¼‰å·²æŒ‡å‘æ–°è·¯å¾„ã€‚  
- **CI/CD**ï¼šç¡®ä¿ `mkdocs-redirects` å·²åŠ å…¥ `requirements/docs.txt`ï¼Œå¹¶åœ¨æ–‡æ¡£æ„å»ºé˜¶æ®µéªŒè¯é‡å®šå‘ç”Ÿæ•ˆï¼Œé˜²æ­¢ç”¨æˆ·é€šè¿‡æ—§ URL è®¿é—® 404ã€‚  

æ€»ä½“è€Œè¨€ï¼Œæ­¤æ¬¡æ”¹åŠ¨ä¸»è¦æ˜¯æå‡æ–‡æ¡£å¯ç»´æŠ¤æ€§å¹¶ç»†åŒ–é…ç½®æ ¡éªŒï¼Œå¯¹åŠŸèƒ½è¡Œä¸ºå½±å“æå°ï¼Œåªéœ€ç”¨æˆ·åœ¨ä½¿ç”¨ `speculative_config` æ—¶æ³¨æ„å¿…å¡«å­—æ®µå³å¯ã€‚

---

### [Bugfix] Fix lora tests (#34834)
**SHA**: `61cf087` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/61cf0876805c1ac04b9b811c27e3645eedfc13c8)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šBug ä¿®å¤ / åŠŸèƒ½å¢å¼º  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  
**ğŸ“‹ å˜æ›´æ‘˜è¦**ï¼š  
1. ä¿®æ­£äº† LoRA ç›¸å…³å•å…ƒæµ‹è¯•ä¸­çš„æ–­è¨€ï¼Œä½¿éŸ³é¢‘/è§†è§‰æç¤ºä¸å®é™…è¯·æ±‚å‚æ•°ä¿æŒä¸€è‡´ã€‚  
2. è°ƒæ•´äº† beamâ€‘search æµ‹è¯•çš„è¾“å‡ºæ ¡éªŒé€»è¾‘ï¼Œæ”¹ä¸ºæ£€æŸ¥ç”Ÿæˆæ–‡æœ¬æ˜¯å¦ä»¥æœŸæœ›å­ä¸²ç»“å°¾ï¼Œé¿å…å› å‰ç¼€å·®å¼‚å¯¼è‡´è¯¯æŠ¥ã€‚  
3. åœ¨ `vllm/entrypoints/llm.py` ä¸­é‡æ„ LoRA è§£æè·¯å¾„ï¼šå»æ‰ `_resolve_lora_reqs`ï¼Œæ–°å¢ `_resolve_mm_lora`ï¼Œåªåœ¨å¤šæ¨¡æ€è¾“å…¥æ—¶å°è¯•åŒ¹é…é»˜è®¤çš„ multimodal LoRAï¼Œå¹¶å¯¹å†²çªæƒ…å†µç»™å‡ºæ›´å‹å¥½çš„è­¦å‘Šä¿¡æ¯ã€‚

**ğŸ¯ å½±å“èŒƒå›´**ï¼š  
- `tests/lora/*`ï¼ˆå•å…ƒæµ‹è¯•ï¼‰  
- `vllm/entrypoints/llm.py`ï¼ˆè¯·æ±‚æ„å»ºã€LoRA è‡ªåŠ¨æ³¨å…¥ï¼‰  
- å¯èƒ½å½±å“ä½¿ç”¨ **LoRA + å¤šæ¨¡æ€**ï¼ˆéŸ³é¢‘/å›¾ç‰‡ï¼‰æ¨¡å‹çš„ç”¨æˆ·ä»£ç è·¯å¾„ã€‚

**ğŸ’¡ å…³æ³¨å»ºè®®**ï¼š  
1. **å‘åå…¼å®¹**ï¼šç”±äº `_resolve_lora_reqs` è¢«åˆ é™¤ï¼Œå¤–éƒ¨è°ƒç”¨è‹¥ä»ä½¿ç”¨è¯¥ç§æœ‰æ–¹æ³•å¯èƒ½æŠ¥é”™ï¼Œå»ºè®®åœ¨æ–‡æ¡£ä¸­æ³¨æ˜å·²æ”¹ä¸º `_resolve_mm_lora`ï¼Œæˆ–åœ¨åç»­ç‰ˆæœ¬æä¾›å…¼å®¹åŒ…è£…ã€‚  
2. **ä¸šåŠ¡éªŒè¯**ï¼šåœ¨çœŸå®æœåŠ¡ä¸­åŠ å…¥åŒ…å«éŸ³é¢‘/è§†è§‰å ä½ç¬¦çš„è¯·æ±‚ï¼Œç¡®è®¤ LoRA è‡ªåŠ¨æ³¨å…¥ä»æŒ‰é¢„æœŸå·¥ä½œï¼Œå°¤å…¶æ˜¯ `default_mm_loras` ä¸º `None` æ—¶ä¸å½±å“éå¤šæ¨¡æ€è¯·æ±‚ã€‚  
3. **è­¦å‘Šä¿¡æ¯**ï¼šæ—¥å¿—æ–‡æ¡ˆç•¥æœ‰æ”¹åŠ¨ï¼Œç¡®ä¿ç›‘æ§æˆ–æ—¥å¿—åˆ†æè§„åˆ™åŒæ­¥æ›´æ–°ã€‚  
4. **æµ‹è¯•ç»´æŠ¤**ï¼šæœ¬æ¬¡æäº¤ä¿®æ”¹äº†æœŸæœ›è¾“å‡ºçš„å†™æ³•ï¼Œåç»­æ–°å¢ beamâ€‘search åœºæ™¯æ—¶åŠ¡å¿…ä½¿ç”¨ `endswith` æ£€æŸ¥ï¼Œä»¥å…å› å‰ç¼€å˜åŒ–å¯¼è‡´ä¸å¿…è¦çš„å¤±è´¥ã€‚  

æ€»ä½“æ¥è¯´ï¼Œæ­¤æ¬¡æ”¹åŠ¨æå‡äº† LoRA ä¸å¤šæ¨¡æ€æ¨¡å‹çš„å…¼å®¹æ€§å’Œæµ‹è¯•å¯é æ€§ï¼Œå½±å“èŒƒå›´æœ‰é™ï¼ŒæŒ‰ä¸Šè¿°æ£€æŸ¥åå³å¯å®‰å…¨åˆå¹¶ã€‚

---

### [Bugfix][MoE Kernel] Fix incorrect routing selection for models without expert groups (e.g., MiniMax-M2.1) (#34673)
**SHA**: `847a57c` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/847a57cd1217c6fd51f8e1813af5fed31bae1a2f)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šBug ä¿®å¤ï¼ˆMoE Kernel åœ¨æ²¡æœ‰ expert group çš„æ¨¡å‹ä¸Šè·¯ç”±é€‰æ‹©é”™è¯¯ï¼‰  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
1. `config.get_routing_method_type` å¢åŠ  `num_expert_group` ä¸ `has_e_score_bias` å‚æ•°ï¼Œåªæœ‰åœ¨ `sigmoid` ä¸”æœ‰æ˜¾å¼ `expert_group` æ—¶æ‰è¿”å› `DeepSeekV3`ï¼›å¦åˆ™ç»Ÿä¸€è¿”å› `Unspecified`ã€‚  
2. `fused_topk_router`ã€`fused_topk_bias_router` ä¸ `grouped_topk_router` å‡æ”¹ä¸ºé€šè¿‡è¯¥å‡½æ•°åŠ¨æ€å†³å®šè·¯ç”±ç±»å‹ï¼Œå¹¶æ˜¾å¼ä¼ é€’ `num_expert_group` ä¸ `has_e_score_bias`ã€‚  
3. åˆ é™¤åŸæœ‰çš„ `test_flashinfer_blockscale_fp8_none_expert_group`ï¼ˆå·²è¿ç§»åˆ°å…¶ä»–æµ‹è¯•ï¼‰ï¼Œä»…ä¿ç•™æ ¸å¿ƒå®ç°ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- `vllm/model_executor/layers/fused_moe/config.py`  
- `vllm/model_executor/layers/fused_moe/router/*`ï¼ˆ3 ä¸ª router å®ç°ï¼‰  
- ç›¸å…³å•å…ƒæµ‹è¯• `tests/kernels/moe/test_flashinfer.py`  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
- **å…¼å®¹æ€§**ï¼šæ–°å¢çš„ `num_expert_group` ä¸ `has_e_score_bias` å‚æ•°ä¼šå½±å“æ‰€æœ‰è‡ªå®šä¹‰ router è°ƒç”¨ï¼Œç¡®ä¿å¤–éƒ¨ä»£ç ä»ä½¿ç”¨æ—§ç­¾åï¼ˆé»˜è®¤ `None`ï¼‰å³å¯å…¼å®¹ã€‚  
- **å›å½’æµ‹è¯•**ï¼šåœ¨åŒ…å« `sigmoid` + `top_k>1` ä¸” **æ— ** expert group çš„æ¨¡å‹ï¼ˆå¦‚ MiniMaxâ€‘M2.1ï¼‰ä¸Šè·‘å®Œæ•´ MoE æµ‹è¯•ï¼Œç¡®è®¤ä¸å†è§¦å‘ `flashinfer_fused_moe_blockscale_fp8` å´©æºƒã€‚  
- **æ–‡æ¡£**ï¼šæ›´æ–° MoE è·¯ç”±è¯´æ˜ï¼Œæ˜ç¡®åœ¨ â€œDeepSeekV3â€ ä»…åœ¨æœ‰ expert group ä¸”å¸¦ bias æ—¶ç”Ÿæ•ˆçš„å‰ææ¡ä»¶ã€‚  
- **æ€§èƒ½æ£€æŸ¥**ï¼šå¯¹æ¯”ä¿®æ”¹å‰å `DeepSeekV3` ä¸ `Unspecified` ä¸¤æ¡è·¯å¾„çš„ååï¼Œç¡®ä¿æœªå¼•å…¥æ„å¤–çš„æ€§èƒ½å›é€€ã€‚  

æ€»ä½“è€Œè¨€ï¼Œæ­¤æ¬¡æ”¹åŠ¨ä¿®æ­£äº†å…³é”®è·¯ç”±åˆ¤æ–­çš„è¾¹ç•Œæ¡ä»¶ï¼Œé£é™©é›†ä¸­åœ¨æ–°å‚æ•°çš„é»˜è®¤è¡Œä¸ºå’Œå¯èƒ½çš„è¯¯ç”¨ï¼Œå»ºè®®åœ¨ CI ä¸­åŠ å…¥ â€œnum_expert_group=Noneâ€ åœºæ™¯çš„è¦†ç›–ã€‚

---

### [Model Runner V2] Minor simplification for DCP (#34786)
**SHA**: `95be2a7` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/95be2a7f22ab89348bd79056f9050268915c3e7f)

**ğŸ”§ å˜æ›´æ¦‚è§ˆ**  
æœ¬æ¬¡æäº¤å¯¹ **Decodeâ€‘Context Parallelism (DCP)** åšäº†è½»é‡åŒ–æ”¹é€ ï¼š  
1. **åˆ é™¤** `vllm.v1.attention.backends.utils.get_dcp_local_seq_lens`ï¼Œæ”¹ç”¨ **Tritionâ€‘kernel å®ç°**çš„ `prepare_dcp_local_seq_lens`ï¼ˆæ–°å¢ `vllm/v1/worker/gpu/cp_utils.py`ï¼‰ã€‚  
2. **BlockTable** æ„é€ å‡½æ•°å‚æ•°ä» `cp_kv_cache_interleave_size` â†’ `cp_sizeã€cp_rankã€cp_interleave`ï¼Œå¹¶åœ¨å†…éƒ¨æ”¹ä¸º `block_size * cp_size` è®¡ç®—è™šæ‹Ÿå—å¤§å°ã€‚  
3. **slotâ€‘mapping Triton kernel** é‡æ–°ç»„ç»‡ï¼š  
   - å½“ `CP_SIZE==1` ç›´æ¥æ˜ å°„ï¼›  
   - `CP_SIZE>1` æ—¶æ ¹æ® `cp_interleave`ã€`cp_rank` åˆ¤æ–­æœ¬åœ°/è¿œç¨‹ tokenï¼Œå¹¶å¯¹éæœ¬åœ°ä½ç½®å¡« PADã€‚  
4. **cudagraph_utils** ä¸ **model_runner** ç›¸åº”åˆ å‡äº†å¯¹ `get_dcp_group` çš„æ˜¾å¼è·å–ï¼Œæ”¹ä¸ºç»Ÿä¸€åœ¨ `ModelRunner` åˆå§‹åŒ–æ—¶ä¿å­˜ `dcp_sizeã€dcp_rankã€cp_interleave` å¹¶åœ¨éœ€è¦æ—¶ä¼ å…¥ã€‚  
5. `prepare_inputs` ä¸­çš„ `dcp_local_seq_lens` å¡«å……é€»è¾‘ç»Ÿä¸€ä½¿ç”¨æ–°å®ç°ã€‚

**å—å½±å“çš„æ ¸å¿ƒæ¨¡å—**  
- `vllm/v1/worker/gpu/attn_utils.py`ï¼ˆå»é™¤æ—§å®ç°ï¼‰  
- `vllm/v1/worker/gpu/block_table.py`ï¼ˆå‚æ•°ã€slotâ€‘mapping é€»è¾‘ï¼‰  
- `vllm/v1/worker/gpu/cp_utils.py`ï¼ˆæ–°å¢ï¼‰  
- `vllm/v1/worker/gpu/cudagraph_utils.py`ï¼ˆè°ƒç”¨ç®€åŒ–ï¼‰  
- `vllm/v1/worker/gpu/model_runner.py`ï¼ˆDCP å‚æ•°ç»Ÿä¸€ç®¡ç†ã€è°ƒç”¨æ›´æ–°ï¼‰

**å¯èƒ½çš„é£é™©ç‚¹ & å»ºè®®**  
1. **å‘åå…¼å®¹**ï¼š`BlockTables` æ„é€ å‡½æ•°ç­¾åå˜æ›´ï¼Œå†…éƒ¨ä»æœ‰ `self.cp_interleave` ä½¿ç”¨ï¼Œç¡®ä¿æ‰€æœ‰è°ƒç”¨æ–¹ï¼ˆå¦‚å•å…ƒæµ‹è¯•ã€ç¤ºä¾‹è„šæœ¬ï¼‰å·²æ›´æ–°ã€‚  
2. **Trition kernel è¾¹ç•Œ**ï¼š`_compute_slot_mappings_kernel` ç°åœ¨åœ¨ `CP_SIZE>1` æ—¶ä½¿ç”¨ `tl.where(is_local, â€¦, PAD_ID)`ï¼Œè¯·ç¡®è®¤ `PAD_ID` ä¸åç»­è§£ç é€»è¾‘ä¸€è‡´ï¼Œé˜²æ­¢å‡ºç°æ— æ•ˆ slotã€‚  
3. **dcp_local_seq_lens å¤§å°**ï¼š`cp_utils.prepare_dcp_local_seq_lens` é€šè¿‡ `max_num_reqs` è®¡ç®— paddingï¼Œè‹¥ `max_num_reqs` ä¸å®é™… `input_buffers.dcp_local_seq_lens` é•¿åº¦ä¸åŒ¹é…ä¼šäº§ç”Ÿè¶Šç•Œå†™ã€‚å»ºè®®åœ¨ `ModelRunner.__init__` ä¸­æ˜¾å¼æ£€æŸ¥ã€‚  
4. **å¹¶è¡Œé…ç½®åŒæ­¥**ï¼š`ModelRunner` ç°åœ¨è‡ªè¡Œä¿å­˜ `self.dcp_size / self.dcp_rank / self.cp_interleave`ï¼Œä½† `BlockTables` ä»ä» `self.parallel_config` è¯»å– `cp_kv_cache_interleave_size`ï¼ˆå·²æ”¹ä¸º `cp_interleave`ï¼‰ï¼Œéœ€ç¡®ä¿ `ParallelConfig` ä¸­å¯¹åº”å­—æ®µä¿æŒä¸€è‡´ã€‚  
5. **æ€§èƒ½å›å½’**ï¼šæ–° Triton kernel å¼•å…¥äº†é¢å¤–çš„åˆ†æ”¯ï¼ˆ`if CP_SIZE == 1`ï¼‰ï¼Œåœ¨é DCP åœºæ™¯ä¸‹çš„åˆ†æ”¯é¢„æµ‹æˆæœ¬åº”åœ¨åŸºå‡†æµ‹è¯•ä¸­éªŒè¯ã€‚  
6. **ä»£ç æ¸…ç†**ï¼š`attn_utils.py`ã€`cudagraph_utils.py` ä¸­ä»æ®‹ç•™å¯¹å·²åˆ é™¤ `get_dcp_local_seq_lens` çš„ importï¼Œå·²è¢«åˆ é™¤ä½†ç•™æ„æ½œåœ¨æœªæ¸…ç†çš„å¼•ç”¨ã€‚

**è¡ŒåŠ¨å»ºè®®**  
- ä¸º **é DCPï¼ˆcp_size=1ï¼‰** ä¸ **DCPï¼ˆcp_size>1ï¼‰** ä¸¤ç§é…ç½®å„æ–°å¢ä¸€æ¬¡ç«¯åˆ°ç«¯çš„å•å…ƒæµ‹è¯•ï¼ŒéªŒè¯ slotâ€‘mapping ä¸ KV cache è¯»å–çš„æ­£ç¡®æ€§ã€‚  
- åœ¨ CI ä¸­åŠ å…¥ *tritonâ€‘kernel smoke test*ï¼Œç¡®ä¿åœ¨ä¸åŒ GPU æ¶æ„ï¼ˆA100ã€H100ã€RTXï¼‰ä¸Šå‡å¯ç¼–è¯‘è¿è¡Œã€‚  
- åœ¨ `ModelRunner` åˆå§‹åŒ–é˜¶æ®µåŠ å…¥æ–­è¨€ï¼Œæ£€æŸ¥ `cp_interleave â‰¥ 1`ã€`cp_rank < cp_size`ã€‚  
- æ›´æ–°æ–‡æ¡£/README ä¸­å…³äº DCP å‚æ•°ï¼ˆ`decode_context_parallel_size`ã€`cp_kv_cache_interleave_size`ï¼‰çš„è¯´æ˜ï¼Œæ˜ç¡®æ–°çš„ `BlockTables` å‚æ•°å«ä¹‰ã€‚  

æ€»ä½“æ¥çœ‹ï¼Œæ­¤æ¬¡æ”¹åŠ¨æŠŠ DCP ç›¸å…³çš„åºåˆ—é•¿åº¦è®¡ç®—è¿ç§»åˆ°æ›´é«˜æ•ˆçš„ Triton å®ç°ï¼Œç®€åŒ–äº†ä»£ç è·¯å¾„ï¼Œå¹¶åœ¨éå¹¶è¡Œåœºæ™¯ä¿æŒé›¶å¼€é”€ã€‚åªè¦åšå¥½å…¼å®¹æ€§å’Œè¾¹ç•Œæ£€æŸ¥ï¼Œé£é™©å¯æ§ã€‚ç¥è°ƒè¯•é¡ºåˆ©ï¼

---

### [Bugfix] Redo Qwen3.5/Qwen3-Next GDN projector fusion (#34697)
**SHA**: `c0bd8b1` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/c0bd8b13da36e62f982929a9f14bc9ef3ff6a56a)

**ğŸ”§ å˜æ›´æ¦‚è§ˆ**  
æœ¬æ¬¡æäº¤ä¸»è¦å›´ç»• **Qwenâ€‘3.5 / Qwenâ€‘3â€‘Next** çš„ GDNï¼ˆGateâ€‘Deltaâ€‘Netï¼‰æŠ•å½±èåˆå®ç°ã€‚æ ¸å¿ƒä¿®æ”¹ç‚¹åŒ…æ‹¬ï¼š

1. **`Linear.weight_loader` ä¸ `weight_loader_v2`**  
   - æ”¯æŒ `loaded_shard_id` ä¸º `tuple[int, ...]`ï¼ˆå¤š shard åœºæ™¯ï¼‰ï¼Œä½†åœ¨ `weight_loader` ä¸­ä»æŠ› `NotImplementedError`ï¼Œè¦æ±‚ä½¿ç”¨æ–°ç‰ˆ `weight_loader_v2`ã€‚  
   - åˆå¹¶äº†å¯¹ `tp_size` çš„åˆ†ç‰‡åç§»é™¤æ³•é¡ºåºï¼Œé¿å…é‡å¤é™¤æ³•å¯¼è‡´é”™è¯¯ã€‚  
   - ä¸º `BlockQuantScaleParameter` æ·»åŠ äº†åœ¨å¤š shard åœºæ™¯ä¸‹çš„ `output_sizes` é¢„å¤„ç†ã€‚

2. **æ¨¡å‹å±‚ç»“æ„é‡æ„**  
   - å°†åŸå…ˆçš„ **Qwen3.5** ä¸­ `ColumnParallelLinear`/`RowParallelLinear` åˆ†æ•£çš„å››è·¯æŠ•å½±ï¼ˆ`q/k/v`ã€`z`ã€`b`ã€`a`ï¼‰ **ç»Ÿä¸€ä¸ºä¸¤è·¯ fused æŠ•å½±**ï¼š`in_proj_qkvz`ï¼ˆmerged q/k/v/zï¼‰ ä¸ `in_proj_ba`ï¼ˆmerged b/aï¼‰ï¼Œå‡ä½¿ç”¨ `MergedColumnParallelLinear`ã€‚  
   - åˆ é™¤äº†å¤§é‡æ—§çš„åˆå§‹åŒ–ã€`ACT2FN`ã€`RMSNormGated`ã€Mamba ç›¸å…³ä»£ç ï¼Œç®€åŒ– `__init__` ä¸å‰å‘é€»è¾‘ã€‚  
   - æ–°å¢ `create_qkvz_proj` è¾…åŠ©å·¥å‚ï¼Œåˆ†åˆ«åœ¨ `Qwen3_5GatedDeltaNet` ä¸ `Qwen3Next` ä¸­å®ç°è‡ªé€‚åº”æŠ•å½±å¤§å°ã€‚  
   - è°ƒæ•´äº† `load_fused_expert_weights` ä¸ `packed_modules_mapping`ï¼Œä½¿æƒé‡æ˜ å°„èƒ½å¤Ÿä¸€æ¬¡æ€§åŠ è½½å¯¹åº” fused å‚æ•°ã€‚

3. **æ¥å£ä¸é…ç½®**  
   - ç§»é™¤äº† `CacheConfigã€ModelConfigã€SpeculativeConfig` çš„ç›´æ¥å¯¼å…¥ï¼Œæ”¹ä¸ºç»Ÿä¸€ä½¿ç”¨ `VllmConfig`ã€‚  
   - `Qwen3_5ForConditionalGeneration` é€šè¿‡ `packed_modules_mapping` ç»§æ‰¿å¹¶æ‰©å±• GDN èåˆå±‚çš„æ˜ å°„ã€‚

**âš¡ å½±å“èŒƒå›´**  
- **æ¨¡å‹åŠ è½½ä¸å¹¶è¡Œ**ï¼š`weight_loader_v2` æ–°å¢å¯¹å¤š shard idï¼ˆtupleï¼‰çš„æ”¯æŒï¼Œæ¶‰åŠ TPï¼ˆtensorâ€‘parallelï¼‰ åˆ†ç‰‡é€»è¾‘åŠå—é‡åŒ–ï¼ˆBlockQuantï¼‰è·¯å¾„ã€‚  
- **æ¨¡å‹ç»“æ„**ï¼š`Qwen3_5Model`ã€`Qwen3Next` çš„æŠ•å½±å±‚è¢« `MergedColumnParallelLinear` æ›¿ä»£ï¼Œæ‰€æœ‰ä¾èµ–æ—§å±‚åçš„å¤–éƒ¨è°ƒç”¨ï¼ˆå¦‚è‡ªå®šä¹‰æƒé‡åŠ è½½è„šæœ¬ï¼‰éœ€åŒæ­¥æ›´æ–°ã€‚  
- **æ¨ç†è·¯å¾„**ï¼šå‰å‘ `forward` ä¸­å¯¹ `mixed_qkvz` çš„ split ä¸ `ba` çš„ chunk é‡æ–°ç»„ç»‡ï¼Œç¡®ä¿ç»´åº¦å¯¹é½ï¼›è‹¥ç”¨æˆ·è‡ªè¡Œåˆ‡ç‰‡æˆ–æ”¹å†™å‰å‘ä»£ç ï¼Œéœ€æ³¨æ„æ–°çš„å¼ é‡å½¢çŠ¶ã€‚  
- **é‡åŒ–å…¼å®¹æ€§**ï¼šç”±äº `in_proj_ba` ä¸å†ä½¿ç”¨ `ColumnParallelLinear`ï¼Œå—å¼ fp8 é‡åŒ–å·²è¢«æ˜¾å¼æ’é™¤ï¼Œéœ€ç¡®è®¤æ¨¡å‹åœ¨è¯¥é‡åŒ–é…ç½®ä¸‹ä»å¯æ­£å¸¸æ¨ç†ã€‚

**ğŸ’¡ å»ºè®®**  
1. **å®Œæ•´å›å½’æµ‹è¯•**ï¼šåœ¨å•å¡ã€tensorâ€‘parallel (2ã€4ã€8) åœºæ™¯ä¸‹è·‘æƒé‡åŠ è½½ä¸æ¨ç†ï¼Œç‰¹åˆ«æ˜¯ä½¿ç”¨ `load_sharded_checkpoint` çš„å¤š shardï¼ˆtupleï¼‰è·¯å¾„ï¼Œä»¥æ•è· `NotImplementedError` æˆ–å°ºå¯¸ä¸åŒ¹é…ã€‚  
2. **æ–‡æ¡£åŒæ­¥**ï¼šåœ¨ `vllm` ä½¿ç”¨æ‰‹å†Œä¸­è¡¥å…… â€œGDN æŠ•å½±èåˆâ€ çš„è¯´æ˜ï¼Œåˆ—å‡ºæ–°å‚æ•°åï¼ˆ`in_proj_qkvz`, `in_proj_ba`ï¼‰ä»¥åŠå¯¹åº”çš„æƒé‡æ˜ å°„æ–¹å¼ã€‚  
3. **é‡åŒ–è·¯å¾„æ£€æŸ¥**ï¼šç¡®è®¤ `BlockQuantScaleParameter` åœ¨ fused æŠ•å½±ä¸‹çš„ `output_sizes` è®¡ç®—æ­£ç¡®ï¼›è‹¥è®¡åˆ’æ”¯æŒå—å¼ fp8 é‡åŒ–ï¼Œè¯·åœ¨åç»­ PR ä¸­å®ç°å¯¹åº”çš„ `weight_loader`ã€‚  
4. **å‘åå…¼å®¹**ï¼šè€ƒè™‘ä¸ºæ—§æ¨¡å‹æä¾›ä¸€ä¸ªå…¼å®¹å±‚ï¼ˆä¾‹å¦‚åœ¨ `__init__` ä¸­è‡ªåŠ¨æ£€æµ‹å¹¶åˆ›å»º `in_proj_qkvz` çš„æ—§åˆ†æ”¯ï¼‰ï¼Œé˜²æ­¢å·²æœ‰ checkpoint åœ¨æœªè¿ç§»çš„æƒ…å†µä¸‹åŠ è½½å¤±è´¥ã€‚  
5. **ä»£ç å®¡æŸ¥**ï¼š`weight_loader` ä¸­ä»ä¿ç•™æŠ›å¼‚å¸¸çš„åˆ†æ”¯ï¼Œå»ºè®®åœ¨æœªæ¥å°†å…¶åˆ é™¤æˆ–ç»Ÿä¸€è¿ç§»åˆ° `weight_loader_v2`ï¼Œä»¥å…è¯¯å¯¼ä½¿ç”¨è€…ã€‚  

æ€»ä½“æ¥çœ‹ï¼Œæ­¤æ¬¡æ”¹åŠ¨å¤§å¹…ç®€åŒ–äº† Qwenâ€‘3 ç³»åˆ—çš„æŠ•å½±å®ç°ï¼Œæå‡äº†æƒé‡åŠ è½½çš„çµæ´»æ€§ï¼Œä½†ä¹Ÿå¼•å…¥äº†å¯¹å¤š shard å‚æ•°çš„æ˜¾å¼ä¾èµ–ï¼ŒåŠ¡å¿…åœ¨å¤šå¡/é‡åŒ–ç¯å¢ƒä¸‹è¿›è¡Œå……åˆ†éªŒè¯ã€‚

---

#### ğŸŸ¢ ä½é‡è¦åº¦å˜æ›´ (17)

### [Model Bash][DeepSeekR1] Remove Shared Expert Clone (#34344)
**SHA**: `4685a63` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/4685a630a293cd7c928092efd0f8c2606a770877)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåˆ é™¤å¯¹å…±äº«ä¸“å®¶çš„ tensor cloneï¼Œæ”¹ä¸ºç›´æ¥è®°å½•æµå¹¶å¼ºåˆ¶ `disable_inplace`ï¼Œç›¸åº”å˜é‡åä¸è¿”å›å€¼è°ƒæ•´ï¼›åŒæ—¶å°† `minicpm` ä¸­çš„ `inplace` å‚æ•°æ”¹ä¸º `False`ï¼Œé¿å…åŸä½ä¿®æ”¹ã€‚

---

### [Bugfix] Qwen3.5 kv-scale weight remapping (#34719)
**SHA**: `6fff24f` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/6fff24f30fe2554f43871978ef59feaa87f245c0)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šå…¶ä»–  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ Qwen3.5 æ¨¡å‹æƒé‡åŠ è½½æ—¶ï¼Œæ–°å¢å¯¹ FP8 kvâ€‘scale å‚æ•°åç§°çš„ remap é€»è¾‘ï¼Œä½¿ç”¨ `maybe_remap_kv_scale_name` å¤„ç†å¹¶åœ¨æ˜ å°„å¤±è´¥æ—¶è·³è¿‡ã€‚

---

### [CI/Build] Try to make beam search test less flaky (#34885)
**SHA**: `23210a9` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/23210a911eb9c8bfb627d96481244ac4360877b3)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæµ‹è¯•ä¿®æ”¹  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `tests/samplers/test_beam_search.py` ä¸­ä¸ºé ROCm å¹³å°çš„ `SamplerOutput` æ·»åŠ  `async_scheduling=False, max_num_seqs=1` å‚æ•°ï¼Œä»¥é™ä½ Beam Search æµ‹è¯•çš„ flaky ç¨³å®šæ€§ã€‚

---

### [Bugfix] Fix edge case in UUID data parsing (#34884)
**SHA**: `1391378` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/139137886129abe1abcdb75f0b39c81709314be3)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šä¿®å¤äº†å¤šæ¨¡æ€ UUID é•¿åº¦æ ¡éªŒçš„è¾¹ç•Œæƒ…å†µï¼Œç¡®ä¿åœ¨æ•°æ®ä¸ºç©ºæˆ–ç¼ºå¤±æ—¶ä¸å†é”™è¯¯æ¯”è¾ƒé•¿åº¦ï¼Œå¹¶æ–°å¢å¯¹åº”æµ‹è¯•è¦†ç›–ã€‚

---

### [Bug] Fix DeepSeek V3 weight loading caused by incorrect prefix (#34876)
**SHA**: `7f51e93` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/7f51e93864709e436fab21c3f4103c49d198f999)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šå°† `DeepSeekV2FusedQkvAProj` çš„ `output_size` å‚æ•°ç±»å‹æ”¹ä¸º `list[int]`ï¼Œå¹¶ä¿®æ­£ä¼ å…¥çš„ `prefix`ï¼Œè§£å†³ DeepSeek V3 æƒé‡åŠ è½½æ—¶å‰ç¼€é”™è¯¯å¯¼è‡´çš„åŠ è½½å¤±è´¥ã€‚

---

### [Bugfix] Add Quant Config to Llava Next Projector (#34847)
**SHA**: `4611af1` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/4611af1663e268b5a64221c999868779632296a7)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `Llava Next` æ¨¡å‹çš„å¤šæ¨¡æ€æŠ•å½±å™¨åˆå§‹åŒ–ä¸­æ–°å¢ `quant_config` å‚æ•°å¹¶ä¼ é€’å‰ç¼€ã€‚

---

### [Model Runner V2] Use FP32 for Gumbel Noise (#34854)
**SHA**: `5fcb0cd` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/5fcb0cdd68ded0d1c988121d4f744c2424522259)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `gumbel.py` ä¸­æ”¹ä¸ºç›´æ¥åœ¨ FP32 ä¸­ç”Ÿæˆ Gumbel å™ªå£°ï¼Œå»é™¤ä¸å¿…è¦çš„ FP64 è½¬æ¢å¹¶åŠ å…¥æœ€å°å€¼æˆªæ–­ï¼›ä½¿ç”¨ `tl.max(..., return_indices=True)` åŒæ—¶è·å–æœ€å¤§å€¼å’Œç´¢å¼•ï¼›å‚æ•°ç»´åº¦æ”¹ä¸ºç»Ÿä¸€çš„ `max_num_reqs`ã€‚

---

### [Model Runner V2] Remove unnecessary copies in PW CUDA graph capture (#34849)
**SHA**: `c878b43` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/c878b43b640bbd5a43e78593722b2fec361eaa05)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `cudagraph_utils.py` ä¸­å»é™¤å¯¹ `hidden_states` çš„é¢å¤–æ‹·è´ï¼Œç›´æ¥è°ƒç”¨ `model`ï¼Œåˆ é™¤ä¸å¿…è¦çš„èµ‹å€¼å’Œæ–­è¨€ï¼Œæå‡ PW CUDA å›¾æ•è·çš„æ•ˆç‡ã€‚

---

### [CI][AMD][BugFix] Use torch.testing.assert_close instead of assert torch.allclose in test_rocm_skinny_gemms.py (#34181)
**SHA**: `2b84ac6` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/2b84ac669cfd8a4b6433b4ae4505028d9082c3a7)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæµ‹è¯•ä¿®æ”¹  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ ROCm ç›¸å…³é‡åŒ–æµ‹è¯•ä¸­ï¼Œå°† `assert torch.allclose` æ›¿æ¢ä¸º `torch.testing.assert_close`ï¼Œå¹¶ç»Ÿä¸€ä½¿ç”¨ `atol`/`rtol` å‚æ•°ï¼Œæé«˜æ–­è¨€å¯è¯»æ€§å’Œä¸€è‡´æ€§ã€‚

---

### Fix empty tool_call_id in Anthropic messages API tool result conversion (#34745)
**SHA**: `8d9babd` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/8d9babd4dea934fdd47b5a20a73ef0e04ff0e22e)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ Anthropic æ¶ˆæ¯åè®®ä¸­æ–°å¢ `tool_use_id` å­—æ®µï¼Œå¹¶åœ¨è¯·æ±‚è½¬æ¢æ—¶ä½¿ç”¨è¯¥å­—æ®µä½œä¸º `tool_call_id`ï¼Œé¿å…å‡ºç°ç©ºå€¼å¯¼è‡´çš„é”™è¯¯ã€‚

---

### [BUG] Fixing Weight Sync unit test (#34841)
**SHA**: `e99ba95` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/e99ba957ec3953abd65332c26880efa489effc3a)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæµ‹è¯•ä¿®æ”¹  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨æƒé‡åŒæ­¥å•å…ƒæµ‹è¯•ä¸­åŠ å…¥ `VLLM_ENABLE_V1_MULTIPROCESSING=0` ç¯å¢ƒå˜é‡ï¼Œä½¿æµ‹è¯•åœ¨å•è¿›ç¨‹æ¨¡å¼ä¸‹è¿è¡Œï¼Œç¡®ä¿ `mock.patch` èƒ½æ­£å¸¸å·¥ä½œã€‚

---

### [CI][AMD][BugFix] Skip tests in test_unquantized_backend_selection that should not run on ROCm (#34655)
**SHA**: `fcd6ac9` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/fcd6ac97ed0c26b36dbf18a1ee8ecb5f6b41707e)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæµ‹è¯•ä¿®æ”¹  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `test_unquantized_backend_selection` ä¸­æ–°å¢ `current_platform` æ£€æµ‹ï¼Œä½¿ç”¨ `@pytest.mark.skipif` è·³è¿‡é CUDAï¼ˆROCmï¼‰å¹³å°çš„ç‰¹å®šæµ‹è¯•ï¼Œé¿å…åœ¨ ROCm ç¯å¢ƒä¸‹è¿è¡Œä»…æ”¯æŒ NVIDIA çš„åç«¯é€‰æ‹©æµ‹è¯•ã€‚

---

### [Bugfix] Remove assert causing hipErrorStreamCaptureUnsupported (#34455)
**SHA**: `0e60c92` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/0e60c925cf8c2060c705953d7f89f40c25f7811d)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„/å…¶ä»–ï¼ˆBugfixï¼‰  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåˆ é™¤äº† `assert a2_scale == self.quant_config.a2_scale`ï¼Œé˜²æ­¢åœ¨ ROCm ç¯å¢ƒä¸‹è§¦å‘ä¸æ”¯æŒçš„æµæ•è·é”™è¯¯ã€‚

---

### [Misc] Add mooncake-transfer-engine to kv_connectors requirements (#34826)
**SHA**: `d7ff222` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/d7ff22204acb4715e467e728f1004568d174cffa)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šé…ç½®è°ƒæ•´  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `requirements/kv_connectors.txt` ä¸­æ–°å¢ `mooncake-transfer-engine >= 0.3.8` ä¾èµ–ï¼Œä»¥æ»¡è¶³ KV è¿æ¥å™¨çš„åŠŸèƒ½éœ€æ±‚ã€‚

---

### [Bugfix] Fix NVFP4 TRTLLM MoE non-gated support; add gsm8k for Nemotron-3-Nano FP8+NVFP4 (#34725)
**SHA**: `caeb887` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/caeb887bf6332b74b229e90804fc6ab4f1361eda)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šæ–°å¢ä¸¤å¥— Nemotronâ€‘3â€‘Nano FP8/Fp4 MoE é…ç½®å¹¶åœ¨åˆ—è¡¨ä¸­åŠ å…¥ï¼›åœ¨ `flashinfer_fp4_moe.py` æ·»åŠ å¯¹ `hidden_dim` å¿…é¡»æ˜¯ 512 çš„å€æ•°çš„æ ¡éªŒï¼Œä»¥ä¿®å¤ NVFP4 TRTLLM MoE éé—¨æ§æ”¯æŒçš„ bugã€‚

---

### [CI][Bugfix] Fix multinode test script (#34820)
**SHA**: `6b3166a` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/6b3166a7c7b4274317ac1cb18a55d56f3f94077f)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šé…ç½®è°ƒæ•´  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨å¤šèŠ‚ç‚¹æµ‹è¯•è„šæœ¬ä¸­ï¼Œå»æ‰ `docker run` å‘½ä»¤é‡Œ `$GPU_DEVICES` çš„å¤šä½™å¼•å·ï¼Œä½¿ GPU è®¾å¤‡å‚æ•°èƒ½æ­£ç¡®ä¼ é€’ã€‚

---

### [CI] temporarily disable multi-node tests (#34825)
**SHA**: `25e2e13` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/vllm-project/vllm/commit/25e2e136ef33735039cf6632f8f7293be423f7ba)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šé…ç½®è°ƒæ•´  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `.buildkite/test_areas/distributed.yaml` ä¸­æ–°å¢ `optional: true`ï¼Œä¸´æ—¶å…³é—­å¤šèŠ‚ç‚¹æµ‹è¯•ï¼Œä»¥åº”å¯¹åŸºç¡€è®¾æ–½é—®é¢˜ï¼Œåç»­å°†æ¢å¤ã€‚

---


# æ¯æ—¥æ›´æ–°æŠ¥å‘Šï¼ˆ2026-02-13ï¼‰

## sgl-project/sglang

| æäº¤æ—¶é—´ | ä½œè€… | æäº¤ä¿¡æ¯ |
|----------|------|----------|
| 2026-02-13 23:43:57 | Qi Jia | [bugfix] fix mamba slot leak when scheduling fails with radix cache (#15840) (#16067) |
| 2026-02-13 23:18:17 | dongjiyingdjy | refactor context parallel state  (#17213) |
| 2026-02-13 22:29:22 | Linyu Wu | [Kernel Slimming] Migrate GPTQ-Marlin repack kernel to JIT (#18543) |
| 2026-02-13 22:11:20 | Mick | [diffusion] chore: use batched P2P ops in VAE parallel decoding (#18728) |
| 2026-02-13 21:59:39 | triple-mu | [diffusion] fix typo (#18790) |
| 2026-02-13 21:28:00 | Baizhou Zhang | [CI] Move `test_load_lora_from_tensor` test to H100 (#18797) |
| 2026-02-13 21:19:16 | R0CKSTAR | [diffusion] fix: webui task_type check (#18462) |
| 2026-02-13 21:18:02 | Mick | [diffusion] refactor: merge redundant default_dtype and param_dtype parameters in FSDP loader (#18789) |
| 2026-02-13 20:18:34 | Kaixi | Added cuda availability guard (#18480) |
| 2026-02-13 18:36:20 | Ke Bao | Cleanup debug log for Ring model (#18793) |
| 2026-02-13 18:08:57 | Ke Bao | Enhence gsm8k test (#18791) |
| 2026-02-13 18:06:23 | Ke Bao | Adjust mamba cache allocation (#18786) |
| 2026-02-13 17:44:42 | Ke Bao | Cleanup unused rerun stages (#18788) |
| 2026-02-13 17:19:16 | Yinghai Lu | [schedule] Fix streaming return of customized_info (#18654) |
| 2026-02-13 16:20:46 | Xinwei Qiang | [diffusion] feat: support SparseVideoGen2 attention backend (#17507) |
| 2026-02-13 16:09:15 | ant-yy | Support LingV2_5 model (#18598) |
| 2026-02-13 15:49:30 | Xiaoyu Zhang | [CI] Skip cutedsl gdn performance test in jit_kernel ci (#18783) |
| 2026-02-13 15:20:05 | Shangming Cai | [Bugfix] Add warnings when NSA indexer cache indice mismatch in PD module (#18727) |
| 2026-02-13 14:58:40 | Liangsheng Yin | Rename request timeout env vars for waiting/running stages (#18766) |
| 2026-02-13 13:04:29 | xiaoye | [diffusion] feat: support tp for qwen-image-edit-2511 (#18619) |
| 2026-02-13 12:58:34 | Liangsheng Yin | [Spec] Move forward timeout before verify to fix Eagle v1 filter mismatch (#18760) |
| 2026-02-13 12:41:25 | pansicheng | [Kernel] Add JIT rotary_embedding_kernel (#17934) |
| 2026-02-13 11:57:52 | Bhavneek Singh | [diffusion] fix: fixe local model loading issue in bench_serving (#18687) |
| 2026-02-13 11:56:20 | HuangJi | [diffusion] feat: allows quality adjustment of generated images/videos (#17937) |
| 2026-02-13 11:51:24 | Bingxu Chen | [diffusion] fix: fix ci on amd (#18716) |
| 2026-02-13 11:42:40 | BourneSun0527 | Modify glm5 readme on npu (#18768) |
| 2026-02-13 10:47:02 | shuwenn | feat: support release lookup (#18450) |
| 2026-02-13 10:41:41 | Lianmin Zheng | [Auto Sync] Update grok.py (20260213) (#18765) |
| 2026-02-13 09:15:16 | Lianmin Zheng | Revert changes to weight_utils.py (#18759) |
| 2026-02-13 08:44:34 | Alison Shao | Fix invalid import paths in glm_image.py (#18757) |
| 2026-02-13 08:26:05 | Lianmin Zheng | [Auto Sync] Update weight_utils.py (20260212) (#18692) |
| 2026-02-13 08:19:22 | Hao Jin | [Diffusion] [BUG] Fix missing initialization of GLM-Image text encoder config (#18704) |
| 2026-02-13 06:30:13 | HAI | Build ROCm7.2 Image with latest AITER v0.1.10.post3 (#18741) |
| 2026-02-13 01:21:35 | Shangming Cai | Reuse initialized transfer engine in mooncake store (#18460) |
| 2026-02-13 01:17:24 | Simo Lin | refactor: remove crate re-export aliases from lib.rs (#18737) |
| 2026-02-13 00:18:01 | Douglas Yang | fix: image version in pypi pr workflow (#18735) |

### ğŸ“Š ç»Ÿè®¡æ‘˜è¦
> æœ¬æ—¥å…± 36 ä¸ªæäº¤ | ğŸ”´é«˜ 6 | ğŸŸ¡ä¸­ 9 | ğŸŸ¢ä½ 21
## ğŸ“‹ ç›®å½•

- [sgl-project/sglang](#sgl-project-sglang)
  - [ğŸ“Š ç»Ÿè®¡æ‘˜è¦](#-ç»Ÿè®¡æ‘˜è¦)
  - [ğŸ”´ é«˜é‡è¦åº¦å˜æ›´ (6)](#-ğŸ”´-é«˜é‡è¦åº¦å˜æ›´-6)
    - [refactor context parallel state  (#17213)](#8b4c364)
    - [[Kernel Slimming] Migrate GPTQ-Marlin repack kernel to JI...](#0012d6a)
    - [[diffusion] feat: support SparseVideoGen2 attention backe...](#356e338)
    - [Support LingV2_5 model (#18598)](#d97eb11)
    - [feat: support release lookup (#18450)](#bc2405e)
    - [refactor: remove crate re-export aliases from lib.rs (#18...](#0236522)
  - [ğŸŸ¡ ä¸­é‡è¦åº¦å˜æ›´ (9)](#-ğŸŸ¡-ä¸­é‡è¦åº¦å˜æ›´-9)
    - [[diffusion] refactor: merge redundant default_dtype and p...](#efdd676)
    - [Rename request timeout env vars for waiting/running stage...](#e6f7a37)
    - [[diffusion] feat: support tp for qwen-image-edit-2511 (#1...](#5700b19)
    - [[Spec] Move forward timeout before verify to fix Eagle v1...](#d29e331)
    - [[Kernel] Add JIT rotary_embedding_kernel (#17934)](#7d4ae05)
    - [[diffusion] feat: allows quality adjustment of generated ...](#f4d80f9)
    - [[diffusion] fix: fix ci on amd (#18716)](#6555b2a)
    - [[Auto Sync] Update weight_utils.py (20260212) (#18692)](#9815ee9)
    - [fix: image version in pypi pr workflow (#18735)](#e730c72)
  - [ğŸŸ¢ ä½é‡è¦åº¦å˜æ›´ (21)](#-ğŸŸ¢-ä½é‡è¦åº¦å˜æ›´-21)
    - [[bugfix] fix mamba slot leak when scheduling fails with r...](#4c6afbe)
    - [[diffusion] chore: use batched P2P ops in VAE parallel de...](#3727340)
    - [[diffusion] fix typo (#18790)](#acc940d)
    - [[CI] Move `test_load_lora_from_tensor` test to H100 (#18797)](#9a32f8c)
    - [[diffusion] fix: webui task_type check (#18462)](#0763334)
    - [Added cuda availability guard (#18480)](#98ad284)
    - [Cleanup debug log for Ring model (#18793)](#a0ebaa6)
    - [Enhence gsm8k test (#18791)](#a9d5977)
    - [Adjust mamba cache allocation (#18786)](#eacab28)
    - [Cleanup unused rerun stages (#18788)](#a6c4b52)
    - [[schedule] Fix streaming return of customized_info (#18654)](#e4b2b57)
    - [[CI] Skip cutedsl gdn performance test in jit_kernel ci (...](#013a199)
    - [[Bugfix] Add warnings when NSA indexer cache indice misma...](#1f39bf6)
    - [[diffusion] fix: fixe local model loading issue in bench_...](#32e0286)
    - [Modify glm5 readme on npu (#18768)](#f65c885)
    - [[Auto Sync] Update grok.py (20260213) (#18765)](#c56a5ef)
    - [Revert changes to weight_utils.py (#18759)](#d5f66fe)
    - [Fix invalid import paths in glm_image.py (#18757)](#dd77bd4)
    - [[Diffusion] [BUG] Fix missing initialization of GLM-Image...](#b48fe1d)
    - [Build ROCm7.2 Image with latest AITER v0.1.10.post3 (#18741)](#f441747)
    - [Reuse initialized transfer engine in mooncake store (#18460)](#2a8a48c)
#### ğŸ”´ é«˜é‡è¦åº¦å˜æ›´ (6)

### refactor context parallel state  (#17213)
**SHA**: `8b4c364` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/8b4c364960e6cccecd72edcdf47f54d06f3623c4)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼ºï¼ˆæ–°å¢æ³¨æ„åŠ›ä¸Šä¸‹æ–‡å¹¶è¡Œ/ MoE æ•°æ®å¹¶è¡Œå¹¶å¯¹ç°æœ‰å¹¶è¡Œæ¡†æ¶è¿›è¡Œå¤§å¹…é‡æ„ï¼‰  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸ”´ é«˜  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
- åœ¨æœåŠ¡å™¨ CLI ä¸æ–‡æ¡£ä¸­åŠ å…¥ `--attention-context-parallel-size`ï¼ˆ`--attn-cp-size`ï¼‰ ä¸ `--moe-data-parallel-size`ï¼ˆ`--moe-dp-size`ï¼‰ä¸¤é¡¹æ–°å‚æ•°ã€‚  
- é‡æ„ `parallel_state`ï¼Œæ–°å»º **Attentionâ€‘Context Parallel (ATTN_CP)** ä¸ **MoEâ€‘Data Parallel (MOE_DP)** ä¸¤å¥— `GroupCoordinator`ï¼Œå¹¶æä¾›å¯¹åº”çš„ getter / rank / worldâ€‘size æ¥å£ã€‚  
- ç»Ÿä¸€å¹¶æ‰©å±•äº† DPâ€‘Attentionã€è°ƒåº¦å™¨ã€æ¨¡å‹å·¥ä½œè¿›ç¨‹ã€é€šä¿¡å±‚ã€é‡‡æ ·å±‚ç­‰å¤šå¤„å®ç°ï¼Œä»¥åœ¨è®¡ç®—å›¾ä¸­ä½¿ç”¨ `attn_cp`ã€`moe_dp` è¿›è¡Œåˆ‡åˆ†ã€Gather/Reduceâ€‘Scatterã€å¹¿æ’­ç­‰é€šä¿¡ã€‚  
- æ›´æ–°äº† DeepSeekâ€‘V3.2 ç¤ºä¾‹ã€æ–‡æ¡£ã€å•å…ƒæµ‹è¯•ä»¥åŠå¤šä¸ªæ¨ç†/è‰ç¨¿ worker çš„æ„é€ ç­¾åï¼Œä½¿å…¶èƒ½å¤Ÿæ„ŸçŸ¥å¹¶ä½¿ç”¨æ–°çš„å¹¶è¡Œç»´åº¦ã€‚  
- å¢åŠ äº†é’ˆå¯¹æ–°å¹¶è¡Œæ¨¡å¼çš„æµ‹è¯• `test_parallel_state.py`ï¼ŒéªŒè¯åœ¨ 8â€‘GPU åœºæ™¯ä¸‹ `TPã€ATTN_CPã€MOE_EPã€MOE_DP` ç»„çš„æ­£ç¡®æ„é€ ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- `sglang/srt/distributed/parallel_state.py`ï¼ˆæ ¸å¿ƒå¹¶è¡Œç»„åˆ›å»ºï¼‰  
- `sglang/srt/server_args.py`ï¼ˆCLI å‚æ•°è§£æï¼‰  
- æ‰€æœ‰ä¾èµ–æ³¨æ„åŠ›å¹¶è¡Œå¤§å°çš„æ¨¡å—ï¼š`dp_attention.py`ã€`communicator.py`ã€`communicator_nsa_cp.py`ã€`layers/attention/nsa/*`ã€`layers/dp_attention.py`ã€`speculative/*`ã€`managers/*`ã€`tp_worker.py` ç­‰ã€‚  
- æ–‡æ¡£ `docs/advanced_features/server_arguments.md`ã€`docs/basic_usage/deepseek_v32.md`ã€‚  
- æµ‹è¯• `test/registered/distributed/test_parallel_state.py` ä¸ç›¸å…³ DeepSeekâ€‘V3.2 CP ç¤ºä¾‹ã€‚  

---

## ğŸ” æŠ€æœ¯æ´å¯Ÿ

| ç»´åº¦ | å½±å“ |
|------|------|
| **æ¶æ„å½±å“** | - å¼•å…¥ä¸¤å±‚æ–°çš„å¹¶è¡Œç»´åº¦ **ATTN_CP**ï¼ˆä¸Šä¸‹æ–‡åˆ‡åˆ†ï¼‰ ä¸ **MOE_DP**ï¼ˆMoE æ•°æ®åˆ‡åˆ†ï¼‰ï¼Œå½¢æˆ â€œå…¨å±€ TP â†’ DP â†’ CP â†’ TPï¼ˆæœ€ç»†ï¼‰â€ ä¸ â€œå…¨å±€ TP â†’ MOE_DP â†’ EP â†’ TPâ€ çš„å±‚çº§ç»“æ„ã€‚<br>- é€šè¿‡ `GroupCoordinator` æŠŠè¿™äº›ç»´åº¦æŠ½è±¡ä¸ºç‹¬ç«‹é€šä¿¡ç»„ï¼Œä½¿å¾—åŸæœ‰çš„ `TP`ã€`DP`ã€`PP` ä»ä¿æŒå‘åå…¼å®¹ï¼ˆé»˜è®¤ `size=1`ï¼‰ã€‚<br>- å¤šæ•°ä¸šåŠ¡é€»è¾‘ï¼ˆè°ƒåº¦ã€æ¨¡å‹è¿è¡Œã€é‡‡æ ·ã€ç¼“å­˜ï¼‰ç°åœ¨éœ€è¦åŒæ—¶è€ƒè™‘ `attn_cp_rank/size` ä¸ `moe_dp_rank/size`ï¼Œå¯¼è‡´ä»£ç è·¯å¾„æ˜¾è‘—å¢åŠ ã€‚ |
| **æ€§èƒ½å½±å“** | - **æ½œåœ¨æ”¶ç›Š**ï¼šåœ¨è¶…é•¿ä¸Šä¸‹æ–‡æˆ–å¤§æ¨¡å‹çš„å‰ç½®ï¼ˆprefillï¼‰é˜¶æ®µï¼Œåºåˆ—åˆ‡åˆ†ï¼ˆCPï¼‰å¯ä»¥å°† KVâ€‘cache åˆ†æ‘Šåˆ°æ›´å¤š GPUï¼Œé™ä½å•å¡æ˜¾å­˜å‹åŠ›å¹¶æå‡ååã€‚MoEâ€‘DP åŒç†ï¼Œå¯å°†ä¸“å®¶è·¯ç”±çš„æ¿€æ´»åˆ†æ•£ã€‚<br>- **å¼€é”€**ï¼šæ¯å±‚ CP/DP å¼•å…¥ä¸€æ¬¡ **Allâ€‘Gather** ä¸ **Reduceâ€‘Scatter**ï¼ˆç”± `attn_cp_*`ã€`moe_dp_*` å®ç°ï¼‰ï¼Œåœ¨ç½‘ç»œä¸ä½³æˆ–è·¨èŠ‚ç‚¹æ—¶å¯¼è‡´é¢å¤–åŒæ­¥å»¶è¿Ÿã€‚<br>- **è°ƒåº¦ç²’åº¦**ï¼šè°ƒåº¦å™¨åœ¨ `recv_requests`ã€`run_scheduler_process` ä¸­é¢å¤–æ£€æŸ¥ `attn_cp_rank`ï¼Œè‹¥ CP>1 ä¼šåœ¨æ¯ä¸ª CP ç»„å†…éƒ¨å†æ¬¡å¹¿æ’­å·¥ä½œè¯·æ±‚ï¼Œå¢åŠ  CPUâ€‘CPU/CPUâ€‘GPU é€šä¿¡æ¬¡æ•°ã€‚ |
| **å®‰å…¨è€ƒè™‘** | - æ— ç›´æ¥å®‰å…¨é£é™©ï¼ˆä¸æ¶‰åŠå¤–éƒ¨è¾“å…¥çš„éªŒè¯æˆ–åŠ å¯†ï¼‰ã€‚<br>- éœ€è¦ç¡®ä¿å‚æ•°æ ¡éªŒé€»è¾‘ï¼ˆ`_handle_context_parallelism`ï¼‰åœ¨ `ServerArgs.__post_init__` ä¸­è¶³å¤Ÿä¸¥æ ¼ï¼Œé˜²æ­¢éæ³•ç»„åˆï¼ˆå¦‚ `PP>1` ä¸ `attn_cp>1` åŒæ—¶å‡ºç°ï¼‰å¯¼è‡´ä¸å¯é¢„æµ‹çš„è¿›ç¨‹æŒ‚æ‰ï¼Œè¿›è€Œè§¦å‘æœåŠ¡ä¸å¯ç”¨ã€‚ |
| **å¯ç»´æŠ¤æ€§** | - ä»£ç é‡æ¿€å¢ï¼ˆçº¦ 850 è¡Œæ–°å¢ / 118 è¡Œåˆ é™¤ï¼‰ï¼Œæ¶‰åŠå¤§é‡è·¨æ–‡ä»¶çš„æ¥å£è¿ç§»ã€‚<br>- æ–°å¢çš„ getter ç³»åˆ—ï¼ˆ`get_attn_*`ã€`get_moe_*`ï¼‰åˆ†æ•£åœ¨ä¸åŒæ¨¡å—ï¼Œè‹¥åç»­æ”¹åŠ¨éœ€è¦åŒæ­¥æ›´æ–°å¤šå¤„ã€‚<br>- å•å…ƒæµ‹è¯•è¦†ç›–ä»…é™ç»„æ„é€ ï¼Œä¸šåŠ¡å±‚é¢çš„æ­£ç¡®æ€§ï¼ˆå¦‚ KVâ€‘cache é‡ç»„ã€æ—¥å¿—æ¦‚ç‡å¯¹é½ï¼‰ä»ç¼ºå°‘**ç«¯åˆ°ç«¯**éªŒè¯ã€‚ |

---

## âš ï¸ æ½œåœ¨é£é™©

| é£é™©ç‚¹ | å¯èƒ½åæœ | è§¦å‘æ¡ä»¶ |
|--------|----------|----------|
| **Rank è®¡ç®—é”™è¯¯** | äº¤å‰é€šä¿¡é”™ä½å¯¼è‡´æ­»é”ã€æ¢¯åº¦é”™ä¹±æˆ–ç”Ÿæˆç»“æœé”™è¯¯ã€‚ | å‚æ•° `attn_cp_size`ã€`moe_dp_size` ä¸ `tp_size`ã€`dp_size`ã€`ep_size` ä¸åŒ¹é…æˆ–é…ç½®ä¸æ»¡è¶³ `assert` æ¡ä»¶ã€‚ |
| **è·¨èŠ‚ç‚¹ç½‘ç»œç“¶é¢ˆ** | CP/DP Allâ€‘Gather é¢‘ç¹è§¦å‘ç½‘ç»œæ‹¥å¡ï¼Œååä¸‹é™ç”šè‡³è¶…æ—¶ã€‚ | å¤šèŠ‚ç‚¹éƒ¨ç½²ä¸”ç½‘ç»œå¸¦å®½/å»¶è¿Ÿä¸è¾¾æ ‡ï¼ˆå°¤å…¶åœ¨ `attn_cp_size>1` æ—¶ï¼‰ã€‚ |
| **å‘åå…¼å®¹æ€§** | æ—§è„šæœ¬ä¸å¸¦ `--attn-cp-size`/`--moe-dp-size` ä»è¿è¡Œï¼Œä½†å†…éƒ¨ä»ä¼šåˆ›å»ºé»˜è®¤ `size=1` ç»„ï¼Œç†è®ºå®‰å…¨ï¼›ä½†è‹¥è€ä»£ç æ‰‹åŠ¨ç¡¬ç¼–ç  `tp_size`/`dp_size` è®¡ç®—ï¼Œä¼šäº§ç”Ÿä¸ä¸€è‡´ã€‚ | ä½¿ç”¨è‡ªå®šä¹‰è„šæœ¬æˆ–ç¬¬ä¸‰æ–¹å·¥å…·ç›´æ¥è¯»å– `ServerArgs` é‡Œçš„ `tp_size` ç­‰å­—æ®µã€‚ |
| **è°ƒåº¦å™¨åˆ†æ”¯æ¼å†™** | æŸäº›è·¯å¾„ä»ä»…æ£€æŸ¥ `attn_tp_rank==0` è€Œæœªè€ƒè™‘ `attn_cp_rank`ï¼Œå¯¼è‡´è¯·æ±‚åœ¨ CP ç»„å†…éƒ¨æœªæ­£ç¡®å¹¿æ’­ã€‚ | æ–°å¢çš„ CP ä»£ç æœªè¦†ç›–æ‰€æœ‰ `recv_requests`ã€`init_ipc_channels`ã€`maybe_init_draft_worker` ç­‰å…¥å£ã€‚ |
| **èµ„æºæ³„éœ²** | æ–°å¢çš„ `GroupCoordinator` æœªåœ¨å¼‚å¸¸è·¯å¾„ä¸‹é”€æ¯ï¼Œå¯èƒ½å¯¼è‡´ NCCL/torch åˆ†å¸ƒå¼èµ„æºæ®‹ç•™ã€‚ | `initialize_model_parallel` æŠ›å¼‚å¸¸åæœªè°ƒç”¨ `destroy_model_parallel`ã€‚ |
| **æµ‹è¯•ä¸å®Œæ•´** | åªéªŒè¯äº†ç»„åˆ’åˆ†ï¼Œæœªè¦†ç›–ç‰¹æ®Šç»„åˆï¼ˆ`PP+CP`ã€`DP+MoE_DP` ç­‰ï¼‰ï¼Œå¯èƒ½åœ¨å®é™…ç”Ÿäº§ä¸­å‡ºç°éšè— bugã€‚ | ç”Ÿäº§ç¯å¢ƒå¼€å¯ `pipeline` æˆ–æ··åˆä½¿ç”¨ `dp_attention` ä¸ `moe_dp`ã€‚ |

---

## ğŸ’¡ å…³æ³¨å»ºè®®

| å¯¹è±¡ | å»ºè®® |
|------|------|
| **å¼€å‘è€…** | 1. **ç»Ÿä¸€æ ¡éªŒ**ï¼šåœ¨ `ServerArgs.__post_init__` ä¸­åŠ å…¥æ›´ç»†ç²’åº¦çš„æ£€æŸ¥ï¼ˆå¦‚ `pp_size==1` ä¸ `attn_cp_size>1`ã€`ep_size>1` ä¸ `moe_dp_size` çš„å…³ç³»ï¼‰ï¼Œå¹¶åœ¨ CLI å¸®åŠ©ä¸­æ˜ç¡®ä¸æ”¯æŒçš„ç»„åˆã€‚<br>2. **æŠ½è±¡å°è£…**ï¼šæŠŠ `attn_*` ä¸ `moe_*` çš„ rank/size è®¡ç®—å°è£…ä¸ºç‹¬ç«‹å·¥å…·å‡½æ•°ï¼Œé¿å…åœ¨æ¯ä¸ªæ¨¡å—é‡å¤å®ç°ã€‚<br>3. **å¼‚å¸¸å®‰å…¨**ï¼šç¡®ä¿åœ¨ `initialize_model_parallel` ä»»ä½•é˜¶æ®µæŠ›å¼‚å¸¸æ—¶è°ƒç”¨ `destroy_model_parallel`ï¼Œæˆ–ä½¿ç”¨ `try/f

---

### [Kernel Slimming] Migrate GPTQ-Marlin repack kernel to JIT (#18543)
**SHA**: `0012d6a` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/0012d6a4ebff8d87c5f9f99c295f85d3b69bf1e7)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º / æ€§èƒ½ä¼˜åŒ–  

**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸ”´é«˜  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
1. å°†åŸæœ‰çš„ GPTQâ€‘Marlinâ€¯repack å†…æ ¸ä» AOTï¼ˆAheadâ€‘ofâ€‘Timeï¼‰è¿ç§»ä¸º JITï¼ˆJustâ€‘inâ€‘Timeï¼‰å®ç°ï¼Œå¹¶æä¾› `sglang.jit_kernel.gptq_marlin_repack` ç»Ÿä¸€å…¥å£ã€‚  
2. æ–°å¢ JIT ç¼–è¯‘å™¨åŒ…è£…ã€åŸºå‡†æµ‹è¯•è„šæœ¬ä»¥åŠå®Œæ•´çš„å•å…ƒæµ‹è¯•ï¼Œç¡®ä¿ JIT ä¸ AOT äº§å‡º **é€ä½ä¸€è‡´**ã€‚  
3. é¡¹ç›®å†…éƒ¨è‹¥å¹²é‡åŒ–ç›¸å…³æ¨¡å—æ”¹ä¸ºä½¿ç”¨æ–°çš„ JIT æ¥å£ï¼Œè¿›ä¸€æ­¥å®ç° **Kernel Slimming**ï¼ˆå‡å°é¢„ç¼–è¯‘äºŒè¿›åˆ¶ä½“ç§¯ï¼‰ï¼Œå¹¶åœ¨ CI ç¯å¢ƒä¸‹è‡ªåŠ¨è·‘æ­£ç¡®æ€§ä¸æ€§èƒ½åŸºå‡†ã€‚

---

### ğŸ¯ å½±å“èŒƒå›´
- **æ ¸å¿ƒè®¡ç®—å±‚**ï¼š`sglang/jit_kernel/gptq_marlin_repack.py`ã€`sglang/jit_kernel/csrc/gemm/marlin/gptq_marlin_repack.cuh`ã€`sglang/jit_kernel/benchmark/bench_gptq_marlin_repack.py`ã€‚  
- **é‡åŒ–å®ç°**ï¼š`sglang/srt/layers/quantization/compressed_tensors/schemes/compressed_tensors_wNa16.py`ã€`sglang/srt/layers/quantization/gptq.py`ã€`sglang/srt/layers/quantization/marlin_utils_fp8.py`ã€‚  
- **æµ‹è¯•ä½“ç³»**ï¼š`sglang/jit_kernel/tests/test_gptq_marlin_repack.py`ã€‚  
- **ä¾èµ–å…¥å£**ï¼š`sglang/jit_kernel/utils.py`ï¼ˆç¼“å­˜ & åŠ¨æ€åŠ è½½ï¼‰ï¼Œå¯¹å¤–æš´éœ²çš„ `gptq_marlin_repack` å‡½æ•°ã€‚

---

### ğŸ” æŠ€æœ¯æ´å¯Ÿ

| ç»´åº¦ | å½±å“åˆ†æ |
|------|----------|
| **æ¶æ„å½±å“** | - å¼•å…¥ **JIT ç¼–è¯‘å±‚**ï¼šåœ¨è¿è¡Œæ—¶é€šè¿‡ `load_jit` ç¼–è¯‘ CUDA æºæ–‡ä»¶ï¼Œç”Ÿæˆ `Module` å¯¹è±¡ï¼Œéšåç›´æ¥è°ƒç”¨ `module.gptq_marlin_repack`ã€‚<br>- é€šè¿‡ `cache_once` å®ç° **ä¸€æ¬¡ç¼–è¯‘ç¼“å­˜**ï¼Œé¿å…é‡å¤ç¼–è¯‘å¼€é”€ã€‚<br>- é€šè¿‡ `CALL_IF_REPACK` å®åœ¨è¿è¡Œæ—¶æ ¹æ® `num_bits` ä¸ `has_perm` åŠ¨æ€é€‰æ‹©ç‰¹åŒ– kernelï¼Œä¿æŒä¸åŸ AOT å®ç°ç›¸åŒçš„æ¨¡æ¿åŒ–ç»“æ„ã€‚<br>- ä»£ç è·¯å¾„ä¿æŒå‘åå…¼å®¹ï¼šè‹¥ AOT ä»å¯ç”¨ï¼ŒåŸºå‡†è„šæœ¬ä¼šå¹¶è¡Œå¯¹æ¯”ä¸¤è€…ã€‚ |
| **æ€§èƒ½å½±å“** | - **è®¡ç®—è·¯å¾„** ä¸ AOT å®Œå…¨ç›¸åŒï¼ˆç›¸åŒçš„ CUDA kernel å®ç°ï¼‰ï¼Œå•å…ƒæµ‹è¯•å·²éªŒè¯ **bitâ€‘wise identical**ï¼Œå› æ­¤ç†è®ºä¸Šæ€§èƒ½æ— å·®å¼‚ã€‚<br>- **é¦–æ¬¡è°ƒç”¨** éœ€è¦ JIT ç¼–è¯‘ï¼ˆçº¦ 100â€‘300â€¯msï¼Œå–å†³äºæœºå™¨ï¼‰ï¼Œéšåè¿è¡Œæ—¶å¼€é”€ä¸ AOT æŒå¹³ã€‚<br>- æ–°å¢ **benchmark è„šæœ¬** ç”¨äºæµ‹é‡ä¸åŒ `size_k` ä¸‹çš„ååï¼Œå¸®åŠ©å›¢é˜Ÿè¯„ä¼° JIT ä¸ AOT çš„å®é™…å·®è·ã€‚ |
| **å®‰å…¨è€ƒè™‘** | - åŠ¨æ€ç¼–è¯‘ä»…ä½¿ç”¨é¡¹ç›®å†…éƒ¨å—ä¿¡ä»»çš„ `.cuh` æºç ï¼Œæœªå¼•å…¥å¤–éƒ¨ä»£ç æ‰§è¡Œï¼Œå®‰å…¨é£é™©æä½ã€‚<br>- ä»éœ€ç¡®ä¿ **CUDAâ€‘Toolkit** ç‰ˆæœ¬åŒ¹é…ï¼ˆ>= 11.0ï¼‰ä»¥åŠ **GPU Compute Capability â‰¥ 8.0**ï¼Œå¦åˆ™ kernel ä¼šåœ¨ç¼–è¯‘é˜¶æ®µæŠ¥é”™æˆ–åœ¨è¿è¡Œæ—¶è¿”å›ç©ºå®ç°ã€‚ |
| **å¯ç»´æŠ¤æ€§** | - å°† kernel å®ç°ä¸ Python åŒ…ç»‘å®šçš„æ–¹å¼ä» **é™æ€é“¾æ¥ AOT** æ”¹ä¸º **ç»Ÿä¸€ JIT æ¥å£**ï¼Œé™ä½äºŒè¿›åˆ¶ä½“ç§¯ï¼ˆKernel Slimmingï¼‰ï¼Œå¯¹ CI é•œåƒã€Docker é•œåƒæ›´å‹å¥½ã€‚<br>- é€šè¿‡ `cache_once` ä¸ç»Ÿä¸€å…¥å£æŠ½è±¡ï¼Œåç»­æ–°å¢æˆ–ä¿®æ”¹ kernel æ—¶åªéœ€ä¿®æ”¹å¯¹åº” `.cuh` ä¸åŒ…è£…å±‚ï¼Œæ— éœ€é‡æ–°æ„å»ºå®Œæ•´ C++/CUDA åŒ…ã€‚ |
| **å…¼å®¹æ€§** | - ä»ä¿ç•™ AOT è·¯å¾„ï¼ˆ`sgl_kernel.gptq_marlin_repack`ï¼‰ï¼Œåœ¨ç¯å¢ƒç¼ºå¤± JIT ç¼–è¯‘é“¾æˆ–åœ¨æ—§ GPU ä¸Šä»å¯å›é€€ã€‚<br>- å¯¹å¤– API æœªå˜æ›´ï¼š`gptq_marlin_repack(b_q_weight, perm, size_k, size_n, num_bits)` ä»ç„¶è¿”å›åŒå½¢çŠ¶å¼ é‡ã€‚ |

---

### âš ï¸ æ½œåœ¨é£é™©
1. **è¿è¡Œæ—¶ç¼–è¯‘ä¾èµ–**ï¼šå¦‚æœç›®æ ‡æœºå™¨æœªå®‰è£…åŒ¹é…çš„ CUDA Toolkitï¼ˆ`nvcc`ï¼‰ï¼ŒJIT ä¼šå¤±æ•ˆï¼Œå¯¼è‡´è¿è¡Œæ—¶ `ImportError` æˆ– `RuntimeError`ã€‚  
2. **GPU å…¼å®¹æ€§**ï¼škernel åœ¨ `__CUDA_ARCH__ < 800` ç›´æ¥ `return`ï¼Œåœ¨ä½äº Ampereï¼ˆSM 8.0ï¼‰çš„ GPU ä¸Šä¼šç›´æ¥è¿”å›ç©ºç»“æœï¼Œå¯èƒ½å¯¼è‡´åç»­ç®—å­æŠ¥é”™ã€‚  
3. **é¦–æ¬¡åŠ è½½æ—¶å»¶**ï¼šåœ¨é«˜å¹¶å‘æœåŠ¡ä¸­ï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ä¼šäº§ç”Ÿç¼–è¯‘å»¶è¿Ÿï¼Œè‹¥æœªæå‰çƒ­èº«å¯èƒ½å½±å“ SLAã€‚  
4. **å…±äº«å†…å­˜ä¸Šé™**ï¼š`max_shared_mem` å–è‡ª `cudaDevAttrMaxSharedMemoryPerBlockOptin`ï¼Œä½†ä¸åŒæ˜¾å¡å¯¹ `optin` å¤§å°ä¸åŒï¼Œè‹¥æœªæ¥ä¿®æ”¹ kernel å‚æ•°å¯¼è‡´å…±äº«å†…å­˜éœ€æ±‚è¶…å‡ºä¸Šé™ï¼Œå°†è§¦å‘ `RuntimeCheck` å¤±è´¥ã€‚  
5. **ç¯å¢ƒå˜é‡å†²çª**ï¼š`IS_CI` åˆ¤æ–­ä¾èµ– `CI`/`GITHUB_ACTIONS`ï¼Œåœ¨æœ¬åœ°æ‰‹åŠ¨å¼€å¯ CI ç¯å¢ƒå˜é‡å¯èƒ½è¯¯è§¦å‘åŸºå‡†è„šæœ¬è¡Œä¸ºã€‚  

---

### ğŸ’¡ å…³æ³¨å»ºè®®
- **éƒ¨ç½²å‰æ£€æŸ¥**ï¼šåœ¨å¯åŠ¨è„šæœ¬ä¸­åŠ å…¥å¯¹ `nvcc --version` ä¸ `torch.cuda.get_device_capability()` çš„æ£€æµ‹ï¼Œè‹¥ä¸æ»¡è¶³ `>=8.0`ï¼Œæç¤ºä½¿ç”¨ AOT åŒ…æˆ–å›é€€è‡³ CPU å®ç°ã€‚  
- **çƒ­èº«ç­–ç•¥**ï¼šåœ¨æœåŠ¡åˆå§‹åŒ–é˜¶æ®µæå‰è°ƒç”¨ä¸€æ¬¡ `gptq_marlin_repack`ï¼ˆå¯ä½¿ç”¨æå°è§„æ¨¡çš„ dummy tensorï¼‰ï¼Œè®© JIT å®Œæˆç¼–è¯‘ï¼Œé¿å…é¦–æ¬¡è¯·æ±‚çš„ç¼–è¯‘å»¶è¿Ÿã€‚  
- **CI å¼ºåŒ–**ï¼šå°† `bench_gptq_marlin_repack.py` çº³å…¥ CIï¼Œç¡®ä¿æ¯æ¬¡æäº¤å JIT ä¸ AOT ç»“æœä¸€è‡´ä¸”æ€§èƒ½æœªå‡ºç°å¼‚å¸¸å›å½’ã€‚  
- **æ–‡æ¡£æ›´æ–°**ï¼šåœ¨é¡¹ç›® README ä¸éƒ¨ç½²æ‰‹å†Œä¸­æ˜ç¡®æ ‡æ³¨ **â€œéœ€è¦ CUDA Toolkit 11.x+ ä¸ Compute Capability â‰¥ 8.0 çš„æ˜¾å¡â€**ï¼Œå¹¶è¯´æ˜å¯é€šè¿‡ç¯å¢ƒå˜é‡ `SGLANG_JIT_DISABLE=1` å¼ºåˆ¶ä½¿ç”¨ AOTï¼ˆå¦‚æœ‰æ­¤éœ€æ±‚ï¼‰ã€‚  
- **ç›‘æ§å…±äº«å†…å­˜**ï¼šåœ¨ç”Ÿäº§ç¯å¢ƒåŠ å…¥æ˜¾å¡å±æ€§é‡‡é›†ï¼ˆ`max_shared_mem

---

### [diffusion] feat: support SparseVideoGen2 attention backend (#17507)
**SHA**: `356e338` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/356e33860792d65aa42fce0d8f64b68e86a33b98)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º  

**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸ”´é«˜  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
æœ¬æ¬¡æäº¤ä¸º SGLang å¼•å…¥äº† **Sparse Video Gen 2 (SVG2) Attention** åç«¯ï¼Œå®ç°äº†åŸºäº kâ€‘means èšç±»å’ŒåŠ¨æ€ç¨€ç–å—çš„æ³¨æ„åŠ›è®¡ç®—ã€‚ä»£ç å±‚é¢æ–°å¢äº†æšä¸¾ã€å…ƒæ•°æ®ç»“æ„ã€å®ç°ç±»ä»¥åŠå¹³å°é€‰æ‹©é€»è¾‘ï¼Œå¹¶åœ¨æ–‡æ¡£ã€æ¨¡å‹å…¼å®¹è¡¨ã€é…ç½®æ–‡ä»¶ä¸­å®Œæˆé…å¥—è¯´æ˜ã€‚è¯¥åç«¯ä»…åœ¨è‡ªæ³¨æ„åŠ›ï¼ˆselfâ€‘attentionï¼‰åœºæ™¯ä¸‹å¯ç”¨ï¼Œäº¤å‰æ³¨æ„åŠ›è‡ªåŠ¨é™çº§ä¸ºå·²æœ‰åç«¯ã€‚

**ğŸ¯ å½±å“èŒƒå›´**  
- `sglang.multimodal_gen.runtime.layers.attention.backends.sparse_video_gen_2_attn`ï¼ˆæ ¸å¿ƒå®ç°ï¼‰  
- `sglang.multimodal_gen.runtime.platforms`ï¼ˆåç«¯æšä¸¾ã€å¹³å°æ£€æµ‹ï¼‰  
- `sglang.multimodal_gen.runtime.pipelines_core.stages.denoising`ï¼ˆå…ƒæ•°æ®æ„é€ ï¼‰  
- `sglang.multimodal_gen.runtime.models.dits.wanvideo`ï¼ˆè·¨/è‡ªæ³¨æ„åŠ›åç«¯è¿‡æ»¤ï¼‰  
- æ–‡æ¡£ `compatibility_matrix.md`ã€`attention_backends.md`  

**ğŸ” æŠ€æœ¯æ´å¯Ÿ**  

- **æ¶æ„å½±å“**  
  - **æ–°å¢åç«¯æŠ½è±¡å±‚**ï¼šå®ç°äº† `SparseVideoGen2AttentionBackend`ã€å¯¹åº”çš„ `AttentionImpl`ã€`AttentionMetadata` ä¸ `Builder`ï¼Œå®Œæ•´åµŒå…¥ç°æœ‰æ³¨æ„åŠ›æ¡†æ¶ã€‚  
  - **å±‚ç¼“å­˜æœºåˆ¶**ï¼š`Svg2Cache` ä¸ `Svg2LayerCache` è´Ÿè´£åœ¨ä¸åŒå±‚ä¹‹é—´å¤ç”¨ kâ€‘means è´¨å¿ƒï¼Œä¿æŒè·¨è¿­ä»£çš„çŠ¶æ€ä¸€è‡´æ€§ã€‚  
  - **å¹³å°æ£€æµ‹æ‰©å±•**ï¼šåœ¨ `cuda.py` ä¸­åŠ å…¥åŠ¨æ€å¯¼å…¥é€»è¾‘ï¼Œè‹¥ `svg` åŒ…ç¼ºå¤±åˆ™æŠ›å‡ºæ˜ç¡®é”™è¯¯ï¼Œä¿æŒå‘åå…¼å®¹ã€‚  
  - **åç«¯å…¼å®¹è¡¨æ›´æ–°**ï¼šæ–‡æ¡£ä¸­è®°å½•äº†å“ªäº›æ¨¡å‹æ”¯æŒ SVG2ï¼Œæ˜ç¡®è·¨æ³¨æ„åŠ›ä¸æ”¯æŒå¹¶è‡ªåŠ¨é™çº§ã€‚  

- **æ€§èƒ½å½±å“**  
  - **è®¡ç®—å‹ç¼©**ï¼šé€šè¿‡ `batch_kmeans_Euclid` è¿›è¡ŒæŸ¥è¯¢/é”®çš„èšç±»å¹¶ç”Ÿæˆç¨€ç–å—ï¼Œéšåè°ƒç”¨ `dynamic_block_sparse_fwd_flashinfer`ï¼ˆåŸºäº FlashInferï¼‰å®Œæˆç¨€ç–æ³¨æ„åŠ›è®¡ç®—ï¼Œç†è®ºä¸Šåœ¨é•¿è§†é¢‘åºåˆ—ï¼ˆ> 1024 tokenï¼‰ä¸Šæ˜¾è‘—é™ä½æ˜¾å­˜å ç”¨ä¸ FLOPsã€‚  
  - **åˆå§‹åŒ–å¼€é”€**ï¼šé¦–æ¬¡è¿›å…¥å±‚ä¼šè¿›è¡Œä¸€æ¬¡å®Œæ•´çš„ kâ€‘meansï¼ˆ`kmeans_iter_init`ï¼‰ï¼Œä»¥åŠ `zero_step_kmeans_init` é€‰é¡¹çš„é¢å¤–å‰ç½®èšç±»ï¼Œå¯èƒ½å¯¼è‡´å‰å‡ ä¸ªç”Ÿæˆæ­¥éª¤çš„å»¶è¿Ÿã€‚  
  - **è‡ª/äº¤å‰æ³¨æ„åŠ›åˆ†æµ**ï¼šäº¤å‰æ³¨æ„åŠ›è‡ªåŠ¨å‰”é™¤ SVG2ï¼Œé¿å…å› ä¸æ”¯æŒå¯¼è‡´çš„é”™è¯¯ï¼Œä½†ä¹Ÿæ„å‘³ç€åœ¨æŸäº›æ¨¡å‹ä¸Šæ•´ä½“åŠ é€Ÿå—é™äºäº¤å‰æ³¨æ„åŠ›çš„åç«¯ã€‚  

- **å®‰å…¨è€ƒè™‘**  
  - **ç¬¬ä¸‰æ–¹ä¾èµ–**ï¼šæ–°å¢å¯¹ `svg`ï¼ˆSparseâ€‘VideoGenï¼‰é¡¹ç›®çš„å¼ºä¾èµ–ï¼ŒåŠ è½½æ—¶æ‰§è¡Œ Triton kernel ä¸ kâ€‘means å®ç°ã€‚è‹¥æºç è¢«ç¯¡æ”¹æˆ–åˆ†å‘æ¸ é“ä¸å¯ä¿¡ï¼Œå¯èƒ½å¼•å…¥ä¾›åº”é“¾é£é™©ã€‚  
  - **è¾“å…¥æ ¡éªŒ**ï¼šåç«¯åœ¨ `__init__` ä¸­æ£€æŸ¥ `causal=False`ï¼Œåœ¨å…ƒæ•°æ®æ„é€ é˜¶æ®µå¼ºåˆ¶æä¾› `timestep_value` ä¸ `timesteps`ï¼Œé˜²æ­¢ç©ºæŒ‡é’ˆæˆ–ç»´åº¦ä¸åŒ¹é…å¯¼è‡´çš„å¼‚å¸¸ã€‚æ•´ä½“æœªå‘ç°æ˜æ˜¾çš„ä»£ç æ³¨å…¥æˆ–ç¼“å†²åŒºé£é™©ã€‚  

**âš ï¸ æ½œåœ¨é£é™©**  

1. **ä¾èµ–ç¼ºå¤±æˆ–ä¸å…¼å®¹**  
   - æœªå®‰è£… `svg` åŒ…æˆ– Triton ç‰ˆæœ¬ä¸åŒ¹é…ä¼šåœ¨è¿è¡Œæ—¶æŠ› `ImportError`ï¼Œå¯¼è‡´æ•´ä¸ª pipeline å¤±æ•ˆã€‚  
2. **å†…å­˜å³°å€¼æ³¢åŠ¨**  
   - `Svg2Cache` åœ¨æ¯å±‚ä¿å­˜è´¨å¿ƒå¼ é‡ï¼ˆ`[num_heads, centroid, dim]`ï¼‰ï¼Œåœ¨å¤§æ¨¡å‹ï¼ˆ14Bï¼‰å’Œå¤š GPU ç¯å¢ƒä¸‹å¯èƒ½å¯¼è‡´æ˜¾å­˜ç•¥å¢ã€‚  
3. **èšç±»ä¸æ”¶æ•›**  
   - kâ€‘means è¿­ä»£æ¬¡æ•°ä¸è¶³æˆ–åˆå§‹åŒ–ä¸ä½³å¯èƒ½äº§ç”Ÿä½è´¨é‡ç¨€ç–å›¾ï¼Œå¯¼è‡´ç”Ÿæˆè´¨é‡ä¸‹é™æˆ–å‡ºç°æ•°å€¼ä¸ç¨³å®šï¼ˆNaNï¼‰é—®é¢˜ã€‚  
4. **è·¨æ³¨æ„åŠ›é™çº§**  
   - è‡ªåŠ¨ç§»é™¤ SVG2 äºäº¤å‰æ³¨æ„åŠ›ï¼Œè‹¥ç”¨æˆ·æ˜¾å¼åªä¿ç•™è¯¥åç«¯ä¼šæ”¶åˆ°è­¦å‘Šå¹¶å›é€€ä¸ºé»˜è®¤åç«¯ï¼Œå¯èƒ½å¼•èµ·æ„æ–™ä¹‹å¤–çš„æ€§èƒ½å›é€€ã€‚  
5. **è°ƒåº¦å†²çª**  
   - `torch.backends.cuda.preferred_linalg_library` è¢«ä¸´æ—¶åˆ‡æ¢ä¸º `magma`ï¼Œè‹¥å…¶ä»–çº¿ç¨‹ä¾èµ–é»˜è®¤åº“ï¼Œå¯èƒ½äº§ç”Ÿçº¿ç¨‹å®‰å…¨æˆ–æ€§èƒ½ä¸ä¸€è‡´çš„å‰¯ä½œç”¨ã€‚  

**ğŸ’¡ å…³æ³¨å»ºè®®**  

- **ä¾èµ–ç®¡ç†**ï¼šåœ¨é¡¹ç›®çš„ `requirements.txt` æˆ– `environment.yml` ä¸­æ˜¾å¼æ·»åŠ  `svg`ï¼ˆåŠå…¶ Triton ä¾èµ–ï¼‰åŠå…¶ç‰ˆæœ¬çº¦æŸï¼Œæä¾›ä¸€é”®å®‰è£…è„šæœ¬ã€‚  
- **å›é€€æœºåˆ¶**ï¼šåœ¨å¹³å°æ£€æµ‹ (`cuda.py`) ä¸­è‹¥å¯¼å…¥å¤±è´¥ï¼Œå»ºè®®è¿”å› `None` å¹¶åœ¨ä¸Šå±‚è°ƒç”¨å¤„è‡ªåŠ¨å›é€€åˆ° `VIDEO_SPARSE_ATTN` æˆ– `TORCH_SDPA`ï¼Œé¿å…ç¡¬æ€§å´©æºƒã€‚  
- **ç›‘æ§ä¸ Profiling**ï¼šåœ¨ç”Ÿæˆé˜¶æ®µè®°å½• `first_layers_fp`ã€`first_times_fp` å¯¹åº”çš„å®é™…æ‰§è¡Œè·¯å¾„ï¼Œå¸®åŠ©ç”¨æˆ·è°ƒå‚ï¼Œç¡®è®¤ç¨€ç–å—æ˜¯å¦çœŸæ­£ç”Ÿæ•ˆã€‚  
- **å•å…ƒ/é›†æˆæµ‹è¯•**ï¼šæ–°å¢é’ˆå¯¹ `SparseVideoGen2AttentionBackend` çš„å¯¹æ¯”åŸºå‡†æµ‹è¯•ï¼ˆå…¨æ³¨æ„åŠ› vs ç¨€ç–æ³¨æ„åŠ›ï¼‰ï¼Œè¦†ç›–ä¸åŒ `num_q_centroids`ã€`num_k_centroids`ã€`patch_size` åœºæ™¯ã€‚  
- **æ–‡æ¡£å®Œå–„**ï¼šåœ¨ `attention_backends.md` ä¸­è¡¥å…… **â€œè·¨æ³¨æ„åŠ›ä¸æ”¯æŒâ€** çš„è¯´æ˜ï¼Œæä¾›ç¤ºä¾‹ä»£ç æ¼”ç¤ºå¦‚ä½•åœ¨ `supported_attention_backends` ä¸­æ’é™¤ SVG2ã€‚  
- **å®‰å…¨å®¡è®¡**ï¼šå¯¹ `svg` é¡¹ç›®è¿›è¡Œç¬¬ä¸‰æ–¹å®‰å…¨å®¡è®¡æˆ–ç­¾åæ ¡éªŒï¼Œç¡®ä¿ä¸è¢«æ¶æ„ä»£ç ç¯¡æ”¹ã€‚  
- **èµ„æºæ¸…ç†**ï¼šåœ¨ pipeline ç»“æŸæˆ–å¼‚å¸¸é€€å‡ºæ—¶ï¼Œæ˜¾å¼é‡Šæ”¾ `Svg2Cache` ä¸­çš„å¼ é‡ï¼Œé˜²æ­¢æ˜¾å­˜æ³„æ¼ã€‚  

é€šè¿‡ä»¥ä¸Šæªæ–½ï¼Œå¯åœ¨ä¿è¯æ–°ç¨€ç–æ³¨æ„åŠ›å¸¦æ¥æ˜¾è‘—æ€§èƒ½æ”¶ç›Šçš„åŒæ—¶ï¼Œé™ä½ä¾èµ–ã€å†…å­˜ä¸ç¨³å®šæ€§é£é™©ï¼Œæå‡æ•´ä½“ç³»ç»Ÿçš„å¯ç»´æŠ¤æ€§ä¸ç”¨æˆ·ä½“éªŒã€‚

---

### Support LingV2_5 model (#18598)
**SHA**: `d97eb11` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/d97eb111a368f8f19d0d5aac9b89cdd2243daed3)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º / æ¶æ„å˜æ›´ / æ€§èƒ½ä¼˜åŒ–  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸ”´é«˜  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
- ä¸º **LingV2_5 (BailingMoeV2_5)** æ¨¡å‹æ–°å¢å®Œæ•´çš„é…ç½®ã€æƒé‡åŠ è½½ä¸æ¨ç†å®ç°ã€‚  
- å¼•å…¥ **BailingHybridConfig**ï¼ˆæ··åˆå…¨æ³¨æ„åŠ› + çº¿æ€§æ³¨æ„åŠ›ï¼‰ï¼Œå¹¶åœ¨ `__init__.py` ä¸­å¯¼å‡ºã€‚  
- æ–°å¢ **LightningAttentionBackend**ï¼Œå®ç°åŸºäº *Lightning*ï¼ˆçº¿æ€§ï¼‰æ³¨æ„åŠ›çš„ Triton åŠ é€Ÿè·¯å¾„ï¼ˆåŒ…æ‹¬ `lightning_attention`, `linear_decode_forward_triton` ç­‰ï¼‰ã€‚  
- å®ç° **BailingMoELinear** ç³»åˆ—ï¼ˆdecoder layerã€æ¨¡å‹ã€ForCausalLMï¼‰ä»¥åŠå¯¹åº”çš„å…ƒæ•°æ®ç»“æ„ `BailingLinearMetadata`ã€`seg_la`ã€`seg_la_fwd`ã€‚  
- åœ¨ `ModelRunner`ã€`ModelRunnerKVCacheMixin`ã€`server_args`ã€`eagle_worker` ä¸­åŠ å…¥å¯¹æ–°æ¨¡å‹/åç«¯çš„è¯†åˆ«ä¸è°ƒåº¦é€»è¾‘ã€‚  
- æ›´æ–° HFâ€‘config æ³¨å†Œè¡¨ï¼Œç¡®ä¿ `transformers.from_pretrained` èƒ½è§£ææ–°æ¨¡å‹ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- **æ¨¡å‹åŠ è½½å±‚**ï¼š`sglang.srt.configs.*`, `sglang.srt.models.*`, `sglang.srt.model_executor.*`  
- **æ³¨æ„åŠ›åç«¯**ï¼š`sglang.srt.layers.attention.attention_registry`, `sglang.srt.layers.attention.hybrid_linear_attn_backend`, æ–°å¢ `lightning_attention_backend`ã€`linear` å­ç›®å½•ã€‚  
- **æ¨ç†è°ƒåº¦**ï¼š`sglang.srt.server_args`, `sglang.srt.speculative.eagle_worker`.  
- **å·¥å…·é“¾**ï¼šHFâ€‘config æ³¨å†Œã€æƒé‡æ˜ å°„ã€ç¼“å­˜åˆå§‹åŒ–ã€‚  

---

## ğŸ” æŠ€æœ¯æ´å¯Ÿ  

| ç»´åº¦ | å½±å“ | è¯´æ˜ |
|------|------|------|
| **æ¶æ„å½±å“** | **æ–°å¢æ··åˆæ¨¡å‹åˆ†æ”¯** | é€šè¿‡ `BailingHybridConfig`ï¼Œæ¨¡å‹å¯ä»¥åœ¨åŒä¸€å±‚ä¸­é€‰æ‹©å…¨æ³¨æ„åŠ›æˆ–çº¿æ€§æ³¨æ„åŠ›ï¼ˆ`HybridLayerType`ï¼‰ï¼Œå¹¶åœ¨ `ModelRunner` ä¸­æä¾› `hybrid_lightning_config` è®¿é—®ã€‚<br>`LightningAttentionBackend` å°†çº¿æ€§æ³¨æ„åŠ›ä¸ç°æœ‰ Mamba/Hybrid GDN åç«¯ç»Ÿä¸€è°ƒåº¦ï¼Œä½¿å¾—åŒä¸€ `ModelRunner` èƒ½æ ¹æ®å±‚å±æ€§åŠ¨æ€åˆ‡æ¢ã€‚ |
| **æ€§èƒ½å½±å“** | **æ½œåœ¨æ˜¾è‘—æå‡** | - **LightningAttention** é‡‡ç”¨å—ç¨€ç–+ç¼“å­˜ç´¯ç§¯ç®—æ³•ï¼Œç†è®ºä¸Š O(N) â†’ O(N/B)ï¼ˆBâ‰ˆ256ï¼‰ä¸”å†…å­˜å ç”¨ä»…ä¸º KV ç¼“å­˜çš„ 1/`BLOCK`ï¼Œå¯¹é•¿åºåˆ—ï¼ˆ>32kï¼‰è§£ç é€Ÿåº¦å¯æå‡ 1.5â€‘3Ã—ã€‚<br>- Triton å®ç°é¿å…äº† FlashAttention çš„ `softmax` è®¡ç®—ï¼Œåˆ©ç”¨æŒ‡æ•°è¡°å‡ (`decay_scale`) è¿›è¡Œé€’æ¨ï¼Œå‡å°‘å…¨å±€å½’çº¦ã€‚<br>- å¯¹ GPUâ€‘graph çš„å…¼å®¹æ€§ä¿æŒä¸å˜ï¼Œä»…åœ¨ `decode` è·¯å¾„å¯æ•è·ï¼Œå¯ç»§ç»­å—ç›Šäº CUDAâ€‘Graph çš„ä½å¼€é”€ã€‚ |
| **å†…å­˜å ç”¨** | **ç•¥å¢** | é™¤äº†åŸæœ‰ KV ç¼“å­˜å¤–ï¼Œè¿˜é¢å¤–ç»´æŠ¤ **KVâ€‘history**ï¼ˆ`kv_history`ï¼‰ä¸ **SegLA å…ƒæ•°æ®** (`BailingLinearMetadata`)ï¼›åœ¨é¢„å¡«é˜¶æ®µä¼šå¯¹æ¯ä¸ª block ä¿å­˜ `kv` **outerâ€‘product**ï¼ˆ`dÃ—e`ï¼‰çš„ä¸­é—´ç»“æœã€‚å¯¹ 1â€‘2â€¯GB æ˜¾å­˜çš„æœºå™¨ï¼Œä»åœ¨å¯æ¥å—èŒƒå›´ï¼Œä½†åœ¨æ˜¾å­˜ç´§å¼ çš„éƒ¨ç½²éœ€è¦è¯„ä¼°ã€‚ |
| **å…¼å®¹æ€§** | **å‘åå…¼å®¹** | æ—§æ¨¡å‹ï¼ˆAfmoeã€ChatGLMã€Qwen ç­‰ï¼‰ä»èµ°åŸæœ‰ `HybridGDNBackend` æˆ– `MambaAttnBackend`ã€‚`attention_backend_wrapper` åœ¨æ£€æµ‹ `runner.hybrid_lightning_config` å‰å…ˆæ£€æŸ¥ `runner.kimi_linear_config`ï¼Œä¸å½±å“æ—§ä»£ç è·¯å¾„ã€‚ |
| **å®‰å…¨è€ƒè™‘** | **æ— ç›´æ¥é£é™©** | ä»£ç ä»…åœ¨æ¨ç†é˜¶æ®µè¯»å–æ¨¡å‹æƒé‡ã€æ‰§è¡Œæ•°å€¼è®¡ç®—ï¼Œæ— ç½‘ç»œäº¤äº’æˆ–æ–‡ä»¶å†™å…¥ã€‚å”¯ä¸€éœ€å…³æ³¨çš„å®‰å…¨ç‚¹æ˜¯ **Trition kernel å‚æ•°**ï¼ˆ`BLOCK`, `CBLOCK`ï¼‰çš„è¾¹ç•Œæ£€æŸ¥ï¼›ç›®å‰å·²ä½¿ç”¨ mask é˜²æ­¢è¶Šç•Œè¯»å–ã€‚ |
| **è®¾å¤‡è¦æ±‚** | **Compute Capability â‰¥ 80** | `lightning_attention` æ˜ç¡®åœ¨ `forward` ä¸­æ£€æŸ¥ `torch.cuda.get_device_capability()`ï¼›ä¸æ”¯æŒä½äº Ampereï¼ˆSM 80ï¼‰çš„ GPUã€‚å¯¹äº CPU / NPUï¼Œä»èµ°åŸæœ‰åç«¯ã€‚ |
| **å¯ç»´æŠ¤æ€§** | **ä»£ç ä½“é‡å¤§å¹…å¢åŠ ** | - æ–°å¢æ–‡ä»¶è¶…è¿‡ 3â€¯k è¡Œï¼ˆåŒ…æ‹¬å¤§é‡ Triton kernelï¼‰ï¼Œå¢åŠ é¡¹ç›®çš„å­¦ä¹ æ›²çº¿ã€‚<br>- å…ƒæ•°æ®æŠ½è±¡ (`BailingLinearMetadata`) ä¸å¤šåˆ†æ”¯åç«¯çš„è€¦åˆåº¦æå‡ï¼ŒåæœŸè‹¥éœ€ä¿®æ”¹è°ƒåº¦é€»è¾‘ï¼Œéœ€è¦åŒæ­¥æ›´æ–°å¤šä¸ªæ–‡ä»¶ã€‚<br>- æƒé‡åŠ è½½ä¸­å¯¹ AWQ / FP8 / INT8 çš„ä¸åŒåˆ†æ”¯é€»è¾‘å¾ˆå¤æ‚ï¼Œå»ºè®®æŠ½å–ç»Ÿä¸€çš„ â€œé‡åŒ–åå¤„ç†â€ å·¥å…·å‡½æ•°ã€‚ |
| **å¯æµ‹è¯•æ€§** | **ç¼ºå°‘å•å…ƒ/é›†æˆæµ‹è¯•** | å½“å‰ PR æœªé™„å¸¦ä¸“é—¨çš„æµ‹è¯•ç”¨ä¾‹ã€‚å»ºè®®åœ¨ CI ä¸­åŠ å…¥ï¼š <br>1. **çŸ­åºåˆ—**ï¼ˆ< 512ï¼‰ä¸ **é•¿åºåˆ—**ï¼ˆ> 32kï¼‰ä¸¤ç§åœºæ™¯çš„æ­£ç¡®æ€§å¯¹æ¯”ï¼ˆä¸åŸ `HybridGDNBackend` ç»“æœå¯¹é½ï¼‰ã€‚<br>2. **ä¸åŒ GPU æ¶æ„**ï¼ˆSM80ã€SM90ï¼‰å’Œ **CPU** å…¼å®¹æ€§æ ¡éªŒã€‚ |
| **é”™è¯¯å¤„ç†** | **å¼‚å¸¸ä¿¡æ¯æœ‰é™** | `LightningAttentionBackend.__init__` åªåœ¨ä¸æ”¯æŒçš„é…ç½® `assert` æŠ›å¼‚å¸¸ï¼›è‹¥åœ¨ä¸æ”¯æŒçš„ç¡¬ä»¶ä¸Šè°ƒç”¨ä¼šç›´æ¥è§¦å‘ AssertionErrorï¼Œå»ºè®®æ”¹ä¸º `raise RuntimeError` å¹¶ç»™å‡ºæ˜ç¡®é”™è¯¯æŒ‡å¼•ã€‚ |

---

## âš ï¸ æ½œåœ¨é£é™©  

| é£é™© | åœºæ™¯ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| **ç¡¬ä»¶ä¸å…¼å®¹** | ä½¿ç”¨ Compute Capability < 80ï¼ˆå¦‚ GTX 1080ï¼‰ | `RuntimeError` åœ¨ Triton kernel åˆå§‹åŒ–æ—¶æŠ›å‡ºï¼Œå¯¼è‡´æœåŠ¡å¯åŠ¨å¤±è´¥ | åœ¨ `ServerArgs._handle_model_specific_adjustments` ä¸­æ£€æµ‹æ¨¡å‹å±æ€§ï¼Œè‡ªåŠ¨å›é€€åˆ° `HybridGDNBackend`ï¼›æä¾› `--force-lightning-attn` ä¹‹ç±»çš„å¼€å…³ç»™ç”¨æˆ·æ‰‹åŠ¨æ§åˆ¶ã€‚ |
| **æ˜¾å­˜æ³„æ¼** | é•¿æ–‡æœ¬æ¨ç†ï¼ˆ> 64kï¼‰+å¤šå¹¶å‘è¯·æ±‚ | KVâ€‘history æœªåŠæ—¶é‡Šæ”¾å¯¼è‡´ OOM | åœ¨ `LightningAttentionBackend.forward_extend` ç»“æŸåæ‰‹åŠ¨æ¸…ç† `metadata` ä¸­çš„ä¸´æ—¶å¼ é‡ï¼›åœ¨ `ModelRunner` çš„ `release_kv_cache` ä¸­åŠ å…¥å¯¹ `kv_history` çš„åŒæ­¥ `torch.cuda.empty_cache()`ã€‚ |
| **æ•°å€¼è¯¯å·®** | ä½¿ç”¨ FP8/FP16 é‡åŒ–æƒé‡ + LightningAttention çš„æŒ‡æ•°è¡°å‡ | å¯èƒ½å‡ºç°æ¢¯åº¦/æ¦‚ç‡æ¼‚ç§»ï¼Œå¯¼è‡´ç”Ÿæˆç»“æœè´¨é‡ä¸‹é™ | åœ¨ `post_load_weights` ä¸­å¯¹ `kv` æƒé‡è¿›è¡Œ **reâ€‘quant**ï¼ˆå·²æœ‰ `requant_weight_ue8m0_inplace`ï¼‰ï¼Œä½†åº”åœ¨ `LightningAttentionBackend` ä¸­åŠ å…¥ `torch.float32` ä¸­é—´ç´¯ç§¯ï¼Œé¿å…ç´¯è®¡è¯¯å·®ã€‚ |
| **å¹¶å‘å›¾æ•è·å†²çª** | å¤šè¯·æ±‚å…±äº«åŒä¸€ CUDAâ€‘Graph æ•è·çš„ `decode` è·¯å¾„ | è‹¥åœ¨æ•è·æœŸé—´å‡ºç° `extend`ï¼ˆéœ€è·‘ `forward_extend`ï¼‰ä¼šè§¦å‘ `RuntimeError` | æ˜ç¡®åœ¨ `ModelRunner.can_run_piecewise_cuda_graph` ä¸­æ’é™¤ `HybridLightning`ï¼ˆå·²åŠ å…¥ï¼‰ï¼Œå¹¶åœ¨ `eagle_worker` ä¸­å¯¹ `speculative` åˆ†æ”¯åšåŒæ ·é™åˆ¶ã€‚ |
| **Triton kernel è¾¹ç•Œ bug** | è¾“å…¥é•¿åº¦ä¸æ˜¯ `BLOCK` æ•´æ•°å€ï¼Œ`_fwd_diag_kernel`ã€`_fwd_kv_parallel` çš„ mask å¯èƒ½ä¸å®Œæ•´ | äº§ç”Ÿ NaN/Inf è¾“å‡ºï¼Œå°¤å…¶åœ¨ `torch.ops.sgl_kernel` ä½å±‚è°ƒç”¨æ—¶éš¾ä»¥è¿½è¸ª | å·²ä½¿ç”¨ `mask` å‚æ•°åœ¨ load/storeï¼›ä»å»ºè®®åœ¨ `triton.jit` ä¸­åŠ å…¥ `assert` æ£€æŸ¥ `n < N`ï¼Œå¹¶åœ¨ Python wrapper ä¸­å¯¹ `seq_len` åš `ceil(N/BLOCK)*BLOCK` è¡¥é›¶ã€‚ |
| **

---

### feat: support release lookup (#18450)
**SHA**: `bc2405e` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/bc2405e6c18a47c6457d9834358c441c21d965bc)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º  

**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸ”´é«˜  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
1. åœ¨ `release-docs.yml` CI å·¥ä½œæµä¸­åŠ å…¥å¯¹ `release` äº‹ä»¶çš„ç›‘å¬ï¼Œå¹¶åœ¨å‘å¸ƒæ—¶å®Œæ•´æŠ“å– Git å†å²ï¼Œä»¥ç”Ÿæˆ `release_lookup/release_index.json`ã€‚  
2. æ–°å¢ã€ŒSGLang Release Lookupã€å·¥å…·ï¼šåŒ…æ‹¬ç”Ÿæˆç´¢å¼•çš„ Python è„šæœ¬ `generate_index.py`ã€å±•ç¤ºé¡µé¢ `index.html`ã€ä½¿ç”¨è¯´æ˜ `README.md` ä¸é¢„ç”Ÿæˆçš„ç©º JSON ç¤ºä¾‹ã€‚  
3. åœ¨å‘å¸ƒæ–‡æ¡£æ„å»ºé˜¶æ®µï¼Œå°†è¯¥å·¥å…·åŠç”Ÿæˆçš„ç´¢å¼•æ–‡ä»¶ä¸€èµ·å¤åˆ¶åˆ°å®˜æ–¹æ–‡æ¡£ç«™ç‚¹çš„ `release_lookup/` ç›®å½•ï¼Œå®ç°æµè§ˆå™¨ç«¯ç¦»çº¿æŸ¥è¯¢ç‰¹å®š PR/commit é¦–æ¬¡å‡ºç°çš„å‘å¸ƒç‰ˆæœ¬ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- CI/CDï¼š`.github/workflows/release-docs.yml`ï¼ˆå‘å¸ƒæµç¨‹ï¼‰  
- æ–‡æ¡£ç«™ç‚¹ï¼š`docs/release_lookup/` åŠå…¶åœ¨ `sgl-project.github.io` çš„å‘å¸ƒäº§å‡º  
- ç”Ÿæˆè„šæœ¬ï¼š`docs/release_lookup/generate_index.py`ï¼ˆä¾èµ– Gitã€Pythonï¼‰  
- å‰ç«¯ UIï¼š`docs/release_lookup/index.html`ï¼ˆçº¯å‰ç«¯ï¼‰  

**ğŸ” æŠ€æœ¯æ´å¯Ÿ**  

- **æ¶æ„å½±å“**  
  - **æ–°å¢ç‹¬ç«‹å­ç³»ç»Ÿ**ï¼šRelease Lookup å®Œå…¨åœ¨æµè§ˆå™¨ç«¯è¿è¡Œï¼Œæ— éœ€åç«¯æœåŠ¡ï¼Œå±äºæ–‡æ¡£å±‚é¢çš„å¢é‡åŠŸèƒ½ï¼Œå¯¹æ ¸å¿ƒ SGLang ä»£ç åº“æ²¡æœ‰ä¾µå…¥æ€§ã€‚  
  - **CI æµç¨‹åˆ†æ”¯**ï¼šå·¥ä½œæµåœ¨ `release` äº‹ä»¶æ—¶é¢å¤–æ‰§è¡Œ `git fetch --unshallow` ä¸ç´¢å¼•ç”Ÿæˆè„šæœ¬ï¼Œä»ä¿æŒå¯¹æ™®é€š `push` çš„è½»é‡çº§æ„å»ºã€‚  
  - **æ–‡æ¡£å‘å¸ƒç­–ç•¥**ï¼šå¯¹ `sgl-project.github.io` çš„æ–‡ä»¶åˆ é™¤é€»è¾‘åšäº†æ¡ä»¶åˆ†æ”¯ï¼Œç¡®ä¿ä»…åœ¨æ­£å¼å‘å¸ƒæ—¶ä¿ç•™ `release_lookup`ï¼Œé¿å…éå‘å¸ƒæ„å»ºæ—¶å¼•å…¥ä¸å¿…è¦çš„æ–‡ä»¶ã€‚  

- **æ€§èƒ½å½±å“**  
  - **CI è€—æ—¶**ï¼šå®Œæ•´æŠ“å– Git å†å²ï¼ˆ`--unshallow`ï¼‰ä»¥åŠéå†æ‰€æœ‰æ ‡ç­¾ã€æäº¤çš„ `generate_index.py` åœ¨å¤§å‹ä»“åº“ä¸­å¯èƒ½è€—è´¹ 30â€¯s~2â€¯min å·¦å³ï¼Œå¯¼è‡´å‘å¸ƒæµæ°´çº¿å˜æ…¢ã€‚  
  - **ç´¢å¼•ä½“ç§¯**ï¼šç”Ÿæˆçš„ `release_index.json` çº¦å‡ ç™¾ KBï¼ˆå–å†³äºå†å²é•¿åº¦ï¼‰ï¼Œå¯¹ GitHub Pages çš„ä¸‹è½½æ—¶é—´åŸºæœ¬å¯æ¥å—ï¼Œä½†åœ¨ä½é€Ÿç½‘ç»œç¯å¢ƒä¸‹ä»ä¼šæœ‰è½»å¾®æ„ŸçŸ¥ã€‚  
  - **å‰ç«¯æŸ¥è¯¢**ï¼šä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾å®ç°åŸºäºå‰ç¼€çš„çŸ­å“ˆå¸ŒåŒ¹é…ï¼ŒæŸ¥è¯¢æ—¶é—´ä¸º O(logâ€¯N)ï¼ˆN ä¸º commit æ¡ç›®æ•°ï¼‰ï¼Œå¯¹æ™®é€šæµè§ˆå™¨äº¤äº’å½±å“å¯å¿½ç•¥ã€‚  

- **å®‰å…¨è€ƒè™‘**  
  - **Git å‘½ä»¤æ‰§è¡Œ**ï¼šè„šæœ¬åœ¨ CI ç¯å¢ƒä¸­è¿è¡Œï¼Œä½¿ç”¨ `subprocess.check_output` ç›´æ¥è°ƒç”¨ `git`ï¼Œä½†ä»…è¯»å–ä»“åº“å†å²ï¼Œä¸æ¶‰åŠå¤–éƒ¨è¾“å…¥ï¼Œé£é™©æä½ã€‚  
  - **JSON æš´éœ²**ï¼š`release_index.json` åŒ…å«å®Œæ•´çš„æäº¤ SHA ä¸å¯¹åº”æ ‡ç­¾ç´¢å¼•ï¼Œå±äºå…¬å¼€çš„ä»“åº“ä¿¡æ¯ï¼Œæ— æ•æ„Ÿæ•°æ®æ³„æ¼é£é™©ã€‚  
  - **å‰ç«¯æ¸²æŸ“**ï¼šæ‰€æœ‰æ•°æ®å‡é€šè¿‡ `textContent` æ³¨å…¥ DOMï¼Œé¿å… XSSï¼›ä½¿ç”¨ `fetch` åŠ è½½æœ¬åœ° JSONï¼Œå®‰å…¨ç­‰çº§ç¬¦åˆé™æ€ç«™ç‚¹çš„ CSP è¦æ±‚ã€‚  

**âš ï¸ æ½œåœ¨é£é™©**  

1. **CI è¶…æ—¶æˆ–èµ„æºå ç”¨**  
   - åœ¨é«˜å¹¶å‘çš„å‘å¸ƒåœºæ™¯ä¸‹ï¼Œå®Œæ•´å†å²æŠ“å–å’Œç´¢å¼•ç”Ÿæˆå¯èƒ½å¯¼è‡´ GitHub Actions è¶…æ—¶ï¼ˆé»˜è®¤ 6â€¯hï¼‰æˆ–å ç”¨è¿‡å¤š CPUã€‚  
2. **çŸ­å“ˆå¸Œå†²çª**  
   - è„šæœ¬é»˜è®¤ä½¿ç”¨ 8 ä½çŸ­å“ˆå¸Œã€‚è‹¥ä»“åº“å†å²è¶³å¤Ÿå¤§å‡ºç°å†²çªï¼Œè„šæœ¬ä¼šå¼ºåˆ¶é€€å‡ºã€‚æœªé¢„ç•™è‡ªåŠ¨å¢é•¿é€»è¾‘ï¼Œéœ€æ‰‹åŠ¨ä¿®æ”¹ `SHORT_HASH_LEN`ã€‚  
3. **ç´¢å¼•ä¸å®Œæ•´**  
   - è‹¥åœ¨ç”Ÿæˆç´¢å¼•å‰æœ‰æœªæ¨é€çš„æ ‡ç­¾æˆ–å°å¹…å›æ»šçš„æäº¤ï¼Œç”Ÿæˆçš„ JSON å¯èƒ½æ¼æ‰æœ€æ–°çš„å‘å¸ƒä¿¡æ¯ã€‚  
4. **æ–‡æ¡£ç«™ç‚¹åŒæ­¥é”™è¯¯**  
   - æ¡ä»¶åˆ é™¤è¯­å¥è‹¥è¯¯åˆ¤ï¼ˆå¦‚ `github.event_name` ä¸º `push`ï¼‰ï¼Œå¯èƒ½åœ¨éå‘å¸ƒæ„å»ºä¸­è¯¯åˆ  `release_lookup` ç›®å½•ï¼Œå¯¼è‡´æ–‡æ¡£ç«™ç‚¹ç¼ºå¤±è¯¥åŠŸèƒ½ã€‚  

**ğŸ’¡ å…³æ³¨å»ºè®®**  

- **CI ç¨³å®šæ€§**  
  - ä¸º `generate_index.py` æ·»åŠ è¶…æ—¶æ§åˆ¶æˆ–åˆ†æ‰¹å†™å…¥ï¼Œé˜²æ­¢æ•´ä¸ªå·¥ä½œæµå› å•æ¬¡ç”Ÿæˆè€—æ—¶è¿‡é•¿è€Œè¢«ä¸­æ–­ã€‚  
  - åœ¨å·¥ä½œæµä¸­åŠ å…¥ç¼“å­˜æ­¥éª¤ï¼ˆ`actions/cache`ï¼‰ä¿å­˜ Git å¯¹è±¡åº“ï¼Œä»¥å…æ¯æ¬¡éƒ½é‡æ–° `--unshallow`ã€‚  

- **å†²çªå¤„ç†**  
  - å°† `SHORT_HASH_LEN` è®¾ä¸ºå¯é…ç½®å‚æ•°ï¼Œå¹¶åœ¨è„šæœ¬å¯åŠ¨æ—¶æ£€æµ‹å†²çªåè‡ªåŠ¨é€’å¢é•¿åº¦ï¼Œé™ä½äººå·¥å¹²é¢„æˆæœ¬ã€‚  

- **ç´¢å¼•æ›´æ–°éªŒè¯**  
  - åœ¨ CI ä¸­åŠ å…¥åç½®æ£€æŸ¥ï¼šå¯¹æ¯”æ–°ç”Ÿæˆçš„ `release_index.json` è¡Œæ•°æˆ–å“ˆå¸Œè¦†ç›–ç‡ï¼Œè‹¥å¼‚å¸¸åˆ™å‘å‡ºè­¦å‘Šæˆ–é˜»æ­¢å‘å¸ƒã€‚  

- **æ–‡æ¡£å‘å¸ƒç­–ç•¥**  
  - å°† `release_lookup` ç›®å½•çš„åˆ é™¤é€»è¾‘æŠ½è±¡ä¸ºä¸€ä¸ªç‹¬ç«‹æ­¥éª¤æˆ–è„šæœ¬ï¼Œç¡®ä¿æ¡ä»¶åˆ¤æ–­ï¼ˆ`release` vs `push`ï¼‰å•ä¸€è´£ä»»ï¼Œé™ä½è¯¯åˆ é£é™©ã€‚  
  - åœ¨ `sgl-project.github.io` ä»“åº“çš„ CI ä¸­å¯¹ `release_lookup` ç›®å½•åšä¸€æ¬¡å®Œæ•´æ€§æ ¡éªŒï¼ˆæ–‡ä»¶æ˜¯å¦å­˜åœ¨ã€JSON æ˜¯å¦å¯è§£æï¼‰ï¼Œæå‰æ•è·åŒæ­¥é”™è¯¯ã€‚  

- **ç”¨æˆ·æŒ‡å¼•**  
  - åœ¨ `README.md` ä¸­æ˜ç¡®è¯´æ˜ç´¢å¼•ç”Ÿæˆæ‰€éœ€çš„å®Œæ•´å†å²ä»¥åŠåœ¨æœ¬åœ°ä½¿ç”¨æ—¶çš„æµè§ˆå™¨å…¼å®¹æ€§ï¼ˆChrome/Firefox æ”¯æŒ `file://` fetchï¼‰ï¼Œæå‡ä½“éªŒã€‚  

é€šè¿‡ä¸Šè¿°å…³æ³¨ç‚¹çš„ä¼˜åŒ–ï¼Œå¯è¿›ä¸€æ­¥æå‡è¯¥åŠŸèƒ½çš„å¯é æ€§ã€å‘å¸ƒé€Ÿåº¦ä»¥åŠä½¿ç”¨å®‰å…¨æ€§ã€‚ç¥å‘å¸ƒé¡ºåˆ© ğŸš€

---

### refactor: remove crate re-export aliases from lib.rs (#18737)
**SHA**: `0236522` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/023652221421d006e7234f0f080fd640ea155a18)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šé‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸ”´é«˜  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
æœ¬æ¬¡æäº¤å½»åº•ç§»é™¤ `sgl-model-gateway` çš„ crateâ€‘reâ€‘export åˆ«åï¼Œæ‰€æœ‰å†…éƒ¨ä»£ç ä» `smg::...` æ”¹ä¸ºç›´æ¥ä½¿ç”¨åŸå§‹ crate å (`smg_grpc_client`ã€`smg_mcp`ã€`smg_mesh`ã€`wfaas` ç­‰)ã€‚å¯¹åº”çš„ `lib.rs` ä¹Ÿä¸å†é‡æ–°å¯¼å‡ºè¿™äº›ä¾èµ–ã€‚æ­¤ä¸¾è®©æ¨¡å—é—´çš„ä¾èµ–å…³ç³»æ›´æ˜¾å¼ï¼Œæ¶ˆé™¤äº†åŸå…ˆçš„â€œè½¬å‘å±‚â€ã€‚

**ğŸ¯ å½±å“èŒƒå›´**  
- `sgl-model-gateway` æ ¸å¿ƒæ¨¡å—ï¼ˆ`core/*`ï¼‰  
- æ‰€æœ‰ gRPCã€OpenAIã€Harmonyã€Mesh ç›¸å…³è·¯ç”±å®ç°  
- è®¿é—®æ¨¡å‹ç½‘æ ¼ã€MCPã€æ•°æ®è¿æ¥å™¨çš„æ­¥éª¤ä¸å·¥ä½œæµ (`steps/*`)  
- ä¸šåŠ¡å±‚çš„ `app_context`ã€`config`ã€`worker_registry`ã€`policies`ã€`router`ã€`server` ç­‰å…¥å£æ–‡ä»¶  
- ç»‘å®šå±‚ï¼ˆGoâ€‘Bindingsï¼‰ä»¥åŠåŸºå‡†æµ‹è¯•æ–‡ä»¶  
- å•å…ƒ/é›†æˆæµ‹è¯•ä»£ç   

**ğŸ” æŠ€æœ¯æ´å¯Ÿ**  

- **æ¶æ„å½±å“**  
  - **ä¾èµ–æ˜¾å¼åŒ–**ï¼šåŸå…ˆé€šè¿‡ `sgl-model-gateway::smg` è¿›è¡Œçš„â€œç»Ÿä¸€å…¥å£â€è¢«å–æ¶ˆï¼Œæ‰€æœ‰æ¨¡å—å¿…é¡»æ˜¾å¼å£°æ˜å¤–éƒ¨ crate ä¾èµ–ï¼Œæå‡äº†ä¾èµ–å¯è¿½æº¯æ€§ã€‚  
  - **å…¬å…± API æ”¶æ•›**ï¼š`lib.rs` ç§»é™¤ `pub use smg_*` å¯¼å‡ºåï¼Œå¤–éƒ¨ä½¿ç”¨è€…è‹¥ä»é€šè¿‡ `sgl-model-gateway::smg_*` è®¿é—®ï¼Œå°†å‡ºç°ç¼–è¯‘é”™è¯¯ï¼Œéœ€è¿ç§»åˆ°æ–°è·¯å¾„ã€‚  
  - **æ¨¡å—è§£è€¦**ï¼šå·¥ä½œæµã€MCPã€Meshã€gRPC å®¢æˆ·ç«¯ç­‰ä¸å†é€šè¿‡ä¸­é—´å±‚è½¬å‘ï¼Œä½¿å¾—å•ç‹¬å‡çº§è¿™äº›å­ crate æ›´åŠ å®‰å…¨ã€‚  

- **æ€§èƒ½å½±å“**  
  - **ç¼–è¯‘å±‚é¢**ï¼šæ¶ˆé™¤ä¸€å±‚ `pub use` çš„é‡æ–°å¯¼å‡ºï¼Œç¼–è¯‘å™¨åœ¨è§£æè·¯å¾„æ—¶å‡å°‘ä¸€æ¬¡é—´æ¥æŸ¥æ‰¾ï¼Œç†è®ºä¸Šæå‡å¾®é‡ç¼–è¯‘é€Ÿåº¦ã€‚è¿è¡Œæ—¶å‡ ä¹æ²¡æœ‰å·®åˆ«ï¼Œå› ä¸ºæ‰€æœ‰è°ƒç”¨ä»æ˜¯åŒä¸€å®ä¾‹ï¼Œåªæœ‰è·¯å¾„è§£æåœ¨ç¼–è¯‘æœŸæ”¹å˜ã€‚  
  - **è¿è¡Œæ—¶**ï¼šæ— é¢å¤–å¼€é”€æˆ–æ€§èƒ½å›é€€ï¼›ç›¸åï¼Œå»é™¤ä¸å¿…è¦çš„åŒ…è£…å±‚å¯ç•¥å¾®é™ä½å‡½æ•°è°ƒç”¨çš„å†…è”éšœç¢ï¼ˆå¯¹æåº¦çƒ­ç‚¹ä»£ç å¯èƒ½æœ‰è½»å¾®å¥½å¤„ï¼‰ã€‚  

- **å®‰å…¨è€ƒè™‘**  
  - **æ”»å‡»é¢æ”¶çª„**ï¼šä¸å†å°†å†…éƒ¨ä¾èµ–é‡æ–°å¯¼å‡ºä¸ºå…¬å¼€ APIï¼Œå¤–éƒ¨åªèƒ½é€šè¿‡æ­£å¼çš„ `sgl-model-gateway` æ¥å£è®¿é—®ï¼Œé™ä½è¯¯ç”¨æˆ–æ„å¤–æš´éœ²å†…éƒ¨å®ç°ç»†èŠ‚çš„é£é™©ã€‚  
  - **å…¼å®¹æ€§é£é™©**ï¼šè‹¥å¤–éƒ¨é¡¹ç›®ä»ä¾èµ–æ—§çš„è·¯å¾„ï¼Œä¼šå‡ºç°ç¼–è¯‘é”™è¯¯ï¼Œå¯èƒ½å¯¼è‡´æœåŠ¡ä¸­æ–­ã€‚éœ€åœ¨å‡çº§æŒ‡å—ä¸­æ˜ç¡®å£°æ˜ç ´åæ€§æ›´æ”¹ã€‚  

**âš ï¸ æ½œåœ¨é£é™©**  

1. **ç¼–è¯‘é”™è¯¯** â€“ å¤§é‡æ–‡ä»¶çš„ import è·¯å¾„å·²æ›´æ”¹ï¼Œä»»ä½•é—æ¼éƒ½ä¼šå¯¼è‡´ CI æ„å»ºå¤±è´¥ã€‚  
2. **Cargo.toml ä¾èµ–é—æ¼** â€“ ç›´æ¥ä½¿ç”¨ `smg_grpc_client`ã€`smg_mcp`ã€`smg_mesh`ã€`wfaas` ç­‰ï¼Œéœ€è¦åœ¨ `sgl-model-gateway` çš„ `Cargo.toml` ä¸­å£°æ˜è¿™äº›ä¾èµ–çš„ç‰ˆæœ¬ï¼›è‹¥æœªåŒæ­¥ï¼Œè¿è¡Œæ—¶ä¼šå‡ºç°ç¼ºå¤±ç¬¦å·é”™è¯¯ã€‚  
3. **ç‰ˆæœ¬ä¸åŒ¹é…** â€“ é€šè¿‡é‡æ–°å¯¼å‡ºåŸæœ¬å¯èƒ½é”å®šåœ¨ç‰¹å®šç‰ˆæœ¬çš„ä¾èµ–ï¼Œç°åœ¨ç›´æ¥ä½¿ç”¨å¤–éƒ¨ crateï¼Œè‹¥ä¸Šæ¸¸ crate å‡çº§å‡ºç° API ç ´åï¼Œ`sgl-model-gateway` å°†ç«‹å³å—å½±å“ã€‚  
4. **å¤–éƒ¨ä½¿ç”¨è€…ç ´å** â€“ å·²å‘å¸ƒçš„åº“ç”¨æˆ·ï¼ˆä¾‹å¦‚ä½¿ç”¨ `sgl-model-gateway::smg::grpc_client` çš„ç¬¬ä¸‰æ–¹ä»£ç ï¼‰åœ¨å‡çº§åä¼šå‡ºç°ä¸å¯ç¼–è¯‘çš„é”™è¯¯ã€‚  
5. **æµ‹è¯•è¦†ç›–ä¸è¶³** â€“ ä»£ç è·¯å¾„å¤šä¸”æ•£å¸ƒåœ¨å·¥ä½œæµã€è·¯ç”±ã€MCPã€Mesh ç­‰å­ç³»ç»Ÿï¼›è‹¥æµ‹è¯•å¥—ä»¶æœªè¦†ç›–å…¨éƒ¨è·¯å¾„ï¼Œæ½œåœ¨è¿è¡Œæ—¶é”™è¯¯éš¾ä»¥å‘ç°ã€‚  

**ğŸ’¡ å…³æ³¨å»ºè®®**  

1. **å®Œæ•´è·‘ CI**ï¼šåœ¨åˆå¹¶å‰ç¡®ä¿ `cargo test --all-features` é€šè¿‡ï¼Œç‰¹åˆ«æ˜¯æ¶‰åŠå·¥ä½œæµã€Meshã€MCP çš„é›†æˆæµ‹è¯•ã€‚  
2. **æ£€æŸ¥ Cargo.toml**ï¼šç¡®è®¤ `sgl-model-gateway` ä¸­å·²ç»åŠ å…¥ `smg_grpc_client`, `smg_mcp`, `smg_mesh`, `wfaas` å››ä¸ªä¾èµ–åŠå…¶ç‰ˆæœ¬èŒƒå›´ã€‚  
3. **å‘å¸ƒè¿ç§»æŒ‡å—**ï¼šåœ¨ Release Notes ä¸­æ˜ç¡®è¯´æ˜ï¼š
   - æ‰€æœ‰ `smg::...` è·¯å¾„å·²è¢«åˆ é™¤ï¼Œæ”¹ä¸º `smg_grpc_client::...`ã€`smg_mcp::...`ã€`smg_mesh::...`ã€`wfaas::...`ã€‚  
   - éœ€è¦åœ¨ä½¿ç”¨æ–¹çš„ `Cargo.toml` ä¸­è‡ªè¡Œæ·»åŠ å¯¹åº”ä¾èµ–ï¼ˆå¦‚æœä¹‹å‰ä»…ä¾èµ– `sgl-model-gateway`ï¼‰ã€‚  
4. **å›æ»šç­–ç•¥**ï¼šè‹¥åœ¨ç”Ÿäº§ç¯å¢ƒå‡ºç°æœªæ•è·çš„å…¼å®¹æ€§å¼‚å¸¸ï¼Œå‡†å¤‡ä¸€ä¸ªå¿«é€Ÿå›æ»šåˆ†æ”¯ä¿ç•™æ—§çš„ reâ€‘export ä»£ç ï¼Œæˆ–æä¾›å…¼å®¹å±‚ï¼ˆé‡æ–°åœ¨ `lib.rs` å¯¼å‡ºåˆ«åï¼‰ä½œä¸ºä¸´æ—¶è¡¥ä¸ã€‚  
5. **ç›‘æ§ä¸æ—¥å¿—**ï¼šåœ¨å…³é”®è·¯å¾„ï¼ˆMCP æ³¨å†Œã€Mesh åŒæ­¥ã€gRPC å®¢æˆ·ç«¯åˆ›å»ºï¼‰åŠ å…¥è°ƒè¯•æ—¥å¿—ï¼Œç¡®ä¿åœ¨è¿ç§»åä»èƒ½æ­£ç¡®åˆå§‹åŒ–å¤–éƒ¨å®¢æˆ·ç«¯ã€‚  
6. **æ–‡æ¡£åŒæ­¥**ï¼šæ›´æ–° READMEã€å¼€å‘è€…æ–‡æ¡£ã€API å‚è€ƒï¼Œåˆ é™¤å·²åºŸå¼ƒçš„ `smg::` è·¯å¾„ç¤ºä¾‹ï¼Œæ–°å¢ç›´æ¥ä½¿ç”¨ `smg_grpc_client` ç­‰çš„ç¤ºä¾‹ä»£ç ã€‚  

---  

**ç»“è®º**  
æ­¤æ¬¡é‡æ„çš„æ ¸å¿ƒä»·å€¼åœ¨äºæå‡ä»£ç å¯ç»´æŠ¤æ€§å’Œä¾èµ–é€æ˜åº¦ï¼Œé•¿è¿œçœ‹æœ‰åŠ©äºæ¨¡å—åŒ–æ¼”è¿›ä¸å®‰å…¨å®¡è®¡ã€‚çŸ­æœŸé£é™©ä¸»è¦æ˜¯å…¼å®¹æ€§å’Œé—æ¼çš„å¯¼å…¥æ”¹åŠ¨ï¼Œéœ€è¦é€šè¿‡å®Œæ•´çš„ CIã€æ–‡æ¡£æ›´æ–°å’Œæ˜ç¡®çš„å‡çº§æŒ‡å—æ¥é™ä½å½±å“ã€‚è‹¥æŒ‰ä¸Šè¿°å»ºè®®æ‰§è¡Œï¼Œæ•´ä½“å½±å“å¯æ§åˆ¶åœ¨å¯æ¥å—èŒƒå›´ã€‚

---

#### ğŸŸ¡ ä¸­é‡è¦åº¦å˜æ›´ (9)

### [diffusion] refactor: merge redundant default_dtype and param_dtype parameters in FSDP loader (#18789)
**SHA**: `efdd676` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/efdd676d5678be7b5112443dc44cd5cde0daa461)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šé‡æ„ / è½»é‡åŠŸèƒ½æ”¹è¿›  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
- åˆå¹¶ `default_dtype` ä¸ `param_dtype` ä¸¤ä¸ªå†—ä½™å‚æ•°ï¼Œç»Ÿä¸€ä½¿ç”¨ `param_dtype` è¿›è¡Œæ¨¡å‹åˆå§‹åŒ–ã€FSDP æ··åˆç²¾åº¦ç­–ç•¥ä»¥åŠæƒé‡åŠ è½½ã€‚  
- åˆ é™¤ `default_dtype` å‚æ•°åœ¨ `bridge_loader`ã€`transformer_loader`ã€`fsdp_load` ä¸­çš„ä¼ é€’å’Œä½¿ç”¨ï¼Œç›¸å…³è°ƒç”¨å¤„æ”¹ä¸ºç›´æ¥ä½¿ç”¨ `param_dtype`ã€‚  
- ä¸º `maybe_load_fsdp_model` æ·»åŠ æ›´å®Œæ•´çš„æ–‡æ¡£è¯´æ˜ï¼Œå¹¶åœ¨åˆ›å»ºæ¨¡å‹æ—¶ä½¿ç”¨ `set_default_torch_dtype(param_dtype)`ã€‚

**ğŸ¯ å½±å“èŒƒå›´**  
- `python/sglang/multimodal_gen/runtime/loader/component_loaders/bridge_loader.py`  
- `python/sglang/multimodal_gen/runtime/loader/component_loaders/transformer_loader.py`  
- `python/sglang/multimodal_gen/runtime/loader/fsdp_load.py`  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
1. **è°ƒç”¨æ–¹æ£€æŸ¥**ï¼šç¡®è®¤é¡¹ç›®ä¸­æ‰€æœ‰è°ƒç”¨ `load_customized` æˆ– `maybe_load_fsdp_model` çš„åœ°æ–¹å·²ä¸å†ä¼ å…¥ `default_dtype`ï¼Œå¦åˆ™ä¼šå‡ºç°å‚æ•°ç¼ºå¤±é”™è¯¯ã€‚  
2. **dtype ä¸€è‡´æ€§**ï¼šå› ä¸º `param_dtype` ç°åœ¨åŒæ—¶å†³å®šæ¨¡å‹é»˜è®¤ dtype ä¸ FSDP å‚æ•° dtypeï¼Œç¡®ä¿ä¸šåŠ¡ä¾§ä»ç„¶èƒ½å¤Ÿé€šè¿‡ `server_args`ï¼ˆæˆ–æ˜¾å¼ä¼ å‚ï¼‰è®¾ç½®æœŸæœ›çš„ç±»å‹ï¼ˆå¦‚ `torch.bfloat16`ã€`torch.float16`ï¼‰ã€‚  
3. **æµ‹è¯•è¦†ç›–**ï¼šé‡ç‚¹è·‘åŒ…å« FSDP æ¨ç†çš„å•å…ƒ/é›†æˆæµ‹è¯•ï¼ŒéªŒè¯æ¨¡å‹åŠ è½½ã€æƒé‡æ¢å¤ä»¥åŠæ¢¯åº¦å½’çº¦åœ¨æ–° dtype ç»„åˆä¸‹çš„æ­£ç¡®æ€§ã€‚  
4. **æ–‡æ¡£åŒæ­¥**ï¼šæ›´æ–°ç›¸å…³ä½¿ç”¨è¯´æ˜æˆ–ç¤ºä¾‹ä»£ç ï¼Œå»é™¤ `default_dtype` çš„æè¿°ï¼Œä»¥å…äº§ç”Ÿè¯¯å¯¼ã€‚  

æ•´ä½“æ¥çœ‹ï¼Œæ­¤æ¬¡é‡æ„ç®€åŒ–äº† dtype å‚æ•°çš„ç®¡ç†ï¼Œé™ä½äº† API é‡å¤åº¦ï¼Œä½†éœ€è¦ç¡®ä¿æ‰€æœ‰è°ƒç”¨æ–¹å·²åŒæ­¥ä¿®æ”¹ï¼Œé˜²æ­¢å› ç¼ºå°‘ `default_dtype` è€Œå¯¼è‡´åŠ è½½å¤±è´¥ã€‚

---

### Rename request timeout env vars for waiting/running stages (#18766)
**SHA**: `e6f7a37` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/e6f7a372ef071e5c3cee480e579e47d94d9bcc74)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼ºï¼ˆæ”¹è¿›è¶…æ—¶é…ç½®ï¼‰  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
- å°†è¯·æ±‚è¶…æ—¶ç›¸å…³çš„ç¯å¢ƒå˜é‡ç”±æ¯«ç§’ (`SGLANG_QUEUED_TIMEOUT_MS`ã€`SGLANG_FORWARD_TIMEOUT_MS`) é‡å‘½åå¹¶æ”¹ä¸ºç§’ä¸ºå•ä½çš„å˜é‡ `SGLANG_REQ_WAITING_TIMEOUT`ã€`SGLANG_REQ_RUNNING_TIMEOUT`ã€‚  
- æ›´æ–°æ–‡æ¡£ã€`environ.py` ä¸­çš„é»˜è®¤å€¼åŠç±»å‹ï¼Œä» `EnvInt` æ”¹ä¸º `EnvFloat`ï¼Œå¹¶åŠ å…¥å‘åå…¼å®¹çš„è­¦å‘Šè½¬æ¢ã€‚  
- Scheduler ä¸­å¯¹åº”çš„æ£€æŸ¥å‡½æ•°æ”¹åä¸º `_abort_on_waiting_timeout` ä¸ `_abort_on_running_timeout`ï¼Œå¹¶ä½¿ç”¨æ–°çš„ç§’å•ä½å®ç°ã€‚  
- æµ‹è¯•ç”¨ä¾‹åŒæ­¥æ”¹ä¸ºæ–°å˜é‡å¹¶ä½¿ç”¨æ›´å°çš„è¶…æ—¶æ—¶é—´ï¼ˆ0.001â€¯sï¼‰ã€‚

**ğŸ¯ å½±å“èŒƒå›´**  
- `python/sglang/srt/environ.py`ï¼ˆç¯å¢ƒå˜é‡å®šä¹‰ä¸å…¼å®¹å¤„ç†ï¼‰  
- `python/sglang/srt/managers/scheduler.py`ï¼ˆè°ƒåº¦è¶…æ—¶åˆ¤å®šé€»è¾‘ï¼‰  
- `docs/references/environment_variables.md`ï¼ˆæ–‡æ¡£ï¼‰  
- `test/registered/scheduler/test_abort.py`ï¼ˆå•å…ƒæµ‹è¯•ï¼‰  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
1. **å‘åå…¼å®¹**ï¼šç”Ÿäº§ç¯å¢ƒä»å¯èƒ½ä½¿ç”¨æ—§å˜é‡ï¼Œç¡®ä¿å¯åŠ¨è„šæœ¬åœ¨è¯»å–åˆ°æ—§å˜é‡æ—¶ä¼šæ­£ç¡®æ‰“å°è­¦å‘Šå¹¶è½¬æ¢ä¸ºç§’ã€‚  
2. **é…ç½®æ£€æŸ¥**ï¼šç”±äºé»˜è®¤å€¼ä» `-1`ï¼ˆç¦ç”¨ï¼‰ä¿æŒä¸å˜ï¼Œç”¨æˆ·è‹¥å·²æœ‰æ¯«ç§’é…ç½®ï¼Œéœ€è¦åœ¨å‡çº§åæ‰‹åŠ¨è¿ç§»æˆ–ä¾èµ–è­¦å‘Šè‡ªåŠ¨è½¬æ¢ã€‚  
3. **æ€§èƒ½å½±å“**ï¼šæ”¹ä¸º `EnvFloat` å¹¶åœ¨ä»£ç ä¸­ä½¿ç”¨ç§’å•ä½ï¼Œç†è®ºä¸Šä¸ä¼šäº§ç”Ÿé¢å¤–å¼€é”€ï¼Œä½†è¯·ç•™æ„è¶…æ—¶é˜ˆå€¼æå°ï¼ˆå¦‚ 0.001â€¯sï¼‰æ—¶çš„æ—¶é—´æµ‹é‡è¯¯å·®ã€‚  
4. **æµ‹è¯•è¦†ç›–**ï¼šæ–°å¢çš„å˜é‡åå·²åœ¨å•å…ƒæµ‹è¯•ä¸­è¦†ç›–ï¼Œå»ºè®®åœ¨ CI ä¸­ä¿ç•™æ—§å˜é‡çš„å…¼å®¹æµ‹è¯•ï¼Œä»¥é˜² future regressionã€‚  

æ•´ä½“æ¥çœ‹ï¼Œæ­¤æ¬¡æ”¹åŠ¨æå‡äº†è¶…æ—¶é…ç½®çš„å¯è¯»æ€§ï¼ˆç§’ä¸ºå•ä½æ›´ç›´è§‚ï¼‰ï¼Œå¯¹ç°æœ‰ä¸šåŠ¡å½±å“æœ‰é™ï¼Œåªè¦åœ¨éƒ¨ç½²æ—¶ç•™æ„ç¯å¢ƒå˜é‡çš„è¿ç§»å³å¯ã€‚

---

### [diffusion] feat: support tp for qwen-image-edit-2511 (#18619)
**SHA**: `5700b19` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/5700b19cbfe9f51adf6236ed7aa67c7d54870717)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼ºï¼ˆä¸º `qwen-image-edit-2511` æ·»åŠ  Tensorâ€‘Parallel æ”¯æŒï¼‰  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
1. åœ¨ `gpu_worker` ä¸­åŠ å…¥ `self.rank == 0` åˆ¤å®šï¼Œä»…åœ¨ä¸»å¡ä¸Šå†™å…¥æ–‡ä»¶ï¼Œé¿å…å¤šå¡é‡å¤ I/Oã€‚  
2. `qwen_image.py` å¤§å¹…æ”¹å†™ï¼šç”¨ `ColumnParallelLinear / RowParallelLinear` æ›¿æ¢åŸæ¥çš„ `ReplicatedLinear`ï¼Œå®ç°è·¨å¡åˆ’åˆ†ï¼›æ–°å¢ `GELU` ä¸ `FeedForward`ï¼ˆæ”¯æŒ `gelu` ä¸ `geluâ€‘approximate`ï¼‰ï¼Œå¹¶åœ¨å¤šä¸ªå­æ¨¡å—ï¼ˆQ/K/V æŠ•å½±ã€MLPã€è°ƒåˆ¶å±‚ç­‰ï¼‰ä¸­ä½¿ç”¨ã€‚è¿™äº›çº¿æ€§å±‚è¿”å›çš„æ˜¯ `(output, None)`ï¼Œè°ƒç”¨å¤„ç»Ÿä¸€å– `[0]`ã€‚  
3. `image_encoding.py` çš„ `offload_model` å»æ‰äº† `image_encoder`ã€`text_encoder` çš„è¿ç§»ï¼Œå¯èƒ½æ˜¯å› ä¸ºè¿™ä¸¤ä¸ªå­æ¨¡å‹å·²ç»åœ¨ TP æ¶æ„ä¸‹é€šè¿‡ `ColumnParallelLinear` è‡ªåŠ¨åˆ‡åˆ†ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- `sglang/multimodal_gen/runtime/models/dits/qwen_image.py`ï¼ˆæ¨¡å‹æ ¸å¿ƒï¼‰  
- `sglang/multimodal_gen/runtime/managers/gpu_worker.py`ï¼ˆè°ƒåº¦/æ–‡ä»¶ I/Oï¼‰  
- `sglang/multimodal_gen/runtime/pipelines_core/stages/image_encoding.py`ï¼ˆæ¨¡å‹åŠ è½½/è¿ç§»ï¼‰  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
1. **å¤šå¡è¡Œä¸º**ï¼š`gpu_worker` åªåœ¨ rankâ€¯0 å†™æ–‡ä»¶ï¼Œç¡®è®¤å…¶å®ƒ rank çš„ `req.save_output`â€¯ä»èƒ½æ­£å¸¸è¿”å›è·¯å¾„ï¼ˆåº”ç”±è°ƒåº¦ç«¯ç»Ÿä¸€ï¼‰ï¼Œé˜²æ­¢è¯·æ±‚åœ¨éä¸»å¡å¡æ­»ã€‚  
2. **çº¿æ€§å±‚æ¥å£**ï¼š`ColumnParallelLinear`/`RowParallelLinear` é»˜è®¤è¿”å› `(output, None)`ï¼Œä»£ç å·²åŠ  `[0]`ï¼Œä½†ä»éœ€æ£€æŸ¥æ‰€æœ‰è°ƒç”¨è·¯å¾„ï¼ˆå°¤å…¶åœ¨ `nn.ModuleList` ä¸­çš„ `self.net.append(nn.Identity())` å‰åï¼‰æ˜¯å¦å…¼å®¹ä¸¤å…ƒç»„è¿”å›ã€‚  
3. **æ¿€æ´»å‡½æ•°åˆ†æ”¯**ï¼š`FeedForward.__init__` ä¸­ `if activation_fn == "gelu": ... if activation_fn == "gelu-approximate": ... else: raise`ï¼Œå½“ `activation_fn` ä¸º `"gelu"` æ—¶ä¼šå…ˆå®ä¾‹åŒ– `act_fn`ï¼Œéšååˆè¿›å…¥ç¬¬äºŒä¸ª `if`ï¼ˆä¸è§¦å‘ï¼‰ï¼Œä½† `else` ä»ä¼šè¢«æ‰§è¡Œï¼Œå¯¼è‡´ `NotImplementedError`ã€‚å»ºè®®æ”¹ä¸º `elif` æˆ–åˆå¹¶é€»è¾‘ã€‚  
4. **å‚æ•°åŒæ­¥**ï¼šä½¿ç”¨ `gather_output=True` çš„ `ColumnParallelLinear` éœ€è¦åœ¨æ‰€æœ‰å¡ä¸Šè¿›è¡Œ `allâ€‘reduce`/`gather`ï¼Œç¡®è®¤ `torch.distributed` å·²åœ¨æ¨¡å‹åˆå§‹åŒ–å‰æ­£ç¡®åˆå§‹åŒ–ã€‚  
5. **æ¨¡å‹åºåˆ—åŒ–**ï¼šTP ç‰ˆæ¨¡å‹çš„ `state_dict` ç»“æ„ä¼šå˜åŒ–ï¼Œç¡®ä¿ checkpoint ä¿å­˜/åŠ è½½è„šæœ¬å…¼å®¹ `ColumnParallelLinear` çš„åˆ†ç‰‡æƒé‡ã€‚  
6. **æµ‹è¯•è¦†ç›–**ï¼š  
   - å•æœºå¤šå¡ (`torchrun --nproc_per_node=4`) çš„æ¨ç†è·¯å¾„æ˜¯å¦ä»èƒ½å¾—åˆ°ç›¸åŒçš„å›¾ç‰‡è¾“å‡ºã€‚  
   - `req.save_output` åœ¨éä¸»å¡è¿”å›çš„ `OutputBatch` æ˜¯å¦åŒ…å«åˆæ³• `file_path`ï¼ˆåº”ä¸º Noneï¼‰ä¸”ä¸ä¼šè§¦å‘å¼‚å¸¸ã€‚  
   - è¿è¡Œ `image_encoding` çš„ `offload_model`ï¼Œç¡®è®¤ä¸å†å‡ºç° `AttributeError`ï¼ˆå­—æ®µå·²è¢«åˆ é™¤ï¼‰ã€‚  

æ•´ä½“æ¥çœ‹ï¼Œæ­¤æ¬¡ PR ä¸º Qwenâ€‘Imageâ€‘Edit å¼•å…¥äº† Tensorâ€‘Parallelï¼Œæå‡äº†å¤§æ¨¡å‹çš„æ˜¾å­˜åˆ©ç”¨ç‡å’Œååï¼Œä½†åœ¨æ¿€æ´»å‡½æ•°åˆ†æ”¯å’Œå¤šå¡ I/O ä¸Šå­˜åœ¨ç»†èŠ‚é£é™©ï¼Œå»ºè®®åœ¨å¤šå¡ç¯å¢ƒä¸‹å®Œæˆå›å½’æµ‹è¯•åå†åˆå¹¶ã€‚

---

### [Spec] Move forward timeout before verify to fix Eagle v1 filter mismatch (#18760)
**SHA**: `d29e331` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/d29e3314917983e5700497c1708d8e8bf6b84bf6)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šBug ä¿®å¤ / åŠŸèƒ½å¢å¼º  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­ï¼ˆä¿®å¤ Eagleâ€¯v1 è¿‡æ»¤ä¸ä¸€è‡´ï¼Œé¿å…è¯·æ±‚è¢«é”™è¯¯è¶…æ—¶ï¼‰  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
1. åœ¨ `Scheduler` ä¸­æ–°å¢ `_check_forward_timeout_for_running_batch`ï¼Œåœ¨è°ƒåº¦é˜¶æ®µ **è·å–ä¸‹ä¸€æ‰¹** å‰å…ˆæ£€æŸ¥å·²åœ¨è¿è¡Œçš„ batch æ˜¯å¦å›  **forward è¶…æ—¶** è€Œéœ€è¦ä¸­æ­¢ã€‚  
2. å°†åŸå…ˆåœ¨ `SchedulerOutputProcessorMixin`ï¼ˆprefillã€decodeï¼‰é‡Œå¯¹ forward è¶…æ—¶çš„æ£€æµ‹é€»è¾‘ç§»é™¤ï¼Œç»Ÿä¸€åœ¨è°ƒåº¦å±‚æå‰å¤„ç†ï¼Œé˜²æ­¢ Eagleâ€¯v1 åœ¨ **verify** é˜¶æ®µä»ç„¶çœ‹åˆ°å·²ç»è¢«è¿‡æ»¤çš„è¯·æ±‚å¯¼è‡´çŠ¶æ€ä¸ä¸€è‡´ã€‚  
3. åœ¨ `multi_layer_eagle_worker` ä¸­å»é™¤å¯¹å·²å®Œæˆè¯·æ±‚çš„è¿‡æ»¤ä»£ç ï¼Œé¿å…åœ¨ draftâ€‘extend è¿‡ç¨‹ä¸­å†æ¬¡å¯¹å·²å®Œæˆè¯·æ±‚è¿›è¡Œ batch è¿‡æ»¤ã€‚

**ğŸ¯ å½±å“èŒƒå›´**  
- `python/sglang/srt/managers/scheduler.py`ï¼ˆè°ƒåº¦æ ¸å¿ƒï¼‰  
- `python/sglang/srt/managers/scheduler_output_processor_mixin.py`ï¼ˆè¾“å‡ºå¤„ç†ï¼‰  
- `python/sglang/srt/speculative/multi_layer_eagle_worker.py`ï¼ˆEagleâ€¯v1 é‡‡æ ·å®ç°ï¼‰  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
- **æµ‹è¯•**ï¼šé‡ç‚¹éªŒè¯ Eagleâ€¯v1ã€Eagleâ€¯v2 åœ¨é«˜å¹¶å‘ã€é•¿é“¾è·¯æƒ…å†µä¸‹çš„ forward è¶…æ—¶è¡Œä¸ºï¼Œç¡®ä¿è¯·æ±‚åœ¨é¢„æœŸçš„ `SERVICE_UNAVAILABLE` çŠ¶æ€è¢«ç»ˆæ­¢ä¸”ä¸ä¼šå‡ºç° â€œfilter mismatchâ€ã€‚  
- **æ—¥å¿—**ï¼šå¼€å¯ `SGLANG_FORWARD_TIMEOUT_MS` ç¯å¢ƒå˜é‡å¹¶è§‚å¯Ÿæ–°å¢æ—¥å¿—è·¯å¾„ï¼Œç¡®ä¿è¶…æ—¶æ£€æµ‹åªåœ¨è°ƒåº¦å‰æ‰§è¡Œã€‚  
- **å›é€€**ï¼šè‹¥å‡ºç°æ–°é”™è¯¯ï¼Œå¯æš‚æ—¶å…³é—­ `SGLANG_FORWARD_TIMEOUT_MS`ï¼ˆè®¾ä¸º â‰¤0ï¼‰æ¥æ¢å¤æ—§è¡Œä¸ºã€‚  
- **æ–‡æ¡£**ï¼šåœ¨é…ç½®è¯´æ˜ä¸­è¡¥å…… forward è¶…æ—¶çš„ä½¿ç”¨åœºæ™¯åŠå…¶åœ¨è°ƒåº¦å±‚çš„å®ç°ç»†èŠ‚ã€‚  

æ­¤æ”¹åŠ¨æå‡äº†è¶…æ—¶å¤„ç†çš„ä¸€è‡´æ€§ï¼Œé™ä½äº† Eagle ç³»åˆ— speculative é‡‡æ ·åœ¨ verify é˜¶æ®µçš„é”™è¯¯ç‡ï¼Œå¯¹æ•´ä½“ç³»ç»Ÿé²æ£’æ€§æœ‰ç§¯æå½±å“ã€‚

---

### [Kernel] Add JIT rotary_embedding_kernel (#17934)
**SHA**: `7d4ae05` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/7d4ae057ec7327132daf9c838118412a34993e28)

**ğŸ”§ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º / æ€§èƒ½ä¼˜åŒ–  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ¦‚è¦**  
- æ–°å¢ `rotary_embedding_kernel` CUDA å®ç°ï¼Œæ”¯æŒ GPTâ€‘NeoX ä¸ GPTâ€‘J ä¸¤ç§æ—‹è½¬æ–¹å¼ï¼Œç»Ÿä¸€äº† `float32/float16/bfloat16` çš„æ•°æ®è·¯å¾„ã€‚  
- åœ¨ `utils.cuh` ä¸­åŠ å…¥ `SGLANG_LDG` å®ï¼Œä»¥åœ¨ ROCm ç¯å¢ƒä¸‹å®‰å…¨ fallbackã€‚  
- ç”¨ JIT å°è£… (`pos_enc.py`) å¯¹å¤–æä¾› `rotary_embedding` æ¥å£ï¼Œå¹¶åœ¨ `rotary_embedding.py` ä¸­æ”¹ä¸ºä»è¯¥æ¨¡å—å¯¼å…¥ã€‚  
- å®Œå–„å•å…ƒ/æ€§èƒ½æµ‹è¯•ï¼Œæ¶µç›–å¤š batchâ€‘seq ç»„åˆã€ä¸åŒ dtypeã€key ä¸º None çš„æƒ…å½¢ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- `sglang/jit_kernel/csrc/elementwise/pos_enc.cuh`ï¼ˆCUDA æ ¸å¿ƒï¼‰  
- `sglang/jit_kernel/include/sgl_kernel/utils.cuh`ï¼ˆå®å®šä¹‰ï¼‰  
- `sglang/jit_kernel/pos_enc.py`ï¼ˆPython JIT åŒ…è£…ï¼‰  
- `sglang/srt/layers/rotary_embedding.py`ï¼ˆé«˜å±‚è°ƒç”¨å…¥å£ï¼‰  
- æ–°å¢ `sglang/jit_kernel/tests/test_pos_enc.py`ï¼ˆCIï¼‰  

**ğŸ’¡ å…³æ³¨å»ºè®®**  

1. **å…¼å®¹æ€§**ï¼šå½“å‰åœ¨é CUDA/HIP ç¯å¢ƒä»å›è½è‡³ `vllm._custom_ops`ï¼Œä½† `rotary_embedding` å·²åœ¨ JIT åŒ…è£…ä¸­ç»Ÿä¸€å®ç°ã€‚å»ºè®®åœ¨ CI ä¸­åŠ å…¥ ROCmã€CPUï¼ˆtorchâ€‘customâ€‘opï¼‰è·¯å¾„çš„å›å½’ï¼Œä»¥é˜² `SGLANG_LDG` å®å¯¼è‡´æœªå¯¹é½è®¿é—®ã€‚  

2. **æ•°æ®ç±»å‹ä¸å¯¹é½**ï¼š`launch_kernel` å¯¹ `float16` ä¸ `bfloat16` ä½¿ç”¨ `half`/`nv_bfloat16`ï¼Œä½†åœ¨ `apply_token_rotary_embedding` ä¸­ç›´æ¥è¯»å– `scalar_t*`ï¼Œè¯·ç¡®è®¤ `__ldg` å¯¹è¿™äº›ç±»å‹çš„å¯¹é½éœ€æ±‚åœ¨æ‰€æœ‰ GPU æ¶æ„ä¸Šå‡æ»¡è¶³ã€‚  

3. **Stride è®¡ç®—**ï¼š`head_stride` å–å€¼åœ¨ `query_ndim == positions_ndim + 2` æ—¶ä½¿ç”¨ `query.stride(-2)`ï¼Œå¦åˆ™ç›´æ¥ `head_size`ã€‚è‹¥è¾“å…¥é‡‡ç”¨å¹³é“º `[batch, seq, heads*head]` å½¢å¼ï¼Œéœ€è¦ç¡®ä¿ `head_stride` ä¸å®é™…å†…å­˜å¸ƒå±€åŒ¹é…ï¼Œé˜²æ­¢è¶Šç•Œå†™ã€‚  

4. **é”™è¯¯ä¿¡æ¯**ï¼š`RuntimeCheck` å·²è¦†ç›–å¤§å¤šæ•°å¼ é‡ç»´åº¦æ£€æŸ¥ï¼Œä½† `rot_dim` ä¸ `head_size` çš„å…³ç³»ä»æœªæ˜¾å¼æ ¡éªŒï¼ˆå¦‚ `rot_dim <= head_size`ï¼‰ï¼Œå¯åœ¨å…¥å£å¤„åŠ å…¥æ–­è¨€ä»¥æå‡è°ƒè¯•å‹å¥½åº¦ã€‚  

5. **æ€§èƒ½åŸºå‡†**ï¼šæµ‹è¯•ä¸­ä½¿ç”¨ `triton_burn` äººä¸ºå ç”¨ GPUï¼Œç¡®ä¿åŸºå‡†ä¸å—å¤–éƒ¨å¹²æ‰°ã€‚åç»­å¯åœ¨ CI ä¸­åŠ å…¥åŸºå‡†å¯¹æ¯”é˜ˆå€¼ï¼ˆä¾‹å¦‚ SGL ç›¸å¯¹ JIT å¿…é¡»æå‡ â‰¥ 5%ï¼‰é˜²æ­¢å›å½’ã€‚  

6. **æ–‡æ¡£**ï¼šåœ¨ `README` æˆ– `docs` ä¸­è¡¥å…… â€œRotary Embedding JITâ€ çš„ä½¿ç”¨è¯´æ˜ã€æ”¯æŒçš„ dtype ä¸è®¾å¤‡åˆ—è¡¨ï¼Œä»¥åŠ `is_neox` å‚æ•°çš„å«ä¹‰ï¼Œå¸®åŠ©ä½¿ç”¨è€…å¿«é€Ÿä¸Šæ‰‹ã€‚  

æ€»ä½“æ¥çœ‹ï¼Œæ­¤æ¬¡åŠ å…¥çš„ JITâ€‘CUDA rotaryâ€‘embedding å®ç°ä¸º SGLang æä¾›äº†ç»Ÿä¸€ä¸”æ›´é«˜æ•ˆçš„ç®—å­ï¼Œå…¼å®¹æ€§å¤„ç†å¾—å½“ï¼Œæµ‹è¯•è¦†ç›–é¢å¹¿ã€‚æŒ‰ä¸Šè¿°å»ºè®®å®Œå–„å…¼å®¹æ£€æŸ¥ä¸æ–‡æ¡£ï¼Œå¯è¿›ä¸€æ­¥æå‡ç¨³å¥æ€§ã€‚

---

### [diffusion] feat: allows quality adjustment of generated images/videos (#17937)
**SHA**: `f4d80f9` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/f4d80f9d42290efd3f139ac3af36174672137117)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

**ğŸ“‹ å˜æ›´æ‘˜è¦**  
- ä¸º Diffusionï¼ˆå›¾åƒ/è§†é¢‘ï¼‰ç”Ÿæˆæ–°å¢ `output-quality`ï¼ˆpresetï¼‰ ä¸ `output-compression`ï¼ˆæ•°å€¼ï¼‰ ä¸¤ä¸ªå‚æ•°ï¼Œæ”¯æŒåœ¨ APIã€CLIã€é…ç½®æ–‡ä»¶ä¸­æŒ‡å®šè¾“å‡ºè´¨é‡å¹¶è‡ªåŠ¨æ˜ å°„ä¸ºå‹ç¼©ç³»æ•°ã€‚  
- åœ¨ `SamplingParams`ã€OpenAIâ€‘compatible è¯·æ±‚æ¨¡å‹ã€è¿è¡Œæ—¶å…¥å£ã€GPUâ€¯Worker ä»¥åŠä¿å­˜å‡½æ•°ä¸­åŠ å…¥ç›¸åº”å­—æ®µã€é»˜è®¤å€¼åŠè½¬åŒ–é€»è¾‘ï¼Œæ–‡æ¡£åŒæ­¥æ›´æ–°ã€‚  

**ğŸ¯ å½±å“èŒƒå›´**  
- `python/sglang/multimodal_gen/configs/sample/sampling_params.py`  
- `python/sglang/multimodal_gen/runtime/entrypoints/*`ï¼ˆimage_apiã€video_apiã€openai utilsï¼‰  
- `python/sglang/multimodal_gen/runtime/managers/gpu_worker.py`  
- `python/sglang/multimodal_gen/runtime/entrypoints/utils.py`ï¼ˆä¿å­˜ä¸åå¤„ç†ï¼‰  
- OpenAPI è¯·æ±‚æ¨¡å‹ `protocol.py`  
- æ–‡æ¡£ `docs/diffusion/api/openai_api.md`  

**ğŸ’¡ å…³æ³¨å»ºè®®**  
1. **å‚æ•°åˆæ³•æ€§**ï¼šç›®å‰ä»…åœ¨ `_adjust_output_quality` ä¸­åšæ˜ å°„ï¼Œæœªæ ¡éªŒ `output_compression` æ˜¯å¦åœ¨ 0â€‘100 èŒƒå›´ã€‚å»ºè®®åœ¨ `SamplingParams._validate` ä¸­åŠ å…¥ç»Ÿä¸€æ ¡éªŒï¼Œé˜²æ­¢å¼‚å¸¸ä¿¡å·å¯¼è‡´ä¿å­˜é˜¶æ®µå´©æºƒã€‚  
2. **é»˜è®¤è¡Œä¸ºå…¼å®¹**ï¼šè€ç‰ˆæœ¬æœªä¼ é€’ `output-quality`/`output-compression` æ—¶ä»åº”ä¿æŒåŸæœ‰è´¨é‡ï¼ˆå›¾ç‰‡ 75ï¼Œè§†é¢‘ 5ï¼‰ï¼Œå·²å®ç°ä½†è¦ç¡®ä¿ `default` é¢„è®¾åœ¨ä¸åŒ `DataType` ä¸‹çš„æ•°å€¼ä¸è¢«è¯¯æ”¹ã€‚  
3. **PNG ç­‰æ— æŸæ ¼å¼**ï¼šä»£ç å·²æ³¨é‡Š â€œPNG ignores these settingsâ€ï¼Œä½†åœ¨ `post_process_sample` ä¸­ä»ä¼šæŠŠ `output_compression` ä½œä¸º JPEG è´¨é‡å†™å…¥ï¼Œå¯åœ¨ä¿å­˜å‰æ ¹æ®æ–‡ä»¶åç¼€è·³è¿‡æˆ–è®°å½•æ—¥å¿—ï¼Œé¿å…è¯¯å¯¼ç”¨æˆ·ã€‚  
4. **CLI ä¸ API åŒæ­¥**ï¼šCLI å‚æ•°å·²åŠ å…¥ `--output-quality`ã€`--output-compression`ï¼Œè¯·åœ¨ CI æµ‹è¯•ä¸­è¦†ç›–ä¸¤æ¡è·¯å¾„ï¼ŒéªŒè¯ `output_compression` ä¼˜å…ˆçº§ä»¥åŠ `default` æ˜ å°„çš„æ­£ç¡®æ€§ã€‚  
5. **æ–‡æ¡£ä¸ç¤ºä¾‹**ï¼šæ–‡æ¡£å·²æ·»åŠ è¯´æ˜ï¼Œå»ºè®®åœ¨ README æˆ–å¿«é€Ÿç¤ºä¾‹ä¸­ç»™å‡ºä¸€ä¸ªâ€œlowâ€‘qualityâ€ä¸ â€œmaximumâ€ çš„å¯¹æ¯”ï¼Œå¸®åŠ©ç”¨æˆ·ç†è§£å‹ç¼©ç³»æ•°å¯¹æ–‡ä»¶å¤§å°çš„å®é™…å½±å“ã€‚  
6. **å‘åå…¼å®¹**ï¼šæ–°å¢å­—æ®µé»˜è®¤å€¼ä¸º `None`/`"default"`ï¼Œä¸å½±å“å·²æœ‰è°ƒç”¨ï¼›è‹¥æœªæ¥è®¡åˆ’åºŸå¼ƒæ—§çš„ç¡¬ç¼–ç è´¨é‡ï¼Œè¯·åœ¨å‘å¸ƒè¯´æ˜ä¸­æå‰æ ‡æ³¨ã€‚  

æ€»ä½“è€Œè¨€ï¼Œæœ¬æ¬¡æ”¹åŠ¨å®ç°äº†çµæ´»çš„è´¨é‡æ§åˆ¶ï¼Œæ ¸å¿ƒæ”¹åŠ¨é›†ä¸­åœ¨é‡‡æ ·å‚æ•°ã€åå¤„ç†ä¸ä¿å­˜æµç¨‹ï¼Œéœ€é‡ç‚¹æ£€æŸ¥æ•°å€¼æ ¡éªŒä¸æ ¼å¼åˆ†æ”¯çš„å¥å£®æ€§ï¼Œç¡®ä¿æ–°å‚æ•°ä¸ä¼šç ´åç°æœ‰æµæ°´çº¿ã€‚

---

### [diffusion] fix: fix ci on amd (#18716)
**SHA**: `6555b2a` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/6555b2a71d9f79eecb66c0baacbaf1da99b8d161)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º / Bug ä¿®å¤  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  
**ğŸ“‹ å˜æ›´æ‘˜è¦**ï¼š  
1. **text_encoder_loader** åœ¨æ¨¡å‹æƒé‡åŠ è½½æ—¶åŠ å…¥ä¸¥æ ¼æ ¡éªŒï¼Œåªæœ‰åœ¨ `model._allowed_missing_weights_patterns` ä¸­å£°æ˜çš„ç¼ºå¤±æƒé‡æ‰ä¼šè¢«å®¹å¿ï¼Œå…¶ä»–ç¼ºå¤±ä¼šç›´æ¥æŠ›å¼‚å¸¸ã€‚  
2. **fsdp_load** ä¿®æ­£äº† `cpu_offload` ä¸ FSDP çš„äº¤å‰ä½¿ç”¨é€»è¾‘ï¼šå¯¹é FSDP å‚æ•°ä»å¯ç¦»çº¿åˆ° CPUï¼ŒFSDPâ€‘managed å‚æ•°åˆ™ä¸å†å¼ºåˆ¶ offloadï¼Œé¿å…å‡ºç° â€œCPUâ€¯vsâ€¯GPUâ€¯dtype mismatchâ€ã€‚  
3. **denoising_dmd** åœ¨ I2V å‰å‘è·¯å¾„ä¸­åŠ å…¥ `self._manage_device_placement` è°ƒç”¨ï¼Œä»¥ç»Ÿä¸€è®¾å¤‡è°ƒåº¦ï¼Œå…¼å®¹ AMD ç¯å¢ƒçš„ CIã€‚  

**ğŸ¯ å½±å“èŒƒå›´**ï¼š  
- `python/sglang/multimodal_gen/runtime/loader/component_loaders/text_encoder_loader.py`ï¼ˆæƒé‡åŠ è½½ä¸æ ¡éªŒï¼‰  
- `python/sglang/multimodal_gen/runtime/loader/fsdp_load.py`ï¼ˆFSDP å‚æ•°åŠ è½½ã€CPU offload é€»è¾‘ï¼‰  
- `python/sglang/multimodal_gen/runtime/pipelines_core/stages/denoising_dmd.py`ï¼ˆI2V ç”Ÿæˆè·¯å¾„çš„è®¾å¤‡ç®¡ç†ï¼‰  

**ğŸ’¡ å…³æ³¨å»ºè®®**ï¼š  
- **å¼€å‘è€…**ï¼šåœ¨è‡ªå®šä¹‰æ–‡æœ¬ç¼–ç å™¨æˆ–è¿ç§»æ¨¡å‹æ—¶ï¼Œæ˜ç¡®å¡«å†™ `model._allowed_missing_weights_patterns`ï¼ˆå¦‚ `["bias", "layer_norm"]`ï¼‰ï¼Œé˜²æ­¢æ„å¤–æŠ›é”™ã€‚å¯¹ FSDPâ€‘enabled ä»£ç è·¯å¾„ï¼Œç¡®ä¿ `is_fsdp_model` åˆ¤æ–­æ— è¯¯ï¼Œå¹¶åœ¨å•å…ƒæµ‹è¯•ä¸­è¦†ç›– CPU/GPU æ··åˆ offload åœºæ™¯ã€‚  
- **ç”¨æˆ·**ï¼šä½¿ç”¨ checkpoint æ—¶ï¼Œè¯·ç¡®è®¤æ¨¡å‹ç»“æ„ä¸æƒé‡åç§°åŒ¹é…ï¼›è‹¥å‡ºç° â€œweights not initializedâ€ æŠ¥é”™ï¼Œå¯é€šè¿‡åœ¨æ¨¡å‹ç±»ä¸­æ·»åŠ ä¸Šè¿° whitelist æ¥å…¼å®¹å¯é€‰å‚æ•°ã€‚å¯¹ AMD GPU ç¯å¢ƒè¿è¡Œæ—¶ï¼Œä¿æŒ `cpu_offload=False`ï¼ˆæˆ–ä»…åœ¨éâ€‘FSDP åœºæ™¯ä¸‹å¼€å¯ï¼‰ï¼Œä»¥é¿å… dtype ä¸åŒ¹é…é”™è¯¯ã€‚  

æ€»ä½“è€Œè¨€ï¼Œæ­¤æ¬¡æ”¹åŠ¨æå‡äº†æƒé‡åŠ è½½çš„å¯é æ€§å¹¶è§£å†³äº† AMD CI ä¸Šçš„è®¾å¤‡/ dtype é”™è¯¯ï¼Œå¯¹å·²æœ‰æ¨¡å‹çš„å…¼å®¹æ€§å½±å“æœ‰é™ï¼Œå»ºè®®åœ¨å‡çº§å‰è·‘ä¸€éå®Œæ•´çš„åŠ è½½/æ¨ç†æµ‹è¯•ã€‚

---

### [Auto Sync] Update weight_utils.py (20260212) (#18692)
**SHA**: `9815ee9` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/9815ee934c64a7bc8a977a5f771f8d43f95a7575)

**âœ… å˜æ›´ç±»å‹**ï¼šåŠŸèƒ½å¢å¼º / ç¨³å®šæ€§æ”¹è¿›  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

### æ ¸å¿ƒå˜æ›´  
1. **`logits_processor.py`**  
   - å°† `sglang.srt.utils` çš„å¯¼å…¥è¿ç§»åˆ° `sglang.srt.utils.common`ï¼Œç»Ÿä¸€å…¬å…±å·¥å…·å…¥å£ã€‚  
   - å°† `LogitsProcessorOutput` ä¸­çš„ `input_top_logprobs_val/idx` çš„ç±»å‹ä»è£¸ `List` æ”¹ä¸º `Optional[List]`ï¼Œæå‡ç±»å‹å®‰å…¨ã€‚  

2. **`weight_utils.py`**  
   - **Safetensors è¯»å–**ï¼šå¯¹ `safetensors.torch.load()` çš„è¿”å›é”®è¿›è¡Œ `sorted`ï¼Œä¿è¯ä¸åŒ TPâ€‘shard æ–‡ä»¶çš„é”®é¡ºåºä¸€è‡´ï¼Œä»è€Œé¿å… `all_gather` ç­‰è·¨ rank é›†ä½“é€šä¿¡å› é¡ºåºä¸ä¸€è‡´è€Œäº§ç”Ÿé”™è¯¯ã€‚  
   - **å¤šçº¿ç¨‹åŠ è½½**ï¼šæ”¹ä¸º `future â†’ idx` çš„æ˜ å°„ï¼Œå…ˆæŠŠå„ shard çš„ `state_dict` æŒ‰ç´¢å¼•æ”¶é›†ï¼Œå†æŒ‰ç´¢å¼•é¡ºåºã€é”®çš„å­—å…¸åºé€ä¸€ `yield`ã€‚è¿™åŒæ ·ç¡®ä¿è·¨æœºå™¨çš„ç¡®å®šæ€§ï¼ŒåŒæ—¶ä¿æŒå¹¶å‘åŠ è½½çš„æ€§èƒ½ã€‚  
   - ä»£ç æ³¨é‡Šæ›´å®Œæ•´ï¼Œè§£é‡Šäº†ä¸ºä½•éœ€è¦æ’åºã€‚  

3. **`scripts/code_sync/copy_to_oss.py`**  
   - æ–°å¢ `_apply_patch`ï¼šå…ˆå°è¯• `git apply`ï¼Œå¤±è´¥åè‡ªåŠ¨æ”¹ç”¨ `git apply --3way` å¹¶æ”¶é›†å†²çªä¿¡æ¯ã€`git diff`ã€å®Œæ•´ patch å†…å®¹ï¼Œå†™å…¥ GitHub Actions stepâ€‘summaryï¼Œä¾¿äº CI ä¸­å¿«é€Ÿå®šä½é—®é¢˜ã€‚  
   - `apply_patch_and_push` æµç¨‹ä¸­æ”¹ä¸ºæ˜¾å¼åˆ›å»ºåˆ†æ”¯ã€è°ƒç”¨ `_apply_patch`ï¼Œå…¶ä½™ git é…ç½®/æäº¤ä¿æŒä¸å˜ã€‚  

### å½±å“èŒƒå›´  
- **æ¨¡å‹åŠ è½½**ï¼š`sglang.srt.model_loader.weight_utils`ï¼ˆTP/å¤šå¡æ¨ç†ã€åˆ†ç‰‡æ¨¡å‹ï¼‰  
- **æ—¥å¿—/é‡‡æ ·**ï¼š`sglang.srt.layers.logits_processor`ï¼ˆè¿”å›ç»“æ„çš„ç±»å‹å£°æ˜ï¼‰  
- **ä»£ç åŒæ­¥å·¥å…·**ï¼š`scripts/code_sync/copy_to_oss.py`ï¼ˆCI è‡ªåŠ¨åŒæ­¥ OSSï¼‰  

### å…³æ³¨å»ºè®®  
1. **åŠŸèƒ½éªŒè¯**ï¼šåœ¨å¤š GPU/TP ç¯å¢ƒä¸‹è·‘ä¸€æ¬¡å®Œæ•´çš„æ¨¡å‹åŠ è½½ï¼ˆ`load_weights`ï¼‰ï¼Œç¡®è®¤ `all_gather` å‰åè¾“å‡ºä¿æŒä¸€è‡´ï¼Œé˜²æ­¢å› æ’åºå¯¼è‡´æ„å¤–çš„æƒé‡é”™ä½ã€‚  
2. **æ€§èƒ½è¯„ä¼°**ï¼šæ’åºæ“ä½œçš„å¼€é”€åœ¨æ•°åƒå±‚æ¨¡å‹ä¸Šä»åœ¨æ¯«ç§’çº§ï¼Œè‹¥å‡ºç°å¼‚å¸¸å»¶è¿Ÿï¼Œå¯è€ƒè™‘åœ¨ `debug` æ¨¡å¼ä¸‹å…³é—­æ’åºï¼Œä»…åœ¨ TP åœºæ™¯å¼€å¯ã€‚  
3. **å…¼å®¹æ€§æ£€æŸ¥**ï¼šé¡¹ç›®ä¸­å…¶ä»–æ–‡ä»¶æ˜¯å¦ä»ä» `sglang.srt.utils` ç›´æ¥å¯¼å…¥ `is_npu`ã€`use_intel_amx_backend`ï¼Œè‹¥æœ‰éœ€åŒæ­¥æ”¹ä¸º `utils.common`ï¼Œé¿å… ImportErrorã€‚  
4. **CI ç¨³å®šæ€§**ï¼šæ–°è¡¥ä¸åº”ç”¨æµç¨‹ä¼šåœ¨å†²çªæ—¶äº§å‡ºå¤§é‡æ—¥å¿—ï¼Œç¡®ä¿ GitHub Actions çš„ `step_summary` æƒé™å·²æ‰“å¼€ï¼Œé˜²æ­¢å› æ—¥å¿—è¿‡é•¿å¯¼è‡´ runner å¼‚å¸¸ã€‚  

æ€»ä½“æ¥è¯´ï¼Œè¿™æ¬¡æäº¤æå‡äº†åˆ†å¸ƒå¼æƒé‡åŠ è½½çš„ç¡®å®šæ€§å’Œ CI è¡¥ä¸åº”ç”¨çš„å¯è¯Šæ–­æ€§ï¼Œå¯¹æ¨¡å‹æ­£ç¡®æ€§å’Œç»´æŠ¤ä½“éªŒéƒ½æœ‰ç§¯æå½±å“ã€‚è¯·åœ¨å¤šèŠ‚ç‚¹ TP åœºæ™¯è¿›è¡Œå›å½’æµ‹è¯•ååˆå¹¶ã€‚

---

### fix: image version in pypi pr workflow (#18735)
**SHA**: `e730c72` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/e730c728d33532d8674105b9b2fc12163d5ed909)

**å˜æ›´ç±»å‹**ï¼šBug ä¿®å¤  
**é‡è¦ç¨‹åº¦**ï¼šğŸŸ¡ ä¸­  

### å˜æ›´æ¦‚è¦  
åœ¨ `release-pypi-pr.yml` å·¥ä½œæµä¸­ï¼ŒåŸå…ˆé€šè¿‡ `setuptools_scm` è¯»å–é¡¹ç›®æ ¹ç›®å½•çš„ç‰ˆæœ¬å·ï¼Œå´å› ä¸º `pyproject.toml` ä½äº `python/` å­ç›®å½•ã€ä¸”è‡ªå®šä¹‰äº† `git_describe_command`ï¼Œå¯¼è‡´ `setuptools_scm` å›é€€åˆ°é»˜è®¤çš„ `git describe`ï¼Œè¯¯æŠ“å–äº† `gateway-*` æ ‡ç­¾ã€‚æ­¤æ¬¡æ”¹ä¸ºç›´æ¥åœ¨ CI ç¯å¢ƒä¸­ä½¿ç”¨ `git tag --list 'v*.*.*'` æŒ‰ç‰ˆæœ¬å·å€’åºå–æœ€æ–°æ ‡ç­¾ï¼Œå¹¶å»æ‰å‰ç¼€ `v` ä½œä¸ºåŸºçº¿ç‰ˆæœ¬ã€‚

### å½±å“èŒƒå›´  
- **CI/CD æµç¨‹**ï¼š`release-pypi-pr.yml` ä¸­ç”Ÿæˆ PR wheel ç‰ˆæœ¬çš„æ­¥éª¤ã€‚  
- **å‘å¸ƒè¿‡ç¨‹**ï¼šåç»­ä¾èµ– `${BASE_VERSION}` çš„æ­¥éª¤ï¼ˆå¦‚ Docker é•œåƒæ ‡ç­¾ã€wheel åŒ…ç‰ˆæœ¬ï¼‰å°†ä½¿ç”¨æ–°çš„ç‰ˆæœ¬è§£ææ–¹å¼ã€‚  
- **æ–‡æ¡£/è„šæœ¬**ï¼šè‹¥æœ‰å…¶ä»–è„šæœ¬å‡è®¾ `BASE_VERSION` æ¥è‡ª `setuptools_scm`ï¼Œéœ€è¦ç¡®è®¤å…¼å®¹æ€§ã€‚

### å…³æ³¨å»ºè®®  

1. **ç¡®ä¿è·å–å®Œæ•´æ ‡ç­¾**ï¼šé»˜è®¤çš„ `actions/checkout@v3` åªä¼šæ‹‰å–æœ€è¿‘çš„ 1â€‘depthï¼Œå¯èƒ½ç¼ºå¤±æ—§çš„ `v*.*.*` æ ‡ç­¾ã€‚å»ºè®®åœ¨ `checkout` æ­¥éª¤ä¸­åŠ å…¥ `fetch-depth: 0` æˆ–æ˜¾å¼ `fetch-tags: true`ã€‚  
2. **ç©ºæ ‡ç­¾é˜²æŠ¤**ï¼šåœ¨æ²¡æœ‰åŒ¹é…çš„ `v*.*.*` æ ‡ç­¾æ—¶ï¼Œ`LATEST_TAG` å°†ä¸ºç©ºï¼Œåç»­ `BASE_VERSION` è§£æä¼šå‡ºé”™ã€‚å¯åœ¨è„šæœ¬é‡ŒåŠ  `if [ -z "$LATEST_TAG" ]; then echo "No release tag found"; exit 1; fi`ã€‚  
3. **å…¼å®¹é¢„å‘è¡Œ**ï¼šè‹¥é¡¹ç›®æœªæ¥ä½¿ç”¨ `v1.2.3rc1` ç­‰é¢„å‘è¡Œæ ‡ç­¾ï¼Œéœ€è¦ç¡®è®¤ `git tag --list 'v*.*.*'` æ˜¯å¦ä»èƒ½æ­£ç¡®è¿‡æ»¤ï¼Œæˆ–æ”¹ä¸ºæ­£åˆ™ `v[0-9]*.[0-9]*.[0-9]*`ã€‚  
4. **ä¿æŒä¸€è‡´æ€§**ï¼šé¡¹ç›®æ ¹ç›®å½•çš„ `setup.cfg`/`pyproject.toml` ä»ä½¿ç”¨ `setuptools_scm`ï¼Œè‹¥æœ‰äººåœ¨æœ¬åœ°è¿è¡Œç›¸åŒé€»è¾‘ï¼Œç‰ˆæœ¬å·å¯èƒ½ä¸ä¸€è‡´ã€‚å»ºè®®åœ¨ README ä¸­è¯´æ˜ CI ä¸æœ¬åœ°è·å–ç‰ˆæœ¬çš„å·®å¼‚ï¼Œæˆ–ç»Ÿä¸€ä½¿ç”¨åŒä¸€ç§æ–¹å¼ï¼ˆå¦‚ç»Ÿä¸€æ”¹ä¸º `git tag`ï¼‰ã€‚  
5. **å›å½’æµ‹è¯•**ï¼šåœ¨ PR åˆå¹¶å‰æ‰§è¡Œä¸€æ¬¡å®Œæ•´çš„å‘å¸ƒå·¥ä½œæµï¼ˆå¯åœ¨ fork ä¸­æ‰‹åŠ¨è§¦å‘ï¼‰ï¼ŒéªŒè¯ç”Ÿæˆçš„ wheel åç§°ã€Docker é•œåƒæ ‡ç­¾ä»¥åŠ PyPI ä¸Šä¼ çš„ç‰ˆæœ¬å·æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚  

æ€»ä½“è€Œè¨€ï¼Œæ­¤æ”¹åŠ¨è§£å†³äº†å›  `setuptools_scm` é…ç½®ä½ç½®å¯¼è‡´çš„é”™è¯¯æ ‡ç­¾è§£æï¼Œå±äºå·¥ä½œæµå±‚é¢çš„ä¿®æ­£ã€‚è‹¥æŒ‰ä¸Šè¿°å»ºè®®è¡¥é½æ ‡ç­¾è·å–å’Œå¼‚å¸¸å¤„ç†ï¼Œå½±å“å¯æ§åˆ¶åœ¨ CI ç¯å¢ƒï¼Œä¸ä¼šæ³¢åŠè¿è¡Œæ—¶ä»£ç ã€‚

---

#### ğŸŸ¢ ä½é‡è¦åº¦å˜æ›´ (21)

### [bugfix] fix mamba slot leak when scheduling fails with radix cache (#15840) (#16067)
**SHA**: `4c6afbe` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/4c6afbeeaa8d80d59ace8b2707474a446e8a3596)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `scheduler.py` ä¸­æ–°å¢ `maybe_release_mamba_cache`ï¼Œåœ¨è°ƒåº¦å¤±è´¥ä¸”å·²åˆ†é… mamba slot æ—¶åŠæ—¶é‡Šæ”¾ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼å¹¶é¿å…æœåŠ¡å™¨å´©æºƒã€‚

---

### [diffusion] chore: use batched P2P ops in VAE parallel decoding (#18728)
**SHA**: `3727340` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/37273408ebcde2d16890dc93d4e613825fc22f95)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `wan_dist_utils.py` çš„ `halo_exchange` ä¸­ï¼Œå°†æ•£ç¢çš„ `dist.irecv`/`dist.isend` æ›¿æ¢ä¸º `dist.P2POp` å¹¶ä½¿ç”¨ `dist.batch_isend_irecv` æ‰¹é‡æ‰§è¡Œï¼Œç®€åŒ–é€»è¾‘å¹¶æå‡ç‚¹å¯¹ç‚¹é€šä¿¡æ•ˆç‡ã€‚

---

### [diffusion] fix typo (#18790)
**SHA**: `acc940d` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/acc940d30217ea6ff67a278a2d894d136466aca2)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæ–‡æ¡£æ›´æ–°  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `fused_norm_scale_shift` çš„æ³¨é‡Šä¸­å°† `- x: B, S, D]` ä¿®æ­£ä¸º `- x: [B, S, D]`ï¼Œçº æ­£æ‹¬å·é”™è¯¯ï¼Œæå‡æ–‡æ¡£å‡†ç¡®æ€§ã€‚

---

### [CI] Move `test_load_lora_from_tensor` test to H100 (#18797)
**SHA**: `9a32f8c` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/9a32f8ccb97697dd0d6a87ba323fcd2169e3aed9)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæµ‹è¯•ä¿®æ”¹  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šå°† `test_load_lora_from_tensor` çš„ CI æ³¨å†Œå¥—ä»¶ä» `stage-b-test-small-1-gpu` è°ƒæ•´ä¸º `stage-b-test-large-1-gpu`ï¼Œä»¥é€‚é… H100 ç¯å¢ƒã€‚

---

### [diffusion] fix: webui task_type check (#18462)
**SHA**: `0763334` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/07633349c9eddaead57365a45871723270414251)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `webui/main.py` ä¸­æ–°å¢ `resolve_model_repo_id` è¾…åŠ©å‡½æ•°ï¼Œå°†æœ¬åœ°æ¨¡å‹è·¯å¾„è½¬æ¢ä¸ºåˆæ³•çš„ HuggingFace/ModelScope repo_idï¼Œä»¥ç»Ÿä¸€åç»­ `model_info` è°ƒç”¨çš„å‚æ•°ï¼Œä¿®å¤ä»»åŠ¡ç±»å‹è·å–é”™è¯¯ã€‚å…¶å®ƒç»†èŠ‚ä¿æŒä¸å˜ã€‚

---

### Added cuda availability guard (#18480)
**SHA**: `98ad284` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/98ad284ebf96d239aa947155933d411307419787)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `deep_gemm.py` ä¸­å¼•å…¥ `is_cuda` æ£€æµ‹å¹¶æ·»åŠ  CUDA å¯ç”¨æ€§ä¿æŠ¤ï¼Œä»…åœ¨ CUDA ç¯å¢ƒä¸‹å¯¼å…¥ `silu_and_mul`ï¼Œæå‡å¹³å°å…¼å®¹æ€§ã€‚

---

### Cleanup debug log for Ring model (#18793)
**SHA**: `a0ebaa6` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/a0ebaa64987ae17ee3d37bc8b9101e88a3bf9e2b)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šå°†å¤šä¸ª `logger.info` è°ƒæ•´ä¸º `logger.debug`ï¼Œå¹¶ä½¿ç”¨ `rank0_log` è¾“å‡ºå±‚é…ç½®ç»Ÿè®¡ï¼Œå»é™¤å†—ä½™æ—¥å¿—ï¼Œæ¸…ç†è°ƒè¯•ä¿¡æ¯ã€‚

---

### Enhence gsm8k test (#18791)
**SHA**: `a9d5977` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/a9d59776cc9c75b4bd286b0e8b0ed49b65c68390)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šä¸º GSM8K åŸºå‡†å¢åŠ æ€è€ƒæ¨¡å¼ï¼Œæ”¯æŒé€šè¿‡ `--enable-thinking` åŠ è½½ tokenizer å¹¶ä½¿ç”¨ chat template å¤„ç†æç¤ºï¼›æ–°å¢ `max-new-tokens`ã€`temperature`ã€`top-p` å‚æ•°ï¼›å°† fewâ€‘shot ç¤ºä¾‹æ•´åˆè¿›é—®é¢˜æ„é€ é€»è¾‘ã€‚

---

### Adjust mamba cache allocation (#18786)
**SHA**: `eacab28` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/eacab2868a9ac3c94c7e6c533100a087ca941cdf)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šæ–°å¢å¯¹ `max_mamba_cache_size` çš„æ˜¾å¼è®¾ç½®å¤„ç†ï¼Œä¿®æ­£ç¦ç”¨ radix cache æ—¶ä½¿ç”¨ `max_running_requests` è®¡ç®—ï¼Œå¹¶ç»Ÿä¸€é™¤ä»¥ `dp_size`ï¼Œæå‡ç¼“å­˜åˆ†é…é€»è¾‘çš„å‡†ç¡®æ€§ã€‚

---

### Cleanup unused rerun stages (#18788)
**SHA**: `a6c4b52` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/a6c4b52ac5b66e3de8846f5f71be8dc9dba331d8)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `slash_command_handler.py` ä¸­åˆ é™¤å¤§é‡æœªä½¿ç”¨çš„ rerun stage æ¡ç›®ï¼Œä»…ä¿ç•™å®é™…éœ€è¦çš„ stageï¼Œç®€åŒ–åˆ—è¡¨å¹¶æ¸…ç†å†—ä½™ä»£ç ã€‚

---

### [schedule] Fix streaming return of customized_info (#18654)
**SHA**: `e4b2b57` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/e4b2b5762074145b0acbd6ff23c1b15bfd9b8975)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„ / bug ä¿®å¤  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `scheduler_output_processor_mixin.py` ä¸­ï¼Œè°ƒæ•´å¯¹ `customized_info` çš„æ‹¼æ¥æ–¹å¼ï¼Œä»…è¿½åŠ å½“å‰å¢é‡ `v[send_token_offset:]`ï¼Œé¿å…é‡å¤ç´¯ç§¯å·²è¾“å‡ºçš„ tokenï¼Œä¿®å¤æµå¼è¿”å›æ—¶çš„è‡ªå®šä¹‰ä¿¡æ¯é‡å¤é—®é¢˜ã€‚

---

### [CI] Skip cutedsl gdn performance test in jit_kernel ci (#18783)
**SHA**: `013a199` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/013a199bc6da430f26766e37115b83d5e863e792)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæµ‹è¯•ä¿®æ”¹  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `test_cutedsl_gdn.py` ä¸­ä¸ºæ€§èƒ½æµ‹è¯•æ·»åŠ æ°¸ä¹… `skip`ï¼ˆ`skipif(True)`ï¼‰ï¼Œé˜²æ­¢ CI ç¯å¢ƒä¸‹ä¸ç¨³å®šçš„åŠ é€Ÿæ¯”å¯¼è‡´æµ‹è¯•å¤±è´¥ã€‚

---

### [Bugfix] Add warnings when NSA indexer cache indice mismatch in PD module (#18727)
**SHA**: `1f39bf6` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/1f39bf6523e5d0adef88c4f74a8b1644bd05c31e)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `conn.py` ä¸­åŠ å…¥é•¿åº¦ä¸åŒ¹é…çš„ç¼“å­˜ç´¢å¼•è­¦å‘Šï¼Œå¹¶åœ¨å¿…è¦æ—¶æˆªæ–­ `prefill_state_indices` ä»¥åŒ¹é… `dst_state_indices`ï¼Œé¿å…è¿è¡Œæ—¶é”™è¯¯ã€‚

---

### [diffusion] fix: fixe local model loading issue in bench_serving (#18687)
**SHA**: `32e0286` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/32e0286829946d3d017cf398bcd9d22ccb9b75b9)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„/Bugä¿®å¤  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `bench_serving.py` ä¸­æ·»åŠ å¯¹æœ¬åœ°æ¨¡å‹è·¯å¾„çš„æ£€æµ‹ï¼Œä¼˜å…ˆè¯»å–æ¨¡å‹ç›®å½•ä¸‹çš„ `config.json` è·å– `pipeline_tag`ï¼Œè‹¥ä¸å­˜åœ¨åˆ™å›é€€åˆ°é»˜è®¤ä»»åŠ¡ï¼Œè§£å†³æœ¬åœ°æ¨¡å‹åŠ è½½æ—¶ä»»åŠ¡åç§°è·å–é”™è¯¯çš„é—®é¢˜ã€‚

---

### Modify glm5 readme on npu (#18768)
**SHA**: `f65c885` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/f65c885e7ccda97c31a8d6619d1620ff8bdb008e)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šæ–‡æ¡£æ›´æ–°  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šæ›´æ–°äº† GLMâ€‘5 NPU ä½¿ç”¨è¯´æ˜ï¼Œä¿®æ”¹ Docker é•œåƒåœ°å€ã€ç¯å¢ƒå˜é‡ï¼ˆæ–°å¢ `HCCL_SOCKET_IFNAME`ã€`GLOO_SOCKET_IFNAME`ï¼‰ã€ç§»é™¤ä¸é€‚ç”¨çš„å†…å®¹å¹¶ç»Ÿä¸€ Benchmark é“¾æ¥ã€‚

---

### [Auto Sync] Update grok.py (20260213) (#18765)
**SHA**: `c56a5ef` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/c56a5efbaaf57208cd3d6b056af0d1a624b2cd99)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šç§»é™¤ `is_weights_presharded` æ ‡è¯†ï¼Œç›´æ¥ä½¿ç”¨ `get_tensor_model_parallel_world_size()>1` åˆ¤æ–­æ˜¯å¦éœ€è¦é¢„åˆ†ç‰‡æƒé‡åŠ è½½ï¼Œç®€åŒ–æƒé‡é¢„åˆ†ç‰‡é€»è¾‘ã€‚  

---

### Revert changes to weight_utils.py (#18759)
**SHA**: `d5f66fe` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/d5f66fec1559ccbfbff23e6618ab83d9d80b3efd)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šæ’¤é”€å¯¹ `weight_utils.py` ä¸­ SAFETENSORS åŠ è½½çš„æ’åºä¸ç´¢å¼•æ˜ å°„ï¼Œå®ç°ç›´æ¥éå† `dict.items()`ï¼Œç®€åŒ–å¤šçº¿ç¨‹åŠ è½½é€»è¾‘ï¼Œå»é™¤è·¨ Rank çš„ç¡®å®šæ€§æ’åºã€‚

---

### Fix invalid import paths in glm_image.py (#18757)
**SHA**: `dd77bd4` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/dd77bd4651dc287ea7fcd585f583101ec0ef7e7f)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šä»£ç é‡æ„  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šä¿®æ­£ `glm_image.py` ä¸­çš„å¯¼å…¥è·¯å¾„é”™è¯¯ï¼Œé‡æ–°æ’åˆ— import é¡ºåºï¼Œç¡®ä¿æ¨¡å—èƒ½å¤Ÿè¢«æ­£ç¡®åŠ è½½ã€‚

---

### [Diffusion] [BUG] Fix missing initialization of GLM-Image text encoder config (#18704)
**SHA**: `b48fe1d` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/b48fe1d95eceedc680ca179f8ee87fc4f52dc594)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šé…ç½®è°ƒæ•´  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šä¸º GlmImagePipelineConfig å¢åŠ  text_encoder_configs å­—æ®µå¹¶å¯¼å…¥ç›¸åº”çš„ EncoderConfig ä¸ T5Configï¼Œä¿®å¤äº†æ–‡æœ¬ç¼–ç å™¨åˆå§‹åŒ–ç¼ºå¤±çš„é—®é¢˜ã€‚

---

### Build ROCm7.2 Image with latest AITER v0.1.10.post3 (#18741)
**SHA**: `f441747` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/f4417475b83238f7fcd1ab8fde17e74a349f9e3b)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šé…ç½®è°ƒæ•´  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ ROCm7.2 Dockerfile ä¸­å°† AITER ç‰ˆæœ¬ä» `v0.1.10.post2` å‡çº§è‡³ `v0.1.10.post3`ï¼Œå¹¶åœ¨ gfx950 åŸºç¡€é•œåƒé˜¶æ®µå¯ç”¨ `BUILD_AITER_ALL=1`ã€‚

---

### Reuse initialized transfer engine in mooncake store (#18460)
**SHA**: `2a8a48c` | ğŸ”— [æŸ¥çœ‹æäº¤](https://github.com/sgl-project/sglang/commit/2a8a48c0caaac3f8e8de13ff4c07a39c4f5e8eaf)

**ğŸ¯ å˜æ›´ç±»å‹**ï¼šå…¶ä»–  
**âš¡ é‡è¦ç¨‹åº¦**ï¼šğŸŸ¢ä½  
**ğŸ“‹ æ‘˜è¦**ï¼šåœ¨ `MooncakeTransferEngine` ä¸­æ–°å¢ `get_ib_device` æ¥å£ï¼Œå¹¶åœ¨ `MooncakeStore` åˆå§‹åŒ–æ—¶å°è¯•å¤ç”¨å·²åˆ›å»ºçš„ä¼ è¾“å¼•æ“ï¼Œä»…åœ¨è®¾å¤‡åã€å…ƒæ•°æ®æœåŠ¡å™¨åŠåè®®åŒ¹é…æ—¶å¤ç”¨ï¼Œå¦åˆ™å›é€€ä½¿ç”¨é»˜è®¤é…ç½®ã€‚è¿™æ ·å¯é¿å…é‡å¤åˆå§‹åŒ–ï¼Œæé«˜å¯åŠ¨æ•ˆç‡ã€‚

---


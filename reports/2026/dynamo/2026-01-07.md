# 每日更新报告（2026-01-07）

## ai-dynamo/dynamo

| 提交时间 | 作者 | 提交信息 |
|----------|------|----------|
| 2026-01-07 17:56:44 | Pavithra Vijayakrishnan | ci: Run the same tests across Github and Gitlab  CI for premerge (#5082) |
| 2026-01-07 08:05:08 | Biswa Panda | docs: update LoRA model name in docs (#5210) |
| 2026-01-07 07:52:29 | Kyle McGill | fix: Fix consolidator tests by computing the number of requests needed to trigger an expected pass (#5220) |
| 2026-01-07 07:12:54 | mohammedabdulwahhab | docs: kube-based service discovery (#5211) |
| 2026-01-07 07:08:08 | Alec | fix: update vLLM to 0.13.0 with API compatibility fixes (#5222) |
| 2026-01-07 06:58:57 | Thomas Montfort | feat(operator): have Scaling Adapter disabled by default (#5180) |
| 2026-01-07 06:28:54 | Hongkuan Zhou | fix: add sweep range for moe dgdr example (#5225) |
| 2026-01-07 05:57:10 | Alec | refactor: extract changed-files logic into reusable composite action (#5216) |
| 2026-01-07 05:45:28 | Alec | fix: assign unique ports per vLLM worker to avoid ZMQ bind conflicts (#5224) |
| 2026-01-07 03:43:04 | Alec | ci: add uncovered files check and improve filter coverage (#5214) |
| 2026-01-07 03:32:53 | Keiven C | docs: fix tracing doc ZMQ port conflict (#5200) |
| 2026-01-07 02:44:20 | Neelay Shah | docs: Update TensorRT-LLM install prerequisites for 1.2.0rc5 (#5194) |
| 2026-01-07 02:17:25 | hhzhang16 | fix: add endpointslices RBAC permission for Planner service account (#5195) |
| 2026-01-07 01:58:34 | Neelay Shah | chore: Remove deprecated Earthfile (#5206) |
| 2026-01-07 01:32:52 | Ran Rubin | build: build.sh enhancement (#5053) |

## ai-dynamo/dynamo 的LLM分析结果

### 996077f49aaac2df6a4e183e41006b768ceeacf6
https://github.com/ai-dynamo/dynamo/commit/996077f49aaac2df6a4e183e41006b768ceeacf6
ci: Run the same tests across Github and Gitlab  CI for premerge (#5082)

Signed-off-by: pvijayakrish <pvijayakrish@nvidia.com>
**🎯 变更类型**：功能增强 / CI 配置 / 测试  
**⚡ 重要程度**：🟡 中  

**📋 变更摘要**：  
1. 为 GitHub Actions 中的 `pytest` 动作新增 `enable_mypy` 输入，可在 CI 中可选启用 MyPy 类型检查。  
2. 在多个后端工作流（vllm、sglang、trtllm）中默认开启 `enable_mypy`，并在 Dynamo 工作流中直接在 pytest 命令行加入 `--mypy`。  
3. 通过统一的 CI 配置，使 GitHub 与 GitLab 的预合并测试保持一致，提升代码类型安全性。

**🎯 影响范围**：  
- `.github/actions/pytest/action.yml`（自定义 pytest 动作）  
- `.github/workflows/container-validation-*.yml`（后端验证、Dynamo CI 工作流）  
- CI 运行时的测试环境与报告生成  

**🔍 技术洞察**：  
- **架构影响**：  
  - 在 CI 层面新增 MyPy 检查，属于横切关注点（cross‑cutting concern），不影响业务代码的模块划分。  
  - 通过 `enable_mypy` 参数实现对不同框架的细粒度控制，保持工作流的可组合性和可维护性。  

- **性能影响**：  
  - MyPy 类型检查会额外耗费 CPU 与时间，尤其在大型项目中可能导致 CI 时长增加 5‑15%。  
  - 仅在标记为 `pre_merge` 的后端默认开启，未开启的工作流仍保持原有速度。  

- **安全考虑**：  
  - 无直接安全风险。  
  - 通过类型检查间接提升代码质量，降低因类型错误导致的运行时异常。  

**⚠️ 潜在风险**：  
1. **CI 失效风险**：若项目中存在未解决的 MyPy 警告，CI 将因 `--mypy` 选项失败而阻断合并。  
2. **兼容性风险**：工作流依赖的 Docker 镜像必须预装 `mypy`，否则会出现 “command not found”。  
3. **构建时长回归**：开启 MyPy 可能导致 CI 执行时间显著增长，影响开发者的反馈速度。  

**💡 关注建议**：  
- 在本地或专用 CI 任务中先运行 `mypy`，确认所有新代码满足类型检查，避免因 CI 随机失败。  
- 确认所有使用的 Docker 镜像（尤其 `container-validation-dynamo.yml`）已安装对应版本的 `mypy`，如有必要在镜像构建阶段加入安装步骤。  
- 监控 CI 总时长，若超过预期可考虑仅在关键分支（如 `main`）开启 MyPy，或使用增量检查（仅针对改动文件）。  
- 为防止误报，建议保持项目根目录下的 `mypy.ini`/`pyproject.toml` 配置同步，并在 CI 中显式指定配置路径（`--config-file`），确保行为一致。

### 975870d552f75b024cb58d5aac9d9939d8e782bf
https://github.com/ai-dynamo/dynamo/commit/975870d552f75b024cb58d5aac9d9939d8e782bf
docs: update LoRA model name in docs (#5210)
**🎯 变更类型**：文档  
**⚡ 重要程度**：🟢低  
**📋 变更摘要**：将 `examples/backends/vllm/launch/lora/README.md` 中演示使用的 LoRA 适配器名称从 `Neural-Hacker/Qwen3-Math-Reasoning-LoRA` 替换为 `codelion/Qwen3-0.6B-accuracy-recovery-lora`，并同步更新相应的 S3 路径、API 请求示例以及返回信息。  

**🎯 影响范围**：  
- `examples/backends/vllm/launch/lora/README.md`（示例文档）  

**🔍 技术洞察**：  
- **架构影响**：无。仅修改文档，不涉及代码或系统架构。  
- **性能影响**：无。文档改动不影响运行时行为。  
- **安全考虑**：无。未引入任何安全相关的变更或风险。  

**⚠️ 潜在风险**：  
- 如果实际代码或示例脚本仍使用旧的 LoRA 名称，而文档已更新，可能导致用户在跟随示例时出现 “LoRA not found” 的错误。  
- 新的 LoRA 模型路径在不同的镜像或私有仓库中可能不存在，导致示例不可用。  

**💡 关注建议**：  
- 确认示例脚本（如 `setup.sh`、`download_lora.sh` 等）已同步更新为新 LoRA 名称，避免文档与实际代码不一致。  
- 在 CI 中加入对该 README 示例的验证（比如通过脚本自动拉取 LoRA 并执行一次加载），确保模型名称有效且可访问。  
- 如有多个 LoRA 示例，建议在文档中明确说明模型来源（公开/私有）以及如何自行替换，以免用户在复制示例时产生困惑。  

### c92a422b6275673ceda7556c5585293050e6ef68
https://github.com/ai-dynamo/dynamo/commit/c92a422b6275673ceda7556c5585293050e6ef68
docs: kube-based service discovery (#5211)

Signed-off-by: mohammedabdulwahhab <furkhan324@berkeley.edu>
**🎯 变更类型**：文档  
**⚡ 重要程度**：🟢低  
**📋 变更摘要**：  
- 新增 `docs/kubernetes/service_discovery.md`，完整介绍 Dynamo 在 Kubernetes 上的服务发现机制，包括两种后端（Kubernetes 原生与 etcd）、实现细节、CRD 与 EndpointSlice、环境变量等。  
- 更新多处文档链接（README、部署指南、章节索引），将原有的 etcd‑centric 说明替换为指向新的 Service Discovery Guide。  
- 精简 `deploy/discovery/README.md`，仅保留对文档入口的引用。  

**🎯 影响范围**：  
- `docs/` 目录下的所有用户文档（尤其是 Kubernetes 部署相关章节）。  
- CI 文档生成或站点构建流程（如果有）。  

**🔍 技术洞察**：  
- **架构影响**：无代码层面改动，仅在文档层面说明了当前推荐的 Kubernetes 原生发现机制，帮助用户理解系统的真实运行时架构。  
- **性能影响**：不适用（纯文档）。  
- **安全考虑**：不适用；文档中未暴露任何凭证或安全配置，仅是使用说明。  

**⚠️ 潜在风险**：  
- **文档一致性风险**：如果未来代码实现（如 operator、CRD）发生变更，而对应的说明未同步更新，可能导致用户误解。  
- **链接破损**：新增的相对路径链接依赖目录结构，若后续移动文件可能导致 404。  

**💡 关注建议**：  
1. **同步检查**：在下一个发布周期安排一次文档/代码对齐审查，确保 `service_discovery.md` 中的字段、CRD 名称、环境变量与实际实现保持一致。  
2. **CI 验证**：如果项目使用文档生成（MkDocs、Sphinx 等），加入链接有效性检查，防止因路径变动导致链接失效。  
3. **发布说明**：在发布日志中加入“新增 Service Discovery 文档”，提醒用户阅读，以免仍沿用旧的 etcd 方式。  
4. **备份旧说明**：保留原 `deploy/discovery/README.md` 的完整内容（可通过历史分支），以防需要回溯或对比。  

总体而言，此次提交是一次良好的文档强化，能帮助使用者快速了解并采用推荐的 Kubernetes 原生服务发现方案，风险极低。

### a82137877c0903ccde01bd7375eb9fb8fba0629a
https://github.com/ai-dynamo/dynamo/commit/a82137877c0903ccde01bd7375eb9fb8fba0629a
fix: add sweep range for moe dgdr example (#5225)

Signed-off-by: hongkuanz <hongkuanz@nvidia.com>
**🎯 变更类型**：Bug修复 / 功能增强  
**⚡ 重要程度**：🟡 中  

**📋 变更摘要**  
在 `benchmarks/profiler/deploy/profile_sla_moe_dgdr.yaml` 中新增 `hardware` 区块，提供 `min_num_gpus_per_engine`、`max_num_gpus_per_engine` 与 `num_gpus_per_node` 参数，使得在 H200 环境下能够在 8‑16 GPU/engine 范围内进行自动 sweep。此改动旨在修复原始示例缺少硬件范围设置的问题，提升 profiling 示例的可配置性与可复现性。  

**🎯 影响范围**  
- `benchmarks/profiler` 子模块（MOE DGDR 示例配置）  
- 依赖该 YAML 配置的 profiling 脚本或 CI 流水线  

**🔍 技术洞察**  
- **架构影响**：仅配置层面的变更，不涉及代码逻辑或模块依赖，保持向后兼容。  
- **性能影响**：引入 GPU 数量 sweep，可能导致 profiling 任务执行时间线性增长（取决于 sweep 步长），但对单次运行的时间复杂度无直接影响。  
- **安全考虑**：无安全相关改动；唯一需要关注的是配置值的合法性（如 GPU 数量超过实际硬件），否则可能导致部署失败。  

**⚠️ 潜在风险**  
1. **配置错误**：如果部署环境的实际 GPU 数量小于 `min_num_gpus_per_engine`，任务会启动失败。  
2. **资源占用**：Sweep 范围扩大后，可能触发大量并发实验，导致集群资源紧张。  
3. **兼容性**：其他未使用 `hardware` 区块的旧版脚本仍能正常工作，但若假设默认硬件配置，可能需要检查是否有隐式依赖。  

**💡 关注建议**  
- 在提交前通过本地或 CI 环境验证 YAML 能被 profiling 脚本正确解析。  
- 为 `min_num_gpus_per_engine`、`max_num_gpus_per_engine` 设置合理的默认值，防止在硬件不足的机器上跑出异常。  
- 如在 CI 中使用 sweep，建议限制并发实验数或采用资源配额，以免抢占集群资源。  
- 在文档或 README 中补充说明该硬件区块的意义与取值范围，帮助使用者快速上手。  

### 17528f8149635918714d7f7d0b68962ac0df6cd6
https://github.com/ai-dynamo/dynamo/commit/17528f8149635918714d7f7d0b68962ac0df6cd6
refactor: extract changed-files logic into reusable composite action (#5216)

Signed-off-by: alec-flowers <aflowers@nvidia.com>
**🎯 变更类型**：重构  

**⚡ 重要程度**：🟡 中  

**📋 变更摘要**  
1. 将原先散落在多个工作流中的 “changed‑files” 检测逻辑抽取为 `.github/actions/changed-files` 可复用的 composite action。  
2. 所有受影响的 CI 工作流（`container-validation-backends.yml`、`container-validation-dynamo.yml` 等）改为调用该新 action，并相应地更新了输出映射。  
3. 移除了工作流中的调试与未覆盖文件检查步骤，统一交给复用 action 处理。

**🎯 影响范围**  
- `.github/actions/changed-files/`（新增）  
- `.github/workflows/container-validation-backends.yml`（已修改）  
- `.github/workflows/container-validation-dynamo.yml`（已修改）  
- 其他可能引用相同变更检测的工作流（若存在）  

**🔍 技术洞察**  
- **架构影响**：  
  - 引入了一个层级更高的复用组件，减少了工作流中的重复代码，提高了可维护性。  
  - 输出统一为 `core、operator、deploy、vllm、sglang、trtllm` 等关键标记，工作流只需要引用 `steps.changes.outputs.*` 即可。  
  - 将 “获取 merge‑base” 与 “changed‑files” 步骤封装进同一个 composite action，降低了各工作流的耦合度。  

- **性能影响**：  
  - 运行时额外增加一次 composite action 调用的开销（几乎可忽略），整体 CI 时长基本不变。  
  - 通过 `fetch-depth: 0` 保持完整 git 历史，仍然需要一次 `git merge-base`，与原实现等价。  

- **安全考虑**：  
  - `gh_token` 通过输入参数显式传递，使用的是 workflow 自动注入的 `${{ github.token }}`，权限受限于默认 `read/write`（取决于仓库设置）。  
  - 复用 action 内部调用 `gh pr view`，依赖 GitHub CLI（预装于 runner），若未来 runner 环境更改，需要确认 CLI 仍可用。  
  - 未引入额外的外部依赖或网络请求，安全风险极低。  

**⚠️ 潜在风险**  
1. **Token 传递错误**：如果调用方忘记或错误传入 `gh_token`，action 在 PR 场景下无法获取目标分支，导致 `base_sha` 为空，从而把所有文件误判为 “changed”。  
2. **GitHub CLI 不可用**：在自托管 runner 或某些受限环境中，`gh` 命令可能缺失，导致获取 PR 基准分支失败。  
3. **行为偏差**：原工作流在非 PR（如 `main`、`release`）分支默认使用 “previous commit”。复用 action 仍保持相同逻辑，但若未来对 `base_sha` 的默认处理有改动，可能影响已有 CI 判断。  
4. **调试信息缺失**：工作流中移除了大量 `echo` 调试输出，若出现错误，排查信息相对减少。  

**💡 关注建议**  
- **测试覆盖**：在 PR、主分支、发布分支三类情景下分别跑一次 CI，确认 `core/…` 等输出与预期一致。  
- **安全审计**：确保传入的 `${{ github.token }}` 权限符合最小授权原则（只读仓库即可），如有必要可改为 `secrets.GITHUB_TOKEN` 并显式限定 `permissions: contents: read`.  
- **兼容性检查**：如果项目使用自托管 runner，验证 runner 镜像中已安装 GitHub CLI（`gh --version`），或在 action 前显式加入 `setup-gh` 步骤。  
- **日志策略**：在复用 action 中加入可选的 `debug: true` 输入，控制是否输出调试信息，方便以后快速定位问题。  
- **文档更新**：在项目的 CI 文档（如 `.github/FILTERS.md` 或 workflow 说明）补充 “使用 .github/actions/changed-files” 的使用方式与注意事项。  

### 19b5917c2b88ea6a7c4c20cd4669974a642111a8
https://github.com/ai-dynamo/dynamo/commit/19b5917c2b88ea6a7c4c20cd4669974a642111a8
fix: assign unique ports per vLLM worker to avoid ZMQ bind conflicts (#5224)

Signed-off-by: alec-flowers <aflowers@nvidia.com>
**🎯 变更类型**：Bug修复  
**⚡ 重要程度**：🟡中  
**📋 变更摘要**：在 `benchmarks/router/run_engines.sh` 中为每个 vLLM worker 动态分配唯一的 KV 事件端口和 Nixl Side‑Channel 端口，避免因 ZMQ 绑定冲突导致的启动失败。同时为 vLLM 启动参数添加 `--request-plane nats`。  

**🎯 影响范围**：  
- `benchmarks/router` 运行脚本（尤其是多 worker 场景）  
- vLLM 工作进程的环境变量配置  
- 可能间接影响依赖 ZMQ 通信的上层路由/调度逻辑  

**🔍 技术洞察**：  
- **架构影响**：  
  - 引入 per‑worker 环境变量 `DYN_VLLM_KV_EVENT_PORT`、`VLLM_NIXL_SIDE_CHANNEL_PORT`，使每个 worker 在同一主机上拥有独立的 ZMQ 绑定端口，提升并行启动的可靠性。  
  - 新增 `--request-plane nats` 参数，表明请求通道改为使用 NATS 进行调度，可能涉及路由层的轻微协议切换。  

- **性能影响**：  
  - 端口分配逻辑仅在脚本层面执行，开销极低（O(1)），对运行时性能基本无影响。  
  - 通过消除端口冲突，可避免因进程重启或失败导致的额外启动延迟。  

- **安全考虑**：  
  - 暴露额外 TCP/UDP 端口（20080‑+i, 20096‑+i），若服务器防火墙未限制，可能被外部扫描探测。建议在生产环境通过防火墙或容器网络策略限制这些端口的可达性。  

**⚠️ 潜在风险**：  
- 若系统已有服务占用相同端口范围（20080‑20096+workerCount），仍会出现绑定冲突。  
- 环境变量名或端口计算错误（如 `i` 超出预期范围）可能导致 worker 启动异常。  
- 添加的 `--request-plane nats` 可能在未部署 NATS 服务的环境下导致启动失败。  

**💡 关注建议**：  
1. **测试**：在不同 GPU/worker 数量下启动完整 benchmark，验证每个 worker 的端口实际分配且无冲突。  
2. **端口规划**：在部署文档中加入端口范围说明，建议预留 20080‑20199（或自定义）供 vLLM 使用。  
3. **防火墙配置**：对生产机器或 CI 环境，显式限制这些端口仅本机访问。  
4. **回退方案**：保留旧的 `run_engines.sh` 备份或提供环境变量开关，以便在需要时快速回退至统一端口模式。  
5. **文档更新**：补充关于 `--request-plane` 参数的说明及 NATS 部署要求，避免使用者产生误解。  

### 194128ec893d052dbe1ce59dbc96362d5f33c6ac
https://github.com/ai-dynamo/dynamo/commit/194128ec893d052dbe1ce59dbc96362d5f33c6ac
docs: fix tracing doc ZMQ port conflict (#5200)

Signed-off-by: Keiven Chang <keivenchang@users.noreply.github.com>
Co-authored-by: Keiven Chang <keivenchang@users.noreply.github.com>
**🎯 变更类型**：文档  
**⚡ 重要程度**：🟢低  
**📋 变更摘要**：更新了 `docs/observability/tracing.md`，在示例脚本中补充了多工作进程间 ZMQ 端口冲突的说明，并在脚本中添加了默认的 `DYN_SYSTEM_PORT`、`DYN_VLLM_KV_EVENT_PORT`、`VLLM_NIXL_SIDE_CHANNEL_PORT` 环境变量，以避免同一主机上多个 worker 启动时出现 “Address already in use” 错误。  

**🎯 影响范围**：`docs/observability/tracing.md`、示例 `disagg.sh` 脚本（仅文档层面），不涉及代码运行时行为。  

**🔍 技术洞察**：  
- **架构影响**：无（仅文档层面说明，未更改实际实现）。  
- **性能影响**：无直接影响，文档优化有助于避免因端口冲突导致的启动失败，从而间接提升使用体验。  
- **安全考虑**：无（未引入新的安全相关配置或风险）。  

**⚠️ 潜在风险**：  
- 文档内容如果与实际脚本实现不一致，可能导致用户误判端口配置；但当前修改已同步示例脚本，风险极低。  

**💡 关注建议**：  
- 维护者在后续更新实际部署脚本时，请确保相应端口环境变量的默认值或说明保持同步。  
- 使用者在手动启动组件时，应核对 `DYN_SYSTEM_PORT`、`DYN_VLLM_KV_EVENT_PORT`、`VLLM_NIXL_SIDE_CHANNEL_PORT` 是否与本机已有服务冲突。  
- 若项目中有自动化测试覆盖文档与脚本的一致性，可进一步降低文档漂移风险。  

### e8c87f175f68c75000b462c04b9a260f10902626
https://github.com/ai-dynamo/dynamo/commit/e8c87f175f68c75000b462c04b9a260f10902626
docs: Update TensorRT-LLM install prerequisites for 1.2.0rc5 (#5194)

Co-authored-by: Claude Opus 4.5 <noreply@anthropic.com>
**🎯 变更类型**：文档  

**⚡ 重要程度**：🟢低  

**📋 变更摘要**：  
更新了 `README.md` 中关于 TensorRT‑LLM 1.2.0rc5 的安装前置条件说明。将示例 PyTorch 容器版本从 `25.06`（对应 1.1.0rc5）改为 `25.10`，并调整了非容器安装步骤的依赖指令，说明容器已自带 PyTorch 2.9.0 + CUDA 13.0，同时新增了对 disaggregated serving 所需的 `libzmq3-dev` 的可选安装提示。

**🎯 影响范围**：  
- `README.md`（项目文档）  
- 间接影响使用该文档进行部署的用户和 CI/CD 流程  

**🔍 技术洞察**：  
- **架构影响**：无（仅文档层面的说明更新）  
- **性能影响**：无直接代码更改，性能不受影响  
- **安全考虑**：无新增安全风险  

**⚠️ 潜在风险**：  
- 若用户仍依据旧文档执行安装，可能会选错 PyTorch 容器标签或手动安装已在容器中自带的依赖，导致冲突或冗余。  
- 文档中的示例命令与实际容器镜像标签不一致时，可能引起误解。  

**💡 关注建议**：  
1. 在 CI 中加入对文档的自动校验，确保示例版本号与实际发布的容器标签保持同步。  
2. 发布新版本时同步更新 `README.md` 中的对应示例，以防信息滞后。  
3. 对于使用非容器方式部署的用户，建议在文档中明确说明何时需要手动安装 `torch`、`torchvision` 与 `cuda-python`（如现有容器已涵盖则可省略）。  
4. 若项目提供了 CI 示例脚本，确保其使用的容器标签同样更新为 `25.10`。  

总体而言，此次改动属于低风险的文档维护，主要提升了使用者的指引准确性。

### c90b87e244f46d76689b7a7081d98adf6e56b389
https://github.com/ai-dynamo/dynamo/commit/c90b87e244f46d76689b7a7081d98adf6e56b389
fix: add endpointslices RBAC permission for Planner service account (#5195)

Signed-off-by: Hannah Zhang <hannahz@nvidia.com>
**🎯 变更类型**：Bug修复  
**⚡ 重要程度**：🟡中  
**📋 变更摘要**：为 Planner ServiceAccount 新增对 `endpointslices`（Discovery API）以及 `dynamoworkermetadatas`（NVIDIA 自定义资源）的 RBAC 权限，确保 Planner 在运行时能够 `get/list/watch`（以及对后者的 CRUD）这些资源，避免因权限不足导致的运行错误。  

**🎯 影响范围**：`operator` Helm chart 中的 Planner 组件 → 关联的 Role 与 RoleBinding  

**🔍 技术洞察**  
- **架构影响**：仅在 RBAC 层面扩展权限，不改变业务逻辑或组件间调用关系。属于横向权限补充，对整体模块耦合度影响几乎为零。  
- **性能影响**：无直接性能影响。新增 `list/watch` 权限可能导致 Planner 在监控 Endpointslice 时产生额外的 List/Watch 请求，但这属于预期行为，且负载与原有对其他资源的监控相当。  
- **安全考虑**：  
  - 授予 `discovery.k8s.io/endpointslices` 的 `get/list/watch` 权限，扩大了 Planner 对集群网络拓扑信息的可见性。  
  - 对 `nvidia.com/dynamoworkermetadatas` 赋予完整的 CRUD 权限，若该 ServiceAccount 被攻击者获取，将具备对工作节点元数据的完全控制权。  
  - 建议在安全审计中确认 Planner ServiceAccount 的使用范围严格受限于可信的控制平面进程。  

**⚠️ 潜在风险**  
1. **兼容性**：在旧版 Kubernetes（v1.16 之前）`Endpointslice` 仍处于 `v1beta1`，若集群未启用对应 API，RBAC 规则仍会生效但实际资源不可用，可能导致误报。  
2. **权限泄露**：误将此 RoleBinding 复用于其他 ServiceAccount，可能导致权限过宽。  
3. **升级路径**：若 Helm chart 已在集群中部署，升级时需要确保 `kubectl apply -f` 能正确覆盖旧的 Role/RoleBinding，避免出现冲突或残留旧规则。  

**💡 关注建议**  
- **测试**：在升级后，执行 Planner 相关的功能测试，特别是涉及 Service Discovery（EndpointSlice）和 Worker Metadata 的流程，确认不再出现 `RBAC: access denied` 错误。  
- **安全审计**：在安全合规检查中确认 Planner ServiceAccount 只被 Planner pod 使用，且没有其他 pod 误挂载此 ServiceAccount。  
- **升级注意**：建议在 Helm `upgrade --install` 时使用 `--force` 或 `--replace` 参数，以确保新的 Role/RoleBinding 能覆盖旧对象。  
- **文档**：在对应的部署文档里添加对新权限的说明，帮助运维团队了解 Planner 对集群资源的依赖范围。

### 11d7d3f59e15bc5eabe42ce056260dbd26550f3c
https://github.com/ai-dynamo/dynamo/commit/11d7d3f59e15bc5eabe42ce056260dbd26550f3c
chore: Remove deprecated Earthfile (#5206)

Co-authored-by: Claude Opus 4.5 <noreply@anthropic.com>
**🎯 变更类型**：chore（删除已废弃的 Earthfile）  
**⚡ 重要程度**：🟡 中  
**📋 变更摘要**：本次提交彻底删除了项目根目录下以及 `deploy/operator` 中的 Earthfile，官方已不再使用 Earthly 进行镜像构建，改为直接使用标准的 Dockerfile。文档同步更新，改为手动执行 `docker build / push`。旨在收敛构建体系、降低维护成本。  

**🎯 影响范围**：  
- 构建/发布脚本（原 Earthly 依赖）  
- `deploy/operator` 的 CI/CD 流程（若仍调用 Earthfile）  
- 示例文档 `examples/deployments/EKS/Deploy_Dynamo_Kubernetes_Platform.md`  

**🔍 技术洞察**：  
- **架构影响**：从 Earthly→Docker 的迁移，使构建层级更加直观，去除了 `+golang-base`、`+dynamo-base` 等 Earthly 目标的抽象。对整体架构无功能性变更，仅是工具链层面的简化。  
- **性能影响**：构建性能基本保持不变；Docker 原生层级与 Earthly 的层缓存机制相近，删除的 Earthfile 本身不涉及运行时代码。  
- **安全考虑**：移除 Earthfile 减少了一个潜在的攻击面（如未受审计的自定义 Earthly 插件）。同时，依赖的 Dockerfile 已经在项目中成熟，可继续通过官方镜像签名等机制保障安全。  

**⚠️ 潜在风险**：  
1. **CI 失效**：若仓库或下游项目的 CI 仍使用 `earthly` 命令或引用 `Earthfile`，构建将报错。  
2. **本地开发者迁移成本**：习惯 Earthly 的开发者需要改为 Docker 命令，可能出现命令记忆错误。  
3. **文档一致性**：仅更改了示例文档的两行，仍可能有其他文档或脚本未同步更新，导致误导。  

**💡 关注建议**：  
- **CI/CD 检查**：全盘搜索仓库及外部 CI 配置（如 GitHub Actions、Jenkins），确保全部替换为 Docker 构建命令或对应的 Makefile/脚本。  
- **本地验证**：在本地执行 `docker build -t <repo>/dynamo-operator:latest .` 并成功推送，确认 Dockerfile 正常工作。  
- **文档审计**：搜寻项目中所有提及 `earthly`、`Earthfile` 的章节或 README，统一改为 Docker 相关指引。  
- **回滚防护**：如有必要，可在发布说明中保留一份迁移指南，帮助尚未迁移的用户快速切换。  

整体来看，此次删除属于工具链清理，风险可控，只要保证相关流水线同步更新即可顺利完成迁移。


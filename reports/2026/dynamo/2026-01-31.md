# 每日更新报告（2026-01-31）

## ai-dynamo/dynamo

| 提交时间 | 作者 | 提交信息 |
|----------|------|----------|
| 2026-01-31 10:51:53 | jh-nv | fix: fix test process termination logic to properly trigger graceful shutdown (#5775) |
| 2026-01-31 08:42:21 | Yan Ru Pei | chore: nuke standalone fast api router (#5845) |
| 2026-01-31 08:20:00 | hhzhang16 | fix: add --is-decode-worker flag (#5843) |
| 2026-01-31 08:04:06 | Janelle Cai | chore: move HF config download and prevent duplicate concurrent model registration (#5767) |
| 2026-01-31 07:52:18 | William Zhang | ci: Add missing pytest marker (#5837) |
| 2026-01-31 07:03:30 | Jacky | fix: Disable calls to abort() at TRT-LLM backend - temporary (#5827) |
| 2026-01-31 05:24:53 | Julien Mancuso | fix: update docker-compose path in doc (#5821) |
| 2026-01-31 04:51:26 | Yuewei Na | fix(docs): remove trailing transition causing Sphinx build failure (#5831) |
| 2026-01-31 04:38:40 | William Zhang | fix: Properly forward sampling params from the request (#5797) |
| 2026-01-31 04:25:48 | Yan Ru Pei | docs: mocker (#5832) |
| 2026-01-31 04:22:43 | Jonathan Tong | docs: update Fern docs for main branch (#5706) |
| 2026-01-31 04:13:49 | jh-nv | fix: fix vllm graceful shutdown (#5818) |
| 2026-01-31 03:21:28 | Yuewei Na | docs: add known issues section for TRT-LLM backend (#5801) |
| 2026-01-31 03:12:04 | Indrajit Bhosale | fix: sampling params parsing in vllm EPD flow  (#5813) |
| 2026-01-31 02:31:23 | dagil-nvidia | docs: transpose backend dependency tables, extend to v0.6.0 (#5663) |
| 2026-01-31 02:27:30 | dagil-nvidia | docs: refactor Dynamo readme.md and quick_start_local.rst  (#5649) |
| 2026-01-31 01:55:11 | Anant Sharma | ci: add separate cache for release branches (#5293) |
| 2026-01-31 01:29:56 | Anant Sharma | fix: add msgpack dependency to trtllm section (#5799) |
| 2026-01-31 01:18:23 | ptarasiewiczNV | chore: Update vLLM compilation config to vLLM v0.14.1 (#5819) |

### 📊 统计摘要
> 本日共 19 个提交 | 🔴高 4 | 🟡中 8 | 🟢低 7
## 📋 目录

- [ai-dynamo/dynamo](#ai-dynamo-dynamo)
  - [📊 统计摘要](#-统计摘要)
  - [🔴 高重要度变更 (4)](#-🔴-高重要度变更-4)
    - [fix: fix test process termination logic to properly trigg...](#aea57ca)
    - [fix: Disable calls to abort() at TRT-LLM backend - tempor...](#934d03c)
    - [fix: Properly forward sampling params from the request (#...](#2f666b7)
    - [fix: fix vllm graceful shutdown (#5818)](#704c1da)
  - [🟡 中重要度变更 (8)](#-🟡-中重要度变更-8)
    - [chore: nuke standalone fast api router (#5845)](#ef1078e)
    - [fix: add --is-decode-worker flag (#5843)](#6c87081)
    - [fix: update docker-compose path in doc (#5821)](#f6d6b34)
    - [fix(docs): remove trailing transition causing Sphinx buil...](#e2982e1)
    - [docs: update Fern docs for main branch (#5706)](#7ca6a56)
    - [fix: sampling params parsing in vllm EPD flow  (#5813)](#454c28a)
    - [docs: refactor Dynamo readme.md and quick_start_local.rst...](#e8c7bbf)
    - [fix: add msgpack dependency to trtllm section (#5799)](#7359711)
  - [🟢 低重要度变更 (7)](#-🟢-低重要度变更-7)
    - [chore: move HF config download and prevent duplicate conc...](#b88cb59)
    - [ci: Add missing pytest marker (#5837)](#95383fd)
    - [docs: mocker (#5832)](#408d786)
    - [docs: add known issues section for TRT-LLM backend (#5801)](#284f772)
    - [docs: transpose backend dependency tables, extend to v0.6...](#a460092)
    - [ci: add separate cache for release branches (#5293)](#7d5ed66)
    - [chore: Update vLLM compilation config to vLLM v0.14.1 (#5...](#f9b020c)
#### 🔴 高重要度变更 (4)

### fix: fix test process termination logic to properly trigger graceful shutdown (#5775)
**SHA**: `aea57ca` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/aea57caeb5186a75d374d8de0b1e4e165a4413e7)

**🎯 变更类型**：Bug修复  
**⚡ 重要程度**：🔴高  
**📋 变更摘要**：  
- 为 `ManagedProcess` 新增可选的 `display_name` 参数，使测试日志和进程标识更直观。  
- 重写 `terminate_process_tree` 实现：先快照子进程、优先优雅停止父进程、延长超时时间并在必要时强制结束残余子进程，确保测试进程在异常退出时能够完整清理。

**🎯 影响范围**：  
- `tests/fault_tolerance/migration/*` 中的测试脚本（TRT-LLM、VLLM、通用迁移测试）  
- `tests/utils/managed_process.py`（核心测试进程管理库）  
- 直接影响 CI/本地运行的所有使用 `ManagedProcess` 的单元/集成测试。

**🔍 技术洞察**  

- **架构影响**：  
  - 仅在测试层面增加了 `display_name` 元数据，不会渗透到生产代码或库的公共 API。  
  - `terminate_process_tree` 的实现细化了进程清理的顺序，保持了现有 `ManagedProcess` 接口不变，对上层调用透明。  

- **性能影响**：  
  - 超时时间从 2 s 提升至 10 s，极端情况下测试清理阶段会稍慢（最多 ~8 s 额外延迟），对整体 CI 时长影响可接受。  
  - 额外的进程快照和多轮 `wait_procs` 调用带来极小的 CPU/系统调用开销，几乎可以忽略不计。  

- **安全考虑**：  
  - 仍然使用 `psutil` 对进程进行信号发送和强制杀死，未引入新的权限提升或路径注入风险。  
  - 通过捕获 `psutil.NoSuchProcess` 防止因进程已退出导致的异常，提升了鲁棒性。  

**⚠️ 潜在风险**  
1. **跨平台差异**：`psutil` 在 Windows 上的子进程树遍历与信号发送行为与 Unix 略有不同，需在 Windows CI 上验证新逻辑的可靠性。  
2. **超时设置**：10 s 的统一超时可能在资源受限的 CI 环境（例如容器 CPU 限制）下导致 “父进程未在超时前退出” 的误报，需要监控是否出现大量 “Parent process did not exit within timeout” 警告。  
3. **display_name 冲突**：如果不同测试实例传入相同的 `display_name`，日志前缀可能导致误判，但这仅属于可读性问题，不影响功能。  

**💡 关注建议**  
- **跨平台回归**：在 Windows（以及 macOS）CI 环境跑一次完整的 fault‑tolerance 测试套件，确保子进程树能够被完整回收。  
- **可配置超时**：考虑将 `timeout` 参数暴露为 `ManagedProcess` 的可选配置，以便在资源紧张的环境中自行调低。  
- **日志可视化**：利用新增的 `display_name` 在 CI 报告中加入进程标识，便于定位挂起或异常退出的测试用例。  
- **新增单元测试**：为 `terminate_process_tree` 编写小型模拟进程树的单元测试，验证“父进程先结束，子进程随后被回收”以及超时恢复的路径。  

整体来看，此次提交提升了测试框架在异常场景下的鲁棒性，风险局限于测试层面且可通过上述建议进一步降低。

---

### fix: Disable calls to abort() at TRT-LLM backend - temporary (#5827)
**SHA**: `934d03c` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/934d03c54518435f8476c8b0b971f6d0ea59e188)

**🎯 变更类型**：Bug修复 / 临时功能降级  
**⚡ 重要程度**：🔴高  
**📋 变更摘要**：  
- 在 TensorRT‑LLM（TRT‑LLM）后端的请求取消逻辑中，暂时关闭对 `generation_result.abort()` 的调用，以避免在大量并发取消请求时导致引擎卡死。  
- 对特性矩阵文档和相关单元测试同步做出说明与标记，明确该功能在当前版本为“已禁用”。  

**🎯 影响范围**：  
- `components/src/dynamo/trtllm/request_handlers/handler_base.py`（取消处理路径）  
- 文档 `docs/reference/feature-matrix.md`（请求取消特性标注）  
- 测试套件 `tests/fault_tolerance/cancellation/test_trtllm.py`（xfail 标记）  
- 使用 TRT‑LLM 作为后端的所有 **Decode、Aggregated、Prefill** 工作节点（尤其是高并发负载场景）  

**🔍 技术洞察**  

| 维度 | 影响分析 |
|------|----------|
| **架构影响** | - 取消路径不再向 TRT‑LLM 引擎发送 `abort()`，相当于在 **请求层** 注入了一个 “no‑op” 处理。<br>- 该改动不会影响上层调度、路由或其它后端（如 vLLM、DeepSpeed），但破坏了 **统一的请求生命周期管理**——TRT‑LLM 侧的资源回收依赖 `abort()`。 |
| **性能影响** | - 正面：防止在高并发取消场景下引擎出现死锁或 “hang”，提升系统整体可用性与吞吐。<br>- 负面：被取消的请求在 TRT‑LLM 端的内存、KV‑blocks 等资源不会被及时释放，可能导致 **短期内显著的内存/显存增长**，在极端负载下触发 OOM 或性能退化。 |
| **安全考虑** | - 此次修改不涉及外部攻击面或权限检查，仅是内部逻辑的临时关闭。<br>- 资源泄漏若导致服务不可用，间接影响可用性（DoS），但不构成传统意义上的安全漏洞。 |
| **可维护性** | - 注释明确标记 “Temporary – restore later”，降低误删风险。<br>- 文档与测试同步更新，防止其他开发者误以为取消已完全支持。<br>- 需要在后续迭代中实现更安全的 abort 机制或加锁/超时方案，以恢复完整功能。 |

**⚠️ 潜在风险**  
1. **资源泄漏**：长期运行或高取消率场景下，显存/内存占用不断上升，可能导致 OOM 或服务崩溃。  
2. **状态不一致**：请求被标记为已取消，但后端仍持有执行上下文，后续可能出现 “ghost request” 干扰 KV‑block 回收或迁移逻辑。  
3. **监控盲区**：现有监控/指标可能未捕获此类 “未释放的 TRT‑LLM 资源”，导致运维难以及时发现问题。  
4. **测试误导**：部分取消测试被标记为 `xfail`，若忘记在后续恢复时移除，可能导致真正的回归未被检测。  
5. **文档漂移**：特性矩阵中使用脚注 `<sup>5</sup>`，若后续未同步更新脚注说明，文档易产生歧义。  

**💡 关注建议**  
- **监控与告警**：在 TRT‑LLM 侧增加显存/内存占用和已取消请求计数的监控指标，设定阈值告警，提前发现泄漏趋势。  
- **资源清理补丁**：在取消路径外部（如 `request_handler` 的 finally 块）实现 **强制回收**（例如调用 TRT‑LLM 提供的 `release_resources(request_id)`），即使不调用 `abort()`。  
- **限流或批量取消**：在高并发场景下，引入取消请求的 **速率限制** 或 **批量合并**，降低一次性触发大量 `abort()` 的概率。  
- **恢复计划**：将在后续发布备注中明确恢复 `generation_result.abort()` 的时间窗口，并提供对应的回滚指南。  
- **测试维护**：在恢复功能后，删除或改为 `xfail(strict=False)` 的标记，并新增针对资源泄漏的压力测试。  
- **文档同步**：更新特性矩阵脚注说明，加入 “临时禁用，预计在下个 minor 版本恢复”。确保 CI 文档检查能捕获此类脚注变动。  

---  

**结论**：此提交通过临时关闭 TRT‑LLM 的 abort 调用，快速规避了高并发取消导致的引擎卡死风险，提升了系统可用性。然而，它以资源泄漏为代价，需要在监控、资源回收和后续功能恢复上做好准备，以防止长时间运行时出现显存耗尽或状态不一致的隐蔽故障。建议在下一个迭代中实现安全的取消机制并及时恢复文档与测试的准确性。

---

### fix: Properly forward sampling params from the request (#5797)
**SHA**: `2f666b7` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/2f666b73a2a83be094d7ea9febbf044ae05e4279)

**🎯 变更类型**：Bug修复  
**⚡ 重要程度**：🔴高  
**📋 变更摘要**：在 `handler_base.py` 中，将原先通过 `copy.deepcopy` + 手动 `setattr` 的采样参数覆写逻辑，改为使用 `dataclasses.replace`。同时新增一套完整的单元测试，验证在 `sampling_options` 中出现 `0、False、""` 等“伪假”值时能够正确覆盖，以及 `None` 会被安全跳过。此改动提升了参数校验的可靠性，并让不支持的字段直接抛错。  

**🎯 影响范围**：  
- `components/src/dynamo/trtllm/request_handlers/handler_base.py`（核心请求处理路径）  
- 依赖 `HandlerBase._override_sampling_params` 的所有 TRT‑LLM 相关推理服务（本地生成、远程调用等）  
- 新增的测试文件 `components/src/dynamo/trtllm/tests/test_trtllm_handler_base.py`（仅测试层）  

**🔍 技术洞察**  

- **架构影响**  
  - **解耦与可维护性**：将覆盖逻辑抽象为 `@staticmethod _override_sampling_params`，并基于 dataclass 的标准 API 实现，降低了对内部实现细节（如 `copy.deepcopy`）的依赖。  
  - **一致性**：利用 `dataclasses.replace` 自动触发 `__post_init__`，确保所有采样参数在被覆写后仍遵循统一的验证规则，防止因手动 `setattr` 漏掉校验。  

- **性能影响**  
  - `dataclasses.replace` 的实现内部会创建一个新的实例并拷贝字段，整体开销与 `copy.deepcopy` 相近，且在多数请求中采样参数字段数量有限（<10），对整体推理吞吐影响可以忽略不计。  
  - 通过一次字典推导过滤 `None`，相较于原先的多次 `hasattr` 检查略有提升。  

- **安全考虑**  
  - **输入校验**：不再默默接受非法字段，`dataclasses.replace` 会在遇到未知键时抛出 `TypeError`，这有助于及时发现客户端/上游服务的协议不匹配。  
  - **后置验证**：如果 `SamplingParams` 在 `__post_init__` 中实现了范围检查（如温度必须在 `[0, 2]`），此机制会被强制执行，降低恶意或误传值导致的异常行为。  

**⚠️ 潜在风险**  

1. **非 dataclass 对象兼容性**  
   - 现有代码假设 `self.default_sampling_params` 为 `SamplingParams` dataclass 实例。若未来有其他实现（如普通类或命名元组），调用 `dataclasses.replace` 会抛 `TypeError`，导致运行时错误。  

2. **异常传播**  
   - 现在未知字段直接抛异常，未做捕获。若上层未捕获此异常，整个生成请求可能因单个非法参数中断，影响可用性。  

3. **依赖 `__post_init__` 的副作用**  
   - `__post_init__` 可能执行昂贵的检查或副作用（日志、计数），在高并发场景下会产生额外开销。  

**💡 关注建议**  

- **兼容性检查**：在 `HandlerBase.__init__` 或首次使用前，显式断言 `self.default_sampling_params` 为 dataclass（`dataclasses.is_dataclass`），并在文档中注明此前置条件。  

- **健壮的错误处理**：将 `_override_sampling_params` 包装在 `try/except TypeError`，在捕获后返回原始 `sampling_params` 并记录警告，防止单个错误导致整条推理链崩溃。  

- **性能监控**：在高负载环境下，通过度量 `handler_base.generate_locally` 的延迟，确认 `dataclasses.replace` 的开销仍在可接受范围。  

- **测试覆盖**：已加入详尽的单元测试，建议在 CI 中保留这些测试，并在未来对 `SamplingParams` 增加新字段时同步更新 `test_trtllm_handler_base.py`。  

- **文档更新**：在用户手册或 API 说明中明确指出：*“如果 `sampling_options` 中包含 `None`，对应字段不会覆盖；其它任意合法值（包括 0、False、空字符串）均会生效；未知字段将触发错误”*，帮助调用方避免误用。  

---

### fix: fix vllm graceful shutdown (#5818)
**SHA**: `704c1da` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/704c1dad84a97ce045a7819db9c0f816ced5b180)

**🎯 变更类型**：Bug修复 / 性能优化 / 架构变更  
**⚡ 重要程度**：🔴高  
**📋 变更摘要**：  
1. 为 vLLM 引擎监控、各类 Handler、以及 `main.py` 的初始化流程引入 `shutdown_event`，实现**优雅关闭**机制。  
2. 在 `VllmEngineMonitor` 中加入对 `shutdown_event` 的检测与快速退出；在请求 abort 监控中同步监听关闭事件并在关闭时抛出 `GeneratorExit`。  
3. 新增 `_normalize_finish_reason` 将 vLLM 的 `"abort*"` 完成理由映射为 Dynamo 期望的 `"cancelled"`，兼容 Rust 层的枚举。  

**🎯 影响范围**：  
- `components/src/dynamo/vllm/engine_monitor.py`  
- `components/src/dynamo/vllm/handlers.py`（所有子类）  
- `components/src/dynamo/vllm/main.py`（worker 启动与信号处理）  
- `components/src/dynamo/vllm/multimodal_handlers/worker_handler.py`（构造函数）  
- 相关的 `init_*` 初始化函数（prefill、multimodal、native_encoder、ec_processor 等）  

**🔍 技术洞察**：

| 维度 | 影响 |
|------|------|
| **架构影响** | - 引入全局 `asyncio.Event`，在分布式 Runtime 与各组件之间建立统一的关闭信号通道。<br>- `VllmEngineMonitor` 由纯轮询改为 **事件感知轮询**，提升 shutdown 的可控性。<br>- `Handler` 中的 abort 监控现在同时等待 gRPC context 结束和 `shutdown_event`，实现 **统一的中止路径**。 |
| **性能影响** | - 对健康检查循环的 `await asyncio.sleep` 替换为 `asyncio.wait_for(shutdown_event.wait(), timeout=HEALTH_CHECK_INTERVAL)`，在正常运行时仍保持原有间隔，额外的 `wait_for` 开销极低（微秒级）。<br>- 关闭阶段可以更快响应（不必等完整的 `HEALTH_CHECK_INTERVAL`），缩短资源占用时间。 |
| **安全考虑** | - 通过统一的关闭事件，避免因进程被强制终止而留下未清理的 GPU/内存资源，降低潜在的资源泄露和后续攻击面。<br>- 未引入新的外部接口或权限检查，安全风险基本不变。 |
| **可维护性** | - 新增的 `shutdown_event` 参数在多个函数签名中传播，代码路径稍显复杂；建议在文档或类型别名中统一说明。<br>- `_normalize_finish_reason` 为临时兼容方案，已标记 TODO，后续应在 Rust 层统一错误码。 |

**⚠️ 潜在风险**：

1. **多次设置/遗漏设置**：`shutdown_event.set()` 只能安全调用一次；若多处误调用可能导致 **RuntimeWarning: Event already set**，但不影响功能。需确保仅在信号处理入口调用。  
2. **竞争条件**：`_monitor_abort` 中使用 `asyncio.wait` 监听两个 Future，若 `shutdown_event` 在 `context.async_killed_or_stopped()` 之前被触发，仍能正确捕获，但需要确认没有导致未捕获的 `CancelledError`。  
3. **任务取消漏报**：在 `VllmEngineMonitor._check_engine_health` 捕获 `CancelledError` 后 `break`，若外部仍持有对该任务的引用可能导致 **dangling task** 报警。  
4. **兼容性**：`_normalize_finish_reason` 将 `"abort*"` 映射为 `"cancelled"`，若上层业务依赖原始 `"abort"` 字段（例如监控或日志），可能出现统计偏差。  
5. **测试盲区**：新增的关闭路径需要在 **单节点**、**多节点**、**leader / non‑leader** 场景下完整走一遍，否则可能在特定拓扑下出现死锁。  

**💡 关注建议**：

1. **添加专门的单元/集成测试**：  
   - 模拟 `SIGTERM`、`SIGINT`，验证 `shutdown_event` 能在不超过 1 s 内使所有后台任务停止。  
   - 对 `VllmEngineMonitor`、`_monitor_abort`、`_abort_monitor` 各自的异常路径进行覆盖（`EngineDeadError`、`CancelledError`、`GeneratorExit`）。  
2. **文档与类型声明**：在 `components/src/dynamo/vllm` 包的 `__init__.py` 中导出 `ShutdownEvent = asyncio.Event`，并在函数签名处使用该别名，提高可读性。  
3. **集中化关闭入口**：考虑在 `DistributedRuntime` 或专门的 `ShutdownCoordinator` 中持有唯一的 `shutdown_event`，避免在多处重复创建。  
4. **审计日志**：在每一次 `shutdown_event.set()`、监控任务退出、以及 `GeneratorExit` 抛出时记录统一的日志级别（INFO），便于运维排查。  
5. **后续清理**：在 `EngineDeadError` 触发的进程退出路径（`os._exit(1)`) 前，确保 `shutdown_event` 已经被置位，以防子协程因未感知关闭而卡死。  
6. **完善 FinishReason 兼容**：在 Rust 层实现对应的映射，逐步淘汰 Python 中的 `_normalize_finish_reason`，保持业务语义统一。  

---  
通过上述改动，项目在 **大规模部署** 场景下的 **可用性** 与 **资源回收** 能力得到显著提升，但仍需通过系统化的测试与文档支持来消除新增的并发路径风险。

---

#### 🟡 中重要度变更 (8)

### chore: nuke standalone fast api router (#5845)
**SHA**: `ef1078e` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/ef1078e46e964a9d0307fb1394134eb59ae0d97d)

**🎯 变更类型**：其他 / Chore（删除示例代码）  
**⚡ 重要程度**：🟡 中（不影响核心库功能，但会影响文档与示例用户）  

**📋 变更摘要**  
此次提交将 `examples/deployments/router_standalone` 目录完整移除，连同对应的 README、FastAPI 路由实现 (`router.py`、`api.py`、`worker.py`)、演示脚本 (`perf.sh`、`ping.sh`) 以及文档中的链接均被删除。与此同时，`examples/README.md`、`fern/pages/getting-started/examples.md`、`examples/deployments/router_standalone_trtllm/README.md` 中对 “Router Standalone” 的引用也同步去除。

**🎯 影响范围**  
- **examples/**：全部相关示例文件被删除。  
- **文档**：`examples/README.md`、`fern/pages/getting-started/examples.md`、`router_standalone_trtllm/README.md` 中的链接被更新。  
- **代码库**：核心库 (`dynamo` 包) 未受影响；仅是示例层面的删减。  

**💡 关注建议**  
1. **文档完整性**：确认所有 CI/CI‑Docs、GitHub Pages 或外部链接已不再指向已删除的路径，避免 404。  
2. **示例依赖**：若仓库的 CI、benchmark 或测试脚本仍引用 `router_standalone`，需同步移除或改为使用新的 Router 示例（如 TensorRT‑LLM 方案）。  
3. **版权/许可证**：删除的文件已包含 SPDX 头，确保提交记录中不遗留未授权的文件残留。  
4. **用户迁移**：在发布说明中提醒使用者改为 `router_standalone_trtllm` 或官方提供的生产路由实现，避免因示例缺失导致的使用困惑。  

总体来看，此次改动仅影响示例层，风险有限；只需确保文档和 CI 链接同步更新即可。

---

### fix: add --is-decode-worker flag (#5843)
**SHA**: `6c87081` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/6c8708104e597434ac75c75f3a4b1cbe96496caa)

**🎯 变更类型**：Bug 修复  
**⚡ 重要程度**：🟡 中  
**📋 变更摘要**：在 `examples/basics/kubernetes/Distributed_Inference/disagg_router.yaml` 中的 VllmDecodeWorker 启动命令添加了 `--is-decode-worker` 参数，修正了 decode‑worker 未被正确标识导致的路由错误。  

**🎯 影响范围**  
- `examples/basics/kubernetes/Distributed_Inference` 示例的部署脚本。  
- 运行时解析 `--is-decode-worker` 标志的代码路径（`dynamo::vllm` 的命令行解析器），以及调度/路由逻辑会依据该标志区分 decode 与 prefill 工作。  
- 相关 CI/CD 示例验证、文档和 README 中的使用说明。  

**💡 关注建议**  
1. **代码路径完整性**：确认 `dynamo::vllm` 已实现 `--is-decode-worker` 标志的解析，并在启动时正确设置 `ComponentType::DecodeWorker`。若该标志在其他入口（如 `dynamo::vllm::main`）未被注册，部署仍会失败。  
2. **回归测试**：新增或更新 e2e 测试，验证在多节点 Kubernetes 环境下，decode‑worker 能被路由器识别并接收解码请求。  
3. **文档同步**：在 `README`、部署指南以及 `examples/.../disagg_router.yaml` 注释中说明该标志的意义和使用场景，避免用户误删。  
4. **兼容性检查**：对于已有部署脚本（可能未加该标志），增加容错逻辑：若未显式指定，默认行为保持向前兼容或给出警告。  
5. **发布说明**：在下一个 Release Note 中标记 “新增 `--is-decode-worker` 标志”，并提醒用户在分布式推理的 decode worker 配置中加入该参数。  

总体来看，此次改动针对示例配置的细节修正，风险低，但需要确保运行时解析和路由逻辑已同步支持该标志，以防出现“decode worker 未被识别” 的运行时错误。

---

### fix: update docker-compose path in doc (#5821)
**SHA**: `f6d6b34` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/f6d6b34e87aa391051c7740025d4a00122a8f859)

**变更类型**：Bug 修复  
**重要程度**：🟡 中  

**核心变更**  
- 将示例文档 (`examples/basics/disaggregated_serving/README.md、examples/basics/quickstart/README.md`) 中的 Docker‑Compose 启停指令从旧路径 `deploy/metrics/docker-compose.yml` 改为正确的 `deploy/docker-compose.yml`。  
- 同步更新测试脚本 `tests/lmcache/run_test.sh` 中的 Docker‑Compose 路径。  

**影响范围**  
- 示例运行指南（两个 README）。  
- CI/本地测试脚本 `tests/lmcache/run_test.sh`。  

**审查要点 & 建议**  
1. **路径验证**：确认仓库根目录下的 `deploy/docker-compose.yml` 已存在且包含 etcd、NATS 服务定义，避免因路径错误导致示例启动失败。  
2. **文档一致性**：全局搜索 `deploy/metrics/docker-compose.yml`，确保没有遗漏的引用（如其他 README、CI 配置或脚本）。  
3. **CI 兼容**：CI 流程中若仍使用旧路径，需要同步更新，以防止持续集成失败。  
4. **回退兼容**：若有用户仍依赖旧路径，可在 `deploy/metrics/` 目录添加一个软链接指向新文件，降低迁移成本。  
5. **测试验证**：在本地执行 `tests/lmcache/run_test.sh`，确认 Docker‑Compose 启停正常，确保所有示例文档的指令可直接复制运行。  

总体风险低，仅为文档与脚本路径调整，建议合并后运行完整测试套件确认无误。

---

### fix(docs): remove trailing transition causing Sphinx build failure (#5831)
**SHA**: `e2982e1` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/e2982e1f5ab2a0d23f58ba65a968c668f8cc90da)

**🎯 变更类型**：Bug 修复  
**⚡ 重要程度**：🟡 中  
**📋 变更摘要**：在 `docs/backends/trtllm/README.md` 中删除了多余的水平分割线（`----`），该行在 Sphinx 构建时会被解析为非法的 “transition” 标记，导致文档编译失败。  

**🎯 影响范围**：  
- 文档生成子系统（Sphinx）  
- CI 流程中负责构建和部署文档的步骤  
- 与该章节相关的 README 页面（不影响运行时代码）

**💡 关注建议**：  
1. **CI 通过**：在本地或 CI 环境重新运行 `make html`（或等价的 Sphinx 构建命令），确认文档已顺利生成。  
2. **文档规范**：后续编辑 Markdown 时，避免在结尾留下孤立的水平线或未闭合的块元素，可在提交前使用 `sphinx-build -b html -nW` 检查警告。  
3. **回滚风险**：此改动仅是纯文档删除，不会触及代码逻辑，风险极低；但建议在发布前确认所有文档链接（如 `[#4327]`）仍然有效。  
4. **文档维护**：若项目采用自动化文档检查（如 `doc8`、`markdownlint`），将该规则加入 CI 可进一步防止类似错误。  

整体来看，此次提交仅修复文档构建错误，对功能、性能无直接影响，属于安全且必要的维护。

---

### docs: update Fern docs for main branch (#5706)
**SHA**: `7ca6a56` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/7ca6a562f4d5b5926b1d1299425e90033cb725c9)

**🎯 变更类型**：文档更新/重构  
**⚡ 重要程度**：🟡 中  
**📋 变更摘要**：一次大规模文档整改，统一了 Markdown 渲染风格（`> [!NOTE]`、`> [!TIP]` 等），升级了 Fern 配置版本号，新增 **Feature Matrix**、**Release Artifacts**、**Operator Metrics** 三大页面，细化了 K8s 部署、观测、Planner、Tool‑Calling、Multimodal 等章节的标题、提示与注意事项，删除了旧的 Support Matrix（已在新页面中复用），并在导航文件 `fern/versions/next.yml` 中同步了新页面路径。  

**🎯 影响范围**  
- **文档体系**：几乎所有 `fern/pages/**` 目录下的说明文档（后端、K8s、Planner、Observability、KV‑Router 等）。  
- **导航结构**：`next.yml` 被更新，任何使用 Fern 自动生成导航的 CI/CD 流程都会受到影响。  
- **用户引用**：部分外部文档、脚本或 CI 配置可能仍硬编码旧页面路径（如 `support-matrix.md`），需要同步更新。  
- **版本信息**：`fern/fern.config.json` 从 `3.29.1` 升至 `3.52.0`，若有工具通过该文件判断文档版本，需确认兼容。  

**💡 关注建议**  
1. **交叉链接检查**：确保所有 `path:`、`href:` 已指向新页面（尤其是 `support-matrix.md` 被删后仍被引用的地方），在 CI 中加入 Markdown 链接校验。  
2. **内容一致性**：Feature Matrix、Release Artifacts 与实际发布的容器、Wheel、Helm 版本保持同步，建议在发布脚本后自动生成对应 Markdown 表格，避免手动出错。  
3. **Admonition 兼容**：`> [!NOTE]` 等写法在部分 Markdown 渲染器（如 GitHub、MkDocs）可能不被识别，若仍使用旧渲染链路，请保留原 `<Note>`、`<Warning>` 等标签或提供兼容层。  
4. **导航文件**：`next.yml` 大幅增项后，建议加入 schema 校验，防止层级拼写错误导致文档生成失败。  
5. **版本号统一**：`fern/fern.config.json` 与 `release-artifacts.md` 中的 “Current Release” 必须保持一致，可考虑把版本号抽取为单一常量文件。  
6. **旧 Support Matrix**：该文件已删除，但 README、外部链接或搜索索引仍可能指向它，建议在仓库根目录留一个软链接或 redirect 页面，避免 404。  

以上检查完成后，文档的可读性和可维护性将大幅提升，且对用户、CI 与运维的影响可控制在最低。

---

### fix: sampling params parsing in vllm EPD flow  (#5813)
**SHA**: `454c28a` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/454c28abc0e02785dcf8ea0f20b1bf25cb298889)

**🎯 变更类型**：Bug 修复  
**⚡ 重要程度**：🟡 中  

**📋 变更摘要**  
1. 解决了 vLLM 采样参数（`SamplingParams`）在序列化/反序列化过程中出现的集合 → 列表转换问题。通过在 `parse_sampling_params` 中剔除以 `_` 开头的私有字段，并在序列化时同样过滤这些字段，避免 `__post_init__` 触发类型错误。  
2. 针对 vLLM 升级后对 decode worker 的 Pydantic 校验，修改 `worker_handler.py` 将 `request.multimodal_inputs` 从 `None` 改为空列表 `[]`，防止校验失败。  

**🎯 影响范围**  
- `components/src/dynamo/vllm/multimodal_handlers/worker_handler.py`（多模态请求处理）  
- `components/src/dynamo/vllm/multimodal_utils/protocol.py`（协议层采样参数序列化/反序列化）  
- 相关的 Pydantic 模型和 vLLM 交互路径均受到影响，尤其是使用 `SamplingParams` 进行推理的工作流。  

**💡 关注建议**  
- **开发者**：在新增或修改 `SamplingParams` 的字段时，遵循“仅使用公开字段”原则；若以后需要额外内部状态，请在 `__post_init__` 中自行构建，而不是依赖序列化。可考虑在 `SamplingParams` 上添加明确的 `exclude_private=True` 参数，以统一处理。  
- **测试**：新增针对 `SamplingParams` 编码后解码的单元测试，确保集合仍被还原为 `set`，并验证 `multimodal_inputs` 为 `[]` 时的完整工作流（包括日志、异常路径）。  
- **部署**：该修复对已有缓存或持久化的采样参数数据没有兼容性破坏，因为私有字段会被过滤掉；但若有业务依赖这些内部字段，请审查并迁移。  

整体来看，此次修复提升了 vLLM 与 Dynamo 之间的协议鲁棒性，避免因类型不匹配导致的运行时异常，属于中等风险的功能恢复。

---

### docs: refactor Dynamo readme.md and quick_start_local.rst  (#5649)
**SHA**: `e8c7bbf` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/e8c7bbf3d502bfe894e18f6ae00c8464873d5168)

**🎯 变更类型**：文档重构 / 内容更新  
**⚡ 重要程度**：🟡 中  

**📋 变更摘要**  
本次提交对项目的 README、快速上手指南以及若干内部文档页面进行了大幅度重写和结构优化。主要改动包括：
1. 将原先的 “Framework Support Matrix” 替换为更直观的 “Backend Feature Support”，并加入 **Best For** 对比列。  
2. 增加了 **Dynamo Architecture** 小节与对应的深度阅读链接。  
3. 重构本地快速启动流程：引入容器方式（推荐）以及 PyPI 安装步骤，统一了依赖说明并为不同后端提供具体示例。  
4. 合并并精简了安装、贡献等章节，去除冗余文档（`install.rst`、`_sections/installation.rst`），并在侧边栏去掉 “Installation” 链接。  
5. 为服务发现、消息中间件、基准测试等重要概念添加专门章节，提升可读性。  

**🎯 影响范围**  
- **README.md**（对外展示入口）  
- **docs/_includes/quick_start_local.rst**（本地快速启动）  
- **docs/_includes/install.rst**（已删除）  
- **docs/_sections/installation.rst**（已删除）  
- **docs/reference/feature-matrix.md**（添加 SPDX 版权头）  
- 侧边栏索引 `docs/index.rst`（移除 “Installation” 链接）  

这些改动主要面向 **用户文档** 与 **开发者入门**，不涉及代码或二进制产出，故对编译、运行时行为无直接影响。

**💡 关注建议**  
1. **链接有效性**：新加入的内部链接（如 `docs/design_docs/architecture.md`、`docs/reference/release-artifacts.md#container-images`）需在 CI 中做链接检查，防止因路径变化导致 404。  
2. **示例一致性**：快速启动示例中对不同后端的命令行参数已统一，但仍需确保对应的 Docker 镜像标签 (`0.8.1`) 与仓库发布的实际版本保持同步。  
3. **兼容性提示**：在 `--store-kv file` 与 NATS/etcd 选项的说明中，建议加入 OS/CPU 架构（如 ARM）下的已知限制，避免用户在不支持的环境中遇到隐蔽错误。  
4. **文档构建**：删除的 `install.rst` 与 `installation.rst` 可能仍被旧的 Sphinx `include` 或外部脚本引用，请确认所有构建配置（`conf.py`、`make html`）已更新，避免构建警告。  
5. **版本信息同步**：README 中的 “Latest News” 仍使用硬编码日期，建议改为自动化生成或在发布时手动维护，以免信息陈旧导致误导。  

综上，此次文档重构显著提升了可读性与上手速度，唯一需要关注的是链接、示例镜像版本以及构建配置的同步。若上述细节得到确认，可认为该 PR 已准备就绪。

---

### fix: add msgpack dependency to trtllm section (#5799)
**SHA**: `7359711` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/73597110ea626aa7a2ec9cbdf4b7731d6a7e6aa7)

**🎯 变更类型**：Bug 修复  
**⚡ 重要程度**：🟡 中  

**📋 变更摘要**  
在 `pyproject.toml` 的 `trtllm` 可选依赖中新增 `msgpack==1.1.2`，解决该功能在运行时缺少 MsgPack 库导致的导入错误。  

**🎯 影响范围**  
- **包装与发布**：`pyproject.toml` 与 `pip`/`poetry` 的依赖解析。  
- **TensorRT‑LLM 接口**：使用 `trtllm` 选项的用户将自动获得 MsgPack 支持。  
- **CI/CD 测试**：涉及 `trtllm` 环境的构建与单元/集成测试。  

**💡 关注建议**  
1. **兼容性检查**：确认 `msgpack==1.1.2` 与项目中其他库（特别是 `tensorrt-llm`）的二进制兼容性，防止版本冲突。  
2. **文档更新**：在 README/安装说明中标明 `trtllm` 选项现在额外依赖 `msgpack`，并给出对应的 pip 安装示例。  
3. **测试覆盖**：在 CI 中加入 `trtllm` 可选依赖的完整安装与运行测试，确保导入 `msgpack` 不会引入新错误。  
4. **依赖锁定**：若项目使用锁文件（`poetry.lock` 或 `requirements.txt`），同步更新以避免因未锁定版本导致的环境不一致。  

此更改主要影响可选特性安装流程，除非用户显式启用 `trtllm`，否则对现有默认环境无影响。请在发布前验证上述建议，以确保平滑过渡。

---

#### 🟢 低重要度变更 (7)

### chore: move HF config download and prevent duplicate concurrent model registration (#5767)
**SHA**: `b88cb59` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/b88cb59bf94c39faf974c2a46f0ea7c2f0644724)

**🎯 变更类型**：代码重构  
**⚡ 重要程度**：🟢 低  
**📋 摘要**：在 `ModelWatcher` 中加入 `DashSet` 记录正在注册的模型，提前检测已有注册以跳过重复的 HuggingFace 配置下载，并防止并发工作线程的重复注册，抽取 `do_model_registration` 完成实际注册逻辑，确保无论成功或失败均清理注册状态。

---

### ci: Add missing pytest marker (#5837)
**SHA**: `95383fd` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/95383fd61baae7660f322752e3da14168dce2af4)

**🎯 变更类型**：测试修改  
**⚡ 重要程度**：🟢低  
**📋 摘要**：在 `test_trtllm_handler_base.py` 中为单元测试添加了 `pytest.mark.gpu_0` 标记，以确保该测试在 GPU 环境下执行。

---

### docs: mocker (#5832)
**SHA**: `408d786` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/408d7868b77a872d5de407d967714f7a5b729c04)

**🎯 变更类型**：文档更新  
**⚡ 重要程度**：🟢低  
**📋 摘要**：在 `docs/hidden_toctree.rst` 中新增 `mocker/mocker.md` 条目，并新增 201 行文档，详细介绍 Rust 实现的 LLM 引擎模拟器 Mock­er 的功能、使用方式、架构及集成点。

---

### docs: add known issues section for TRT-LLM backend (#5801)
**SHA**: `284f772` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/284f772b255de67568a0ed768863028fac7a8b2a)

**🎯 变更类型**：文档更新  
**⚡ 重要程度**：🟢低  
**📋 摘要**：在 TRT‑LLM 后端 README 中新增 “已知问题与缓解措施”章节，详细说明 KV 缓存耗尽导致的 worker 死锁及相应配置 mitigations。

---

### docs: transpose backend dependency tables, extend to v0.6.0 (#5663)
**SHA**: `a460092` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/a4600927f5e6fee50e97b0e047eb684759a674c3)

**🎯 变更类型**：文档更新  
**⚡ 重要程度**：🟢 低  
**📋 摘要**：重新组织后端依赖表格，按 Dynamo 版本纵向展示 vLLM、SGLang、TensorRT‑LLM、NIXL 版本，并新增 CUDA 支持矩阵，扩展至 v0.6.0 及以后。​

---

### ci: add separate cache for release branches (#5293)
**SHA**: `7d5ed66` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/7d5ed665a3acd4ebfaef4aeeeb0328cf0d871c2c)

**🎯 变更类型**：配置调整（CI）  
**⚡ 重要程度**：🟢 低  
**📋 摘要**：为发布分支新增独立缓存路径，实现 `release-*` 分支的 Docker 镜像缓存与主分支分离，提升 CI 构建性能。

---

### chore: Update vLLM compilation config to vLLM v0.14.1 (#5819)
**SHA**: `f9b020c` | 🔗 [查看提交](https://github.com/ai-dynamo/dynamo/commit/f9b020c977db1d107dac8d8cebed00703f8961bd)

**🎯 变更类型**：配置调整  
**⚡ 重要程度**：🟢低  
**📋 摘要**：在 `deploy_hopper_16gpu.yaml` 中将 vLLM 编译配置从旧的 `pass_config`（启用融合、注意力融合、noop）更新为新的 `pass_config`（融合归一化量化、消除 noop），并保留 `cudagraph_mode` 为 `FULL_DECODE_ONLY`。此改动适配 vLLM v0.14.1。

---

